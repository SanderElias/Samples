"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[393],{393:(H,N,s)=>{s.r(N),s.d(N,{BintreeModule:()=>z});var g=s(1048),B=s(3290),y=s(4553),x=s(6495),I=s(8023);const h=()=>String.fromCharCode(Math.floor(26*Math.random())+97),c=new Map,_=(t,n,e,r)=>{const l={id:Date.now().toString(36)+"-"+h()+h()+h(),parentId:n,value:t,left:e,right:r};return c.set(l.id,l),l},o=t=>c.get(t),a=()=>[...c.values()].find(t=>void 0===t.parentId);function p(t,n=a()){return void 0===n?t:t.value<n.value?void 0===n.left?(n.left=t.id,t.parentId=n.id,t):p(t,o(n.left)):t.value>n.value?void 0===n.right?(n.right=t.id,t.parentId=n.id,t):p(t,o(n.right)):void(t.value===n.value&&(console.warn("thrown away duplicate value"),c.delete(t.id)))}function m(t=a()){const n=o(t.parentId),e=o(t.right);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.left);return e.left=t.id,t.parentId=e.id,void 0!==r?(t.right=r.id,r.parentId=t.id):t.right=void 0,e}const M=()=>[...c.values()].sort((t,n)=>t.value<n.value?-1:1);function b(t=a()){const n=o(t.parentId),e=o(t.left);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.right);return e.right=t.id,t.parentId=e.id,void 0!==r?(t.left=r.id,r.parentId=t.id):t.left=void 0,e}function u(t){if(void 0===t)return 0;const n=Math.max(u(o(t.left)),u(o(t.right)));return t.height=n+1,t.height}function d(t){if(void 0===t)return 0;const n=e=>{var r;return(null===(r=o(e))||void 0===r?void 0:r.height)||0};return t.balance=n(t.left)-n(t.right),t.balance}function f(t=a()){if(void 0===t)return;const n=d(t);if(n<-1){const r=o(t.right);r&&d(r)>0&&b(r);const l=m(t);return u(a()),f(l)}if(n>1){const r=o(t.left);r&&r.balance<0&&m(r);const l=b(t);return u(a()),f(l)}const e=r=>{d(r),Math.abs(null==r?void 0:r.balance)>1&&f(r)};e(o(t.left)),e(o(t.right))}var i=s(9724),A=s(5557),Z=s(7969);function $(t,n){if(1&t&&(i.TgZ(0,"span",3),i._uU(1),i.qZA()),2&t){const e=i.oxw().ngIf,r=i.oxw();let l;i.Q6J("title",r.title(e)),i.xp6(1),i.hij(" ",null!==(l=null==e?null:e.value)&&void 0!==l?l:"-"," ")}}function J(t,n){if(1&t&&(i.TgZ(0,"div",4),i._UZ(1,"b-node",5),i.ALo(2,"async"),i._UZ(3,"b-node",6),i.ALo(4,"async"),i.qZA()),2&t){const e=i.oxw(2);i.xp6(1),i.Q6J("bNode",i.lcZ(2,2,e.left$)),i.xp6(2),i.Q6J("bNode",i.lcZ(4,4,e.right$))}}function P(t,n){if(1&t&&(i.ynx(0),i.TgZ(1,"div"),i.YNc(2,$,2,2,"span",1),i.qZA(),i.YNc(3,J,5,6,"div",2),i.BQk()),2&t){const e=n.ngIf;let r;i.xp6(2),i.Q6J("ngIf",null!==(r=null==e?null:e.value)&&void 0!==r?r:void 0),i.xp6(1),i.Q6J("ngIf",(null==e?null:e.left)||(null==e?null:e.right))}}let U=(()=>{class t{constructor(){this.node$=new A.t,this.left$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.left)),{time:Date.now()}))),this.right$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.right)),{time:Date.now()}))),this.height=u,this.balance=d}set bNode(e){setTimeout(()=>this.node$.next(Object.assign(Object.assign({},e),{time:Date.now()})),10)}title(e){return`Height: ${e.height} balance: ${d(e)}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["b-node"]],inputs:{bNode:"bNode"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],["class","row",4,"ngIf"],[3,"title"],[1,"row"],[1,"left",3,"bNode"],[1,"right",3,"bNode"]],template:function(e,r){1&e&&(i.YNc(0,P,4,2,"ng-container",0),i.ALo(1,"async")),2&e&&i.Q6J("ngIf",i.lcZ(1,1,r.node$))},directives:[g.O5,t],pipes:[g.Ov],styles:["[_nghost-%COMP%] {\n    display: grid;\n    width: fit-content;\n    grid-template-columns: 1fr;\n    grid-template-rows: 20px 1fr;\n    justify-content: center;\n    align-content: center;\n    gap: 2px;\n    margin: 4px;\n    padding: 2px;\n    border: 1px solid rgba(255, 255, 255, 0.774);\n  }\n\n  div[_ngcontent-%COMP%] {\n    text-align: center;\n  }\n\n  div.row[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: center;\n    align-content: center;\n  }\n\n  div[_ngcontent-%COMP%]:first-child {\n    padding: 9px;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    background-color: rgba(93, 14, 93);\n\n  }\n\n  .left[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 0, 255);\n  }\n\n  .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 128, 0);\n  }"],changeDetection:0}),t})();const S=t=>[...new Set(Array.from({length:t},()=>((t=2e3)=>Math.floor(Math.random()*t))()))];function v(){return(v=(0,y.Z)(function*(){let t;return t||(t=S(100),(0,x.t8)("binTreeSampleData",t)),t})).apply(this,arguments)}const R=[{path:"",component:(()=>{class t{constructor(){this.count=31,this.root$=new I.x,this.nodes=M(),this.dump=()=>{(function w(){console.table([...c.values()].sort((t,n)=>t.value<n.value?-1:1).map(t=>{var n,e;return Object.assign(Object.assign({},t),{leftVal:null===(n=o(t.left))||void 0===n?void 0:n.value,cur:t.value,rightVal:null===(e=o(t.right))||void 0===e?void 0:e.value})}))})(),this.refresh()},this.deb=null}ngOnInit(){this.reset()}reset(){var e=this;return(0,y.Z)(function*(){c.clear();const[r,...l]=yield function Q(){return v.apply(this,arguments)}(),C=_(r);l.forEach(F=>p(_(F),C)),u(C),setTimeout(()=>e.root$.next(C),20),e.nodes=M()})()}refresh(){this.deb&&clearTimeout(this.deb),this.deb=setTimeout(()=>{this.root$.next(Object.assign(Object.assign({},a()),{time:Date.now()}))},0),u(a())}rl(e=a()){m(e),this.refresh()}rr(e=a()){b(e),this.refresh()}rb(e=a()){(function j(){let t=100;for(f();;){const n=[...c.values()].find(e=>Math.abs(d(e))>1);if(console.log(c.size,null==n?void 0:n.value,d(n)),void 0===n||!--t)break;f(n)}})(),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-bintree"]],decls:13,vars:3,consts:[[1,"button-bar"],[3,"click"],[3,"bNode"]],template:function(e,r){1&e&&(i.TgZ(0,"h1"),i._uU(1,"Binary tree"),i.qZA(),i.TgZ(2,"div",0)(3,"button",1),i.NdJ("click",function(){return r.rl()}),i._uU(4,"rl"),i.qZA(),i.TgZ(5,"button",1),i.NdJ("click",function(){return r.rr()}),i._uU(6,"rr"),i.qZA(),i.TgZ(7,"button",1),i.NdJ("click",function(){return r.rb()}),i._uU(8,"rb"),i.qZA(),i.TgZ(9,"button",1),i.NdJ("click",function(){return r.dump()}),i._uU(10,"dump"),i.qZA()(),i._UZ(11,"b-node",2),i.ALo(12,"async")),2&e&&(i.xp6(11),i.Q6J("bNode",i.lcZ(12,1,r.root$)))},directives:[U],pipes:[g.Ov],styles:[".button-bar[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(5,1fr);\n    max-width: 100vw;\n  }\n  .row[_ngcontent-%COMP%] {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(10,1fr);\n  }"],changeDetection:0}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[B.Bz.forChild(R)],B.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[g.ez,L]]}),t})()}}]);