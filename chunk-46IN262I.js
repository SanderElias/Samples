function i(n){return new Promise((t,e)=>{n.oncomplete=n.onsuccess=()=>t(n.result),n.onabort=n.onerror=()=>e(n.error)})}function s(n,t){let e,u=()=>{if(e)return e;let r=indexedDB.open(n);return r.onupgradeneeded=()=>r.result.createObjectStore(t),e=i(r),e.then(a=>{a.onclose=()=>e=void 0},()=>{}),e};return(r,a)=>u().then(o=>a(o.transaction(t,r).objectStore(t)))}var c;function l(){return c||(c=s("keyval-store","keyval")),c}function f(n,t=l()){return t("readonly",e=>i(e.get(n)))}function d(n,t,e=l()){return e("readwrite",u=>(u.put(t,n),i(u.transaction)))}function y(n,t=l()){return t("readwrite",e=>(e.delete(n),i(e.transaction)))}export{s as a,f as b,d as c,y as d};
