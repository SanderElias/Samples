import{a as v,b as y}from"./chunk-DKXUWOUE.js";import"./chunk-MUPYOVCP.js";import"./chunk-BJIBN36K.js";import{Mb as a,Nb as i,Za as o,fc as n,hc as r,lb as l,sa as m,wc as p,xc as c,zc as h}from"./chunk-WBYBMP4K.js";import"./chunk-DAQOROHW.js";var E=(()=>{class d{constructor(){this.myId=m(1),this.naiveData=m(0),this._naiveEffect=c(async()=>{let s=this.myId(),e=await u({params:s}).catch(t=>t.message);if(this.myId()!==e){this.naiveData.set(`out-of-order: ${this.myId()} !== ${e}`),console.log("out-of-order detected");return}this.naiveData.set(e)}),this.ab=new AbortController,this.naiveDataWithAbort=m(0),this._naiveEffectWithAbort=c(async()=>{this.ab.abort(),this.ab=new AbortController;let s=this.ab.signal,e=this.myId();try{let t=await u({params:e,abortSignal:s}).catch(g=>g.message);this.naiveDataWithAbort.set(t)}catch{}}),this.datUsingResource=h({params:this.myId,loader:u}),this.status=p(()=>["Idle","Error","Loading","Reloading","Resolved","Local"][this.datUsingResource.status()]),this.usingAsyncComputed=v(()=>u({params:this.myId()})),this.usingComputedResource=y(()=>u({params:this.myId()})),setInterval(()=>this.myId.update(s=>s+1),1e3)}static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275cmp=l({type:d,selectors:[["se-out-of-order"]],decls:20,vars:9,template:function(e,t){e&1&&(a(0,"h1"),n(1,"Out of Order problem"),i(),a(2,"p"),n(3),i(),a(4,"p"),n(5),i(),a(6,"p"),n(7),i(),a(8,"p"),n(9),i(),a(10,"p"),n(11),i(),a(12,"p"),n(13),i(),a(14,"p"),n(15),i(),a(16,"p"),n(17),i(),a(18,"p"),n(19),i()),e&2&&(o(3),r("My ID: ",t.myId()),o(2),r("Naive data: ",t.naiveData()),o(2),r("Naive data with abort: ",t.naiveDataWithAbort()),o(2),r("Data using resource: ",t.datUsingResource.value()),o(2),r("Data using resource has status: ",t.status()),o(2),r("Data using async computed: ",t.usingAsyncComputed()),o(2),r("Data using async resource: ",t.usingComputedResource().value()),o(2),r("async resource status ",t.usingComputedResource().status),o(2),r("async resource status ",t.usingComputedResource().stream))},styles:["[_nghost-%COMP%]{display:block}"]})}}return d})(),u=async({params:d,abortSignal:f})=>{let s=500+Math.random()*600;if(d%25===0)throw new Error("Failed to fetch");return await new Promise(e=>setTimeout(e,s)),f?.aborted?"":d};export{E as OutOfOrderComponent};
