import{Kc as m,Lc as h,ga as r,pa as l,xa as p}from"./chunk-UTYHTRAX.js";var f,a,g,o;if(typeof indexedDB<"u"){let{createStore:e,get:d,set:i,update:s,del:t}=await import("./dist-XK3YZD4P.js"),c=e("mqtt","se-store");f=n=>d(n,c),a=(n,u)=>i(n,u,c),g=(n,u)=>s(n,u,c),o=n=>t(n,c)}else{let e=new Map;a=async(d,i)=>e.set(d,i),o=async d=>e.delete(d),g=async(d,i)=>e.set(d,i),f=async d=>{}}function b(e,d,i=r(l)){let s=p(d,{debugName:`Persisted ${e}`});return f(e).then(t=>{t!==void 0&&s.set(t)}).catch(()=>{}),m(async()=>{let t=s(),c=await f(e).catch(()=>{});t!==c&&(t!==void 0?a(e,t).catch(()=>{}):o(e).catch(()=>{}))},{injector:i,debugName:"PersistEffect"}),s}function j(e,d,i){let s=h({source:d,computation:(t,c)=>{let n=i(t,c);return n!==c?.value&&n!==void 0?a(e,n).catch(()=>{}):n===void 0&&o(e).catch(()=>{}),n}});return f(e).then(t=>{t!==void 0&&s.set(t)}),s}export{b as a,j as b};
