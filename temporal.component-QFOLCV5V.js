import{a as E,g as I}from"./chunk-VGIL7KG6.js";import"./chunk-3Z5IFSMG.js";import"./chunk-MQQL2PHB.js";import"./chunk-MQV57ERE.js";import"./chunk-7VX6H7RD.js";import{Aa as _,Mb as f,Nb as T,Rc as s,Sc as g,Tb as c,Ub as d,Vb as h,Wb as y,Xb as o,Yb as i,Zb as w,_a as l,hd as C,ic as b,sb as S,wa as p,xc as a,yc as u,zc as v}from"./chunk-CVECPIPU.js";import"./chunk-C6Q5SG76.js";function x(t,m){if(t&1&&(o(0,"option",1),a(1),i()),t&2){let e=m.$implicit;y("value",e),l(),v(" ",e," ")}}function D(t,m){if(t&1&&(o(0,"option",1),a(1),i()),t&2){let e=m.$implicit;y("value",e),l(),v(" ",e," ")}}function F(t,m){if(t&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),a(6),i()()),t&2){let e=m.$implicit;l(2),u(e.region),l(2),u(e.city),l(2),u(e.time())}}var B=(()=>{class t{constructor(){this.temporal=M(),this.now=p(this.temporal().Now,{equal:()=>!1}),this.timeZones=k(),this.browserTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone.split("/"),this.table=p([{region:this.browserTimeZone[0],city:this.browserTimeZone[1],time:s(()=>this.now().plainTimeISO(this.browserTimeZone.join("/")))}]),this.regions=Object.keys(this.timeZones),this.region=g(()=>this.browserTimeZone[0]),this.cities=s(()=>this.timeZones[this.region()].map(({city:e})=>e)),this.city=g({source:this.region,computation:(e,n)=>{let r=_(this.cities);if(e!==n?.source){if(e===this.browserTimeZone[0])return this.browserTimeZone[1];if(r.length>0)return r[0]}return n?.value||r[0]||""}}),this.model=g(()=>({region:this.region(),city:this.city()})),this.form=E(this.model),this._=C(e=>{let n=setInterval(()=>{this.now.set(this.temporal().Now)},1e3);e(()=>clearInterval(n))}),this.add=()=>{let e=this.form.region().value(),n=this.form.city().value();this.table.update(r=>[...r,{region:e,city:n,time:s(()=>this.now().plainTimeISO(`${e}/${n}`)),date:s(()=>this.now().plainDateISO(`${e}/${n}`))}])}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=S({type:t,selectors:[["se-temporal"]],decls:31,vars:4,consts:[[3,"change","formField"],[3,"value"],["list","cities",3,"formField"],["id","cities"],["type","button",3,"click"]],template:function(n,r){n&1&&(o(0,"H1"),a(1,"Playing with Temporal"),i(),o(2,"form")(3,"label")(4,"span"),a(5,"Region"),i(),o(6,"select",0),b("change",function(){return r.region.set(r.form.region().value())}),d(7,x,2,2,"option",1,c),i(),f(),i(),o(9,"label")(10,"span"),a(11,"City"),i(),w(12,"input",2),f(),o(13,"datalist",3),d(14,D,2,2,"option",1,c),i()(),o(16,"label")(17,"button",4),b("click",function(){return r.add()}),a(18,"Add"),i()()(),o(19,"table")(20,"thead")(21,"tr")(22,"th"),a(23,"Region"),i(),o(24,"th"),a(25,"City"),i(),o(26,"th"),a(27,"Current Time"),i()()(),o(28,"tbody"),d(29,F,7,3,"tr",null,c),i()()),n&2&&(l(6),T(r.form.region,"formField"),l(),h(r.regions),l(5),T(r.form.city,"formField"),l(2),h(r.cities()),l(15),h(r.table()))},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"]})}}return t})();function M(){let t=p({});return typeof globalThis.Temporal<"u"?t.set(globalThis.Temporal):(console.log("Loading Temporal polyfill..."),import("./temporal-polyfill-37CRL62Q.js").then(m=>{t.set(m.Temporal),globalThis.Temporal=m.Temporal})),t}var k=()=>{let t=Intl.supportedValuesOf("timeZone").map(e=>{let n=e.split("/");return{timeZone:e,region:n[0],city:n[1]}}),m=Map.groupBy(t,e=>e.region).entries();return Object.fromEntries(m)};export{B as TemporalComponent};
