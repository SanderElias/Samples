"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[672],{2844:(D,v,o)=>{o.d(v,{P:()=>T,z:()=>f});var g=o(4813);class x extends g.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const m={setInterval(...d){const{delegate:e}=m;return((null==e?void 0:e.setInterval)||setInterval)(...d)},clearInterval(d){const{delegate:e}=m;return((null==e?void 0:e.clearInterval)||clearInterval)(d)},delegate:void 0};var C=o(8308),B=o(2069);class u{constructor(e,t=u.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}u.now=B.l.now;const f=new class Z extends u{constructor(e,t=u.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}(class A extends x{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,p=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(p,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(p,this.id,t),this}requestAsyncId(e,t,r=0){return m.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;m.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let p,r=!1;try{this.work(e)}catch(y){r=!0,p=y||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),p}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,C.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),T=f},4027:(D,v,o)=>{o.r(v),o.d(v,{BigDataModule:()=>w});var g=o(1048),x=o(3290),m=o(9959),C=o(4121),A=o(5490),B=o(2993),u=o(2147),Z=o(1528),f=o(7969),T=o(5598),d=o(8168),e=o(5619),t=o(9724),r=o(4841);function p(s,l){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&s){const n=l.$implicit;t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.email)}}function y(s,l){if(1&s){const n=t.EpF();t.TgZ(0,"section"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"label"),t._uU(4,"Search "),t.TgZ(5,"input",1),t.NdJ("input",function(i){return t.CHM(n),t.oxw().setProp("search",i)}),t.qZA()(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(i){return t.CHM(n),t.oxw().setProp("sort",i)}),t._uU(8,"none"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(i){return t.CHM(n),t.oxw().setProp("sort",i)}),t._uU(10,"username"),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(i){return t.CHM(n),t.oxw().setProp("sort",i)}),t._uU(12,"email"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(i){return t.CHM(n),t.oxw().setProp("sort",i)}),t._uU(14,"id"),t.qZA()(),t.TgZ(15,"div",7)(16,"input",8),t.NdJ("input",function(i){return t.CHM(n),t.oxw().setProp("position",i)}),t.qZA(),t.TgZ(17,"table")(18,"tbody"),t.YNc(19,p,7,3,"tr",9),t.qZA()()()()}if(2&s){const n=l.ngIf;t.xp6(1),t.AsE(" Available users:",n.users.length," (Loading done:",n.done,"%)"),t.xp6(15),t.Q6J("max",n.users.length/n.state.pageSize),t.xp6(3),t.Q6J("ngForOf",n.page)}}const M=[{path:"",component:(()=>{class s{constructor(n){this.user=n,this.state$=new C.X({pageSize:20,position:0,search:"",sort:""}),this.users$=this.state$.pipe((0,B.j)("sort"),(0,u.x)(),(0,Z.w)(c=>this.user.allUsers$.pipe((0,f.U)(i=>""===c?i:i.sort((a,h)=>a[c]<h[c]?-1:1))))),this.doneLoadingPer$=(0,A.F)(100).pipe((0,T.q)(1e3),(0,d.b)(()=>this.user.addUsers(500)),(0,f.U)(c=>Math.ceil(c/1e3*100))),this.curPage$=this.state$.pipe((0,u.x)(),(0,e.z)(c=>this.users$.pipe((0,f.U)(i=>this.findFirst(i,c))))),this.vm$=(0,m.Hv)({users:this.users$,state:this.state$,page:this.curPage$,done:this.doneLoadingPer$})}findFirst(n,{position:c,pageSize:i,search:a}){if(!a)return n.slice(c*i,c*i+i);let h=0;const b=[];for(;h<n.length&&b.length<i;)n[h].username.toLowerCase().includes(a.toLowerCase())&&b.push(n[h]),h+=1;return b}setProp(n,c){const i=c.target,a=this.state$.value,h="number"==typeof a[n];this.state$.next(Object.assign(Object.assign({},a),{[n]:h?i.valueAsNumber:i.value}))}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(r.H))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-big-data"]],decls:4,vars:3,consts:[[4,"ngIf"],[3,"input"],["id","buttons"],["value","",3,"click"],["value","username",3,"click"],["value","email",3,"click"],["value","id",3,"click"],["id","scroll"],["type","range",3,"max","input"],[4,"ngFor","ngForOf"]],template:function(n,c){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Big data and performance demo"),t.qZA(),t.YNc(2,y,20,4,"section",0),t.ALo(3,"async")),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,c.vm$)))},directives:[g.O5,g.sg],pipes:[g.Ov],styles:["#scroll[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 40px 1fr;\n      }\n      #buttons[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, 154px);\n      }\n      #scroll[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\n        transform: translateY(-100%) rotate(90deg); \n        transform-origin: left bottom;\n        width: 20rem; \n        height: 40px; \n      }"]}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[x.Bz.forChild(M)],x.Bz]}),s})();var U=o(4395);let w=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[g.ez,P,U.f]]}),s})()}}]);