import{a as g,b as v}from"./chunk-7PHUSJ2Z.js";import"./chunk-YKLHFWMG.js";import"./chunk-QF5K4MHH.js";import{Lc as p,Nc as h,Ub as a,Vb as i,Ya as s,ob as l,rc as n,tc as d,va as u,ya as c}from"./chunk-I3AI3OF7.js";import"./chunk-DAQOROHW.js";var C=(()=>{class r{constructor(){this.myId=u(1,{}),this.naiveData=u(0,{}),this._naiveEffect=c(async()=>{let o=this.myId(),e=await m({params:o}).catch(t=>t.message);if(this.myId()!==e){this.naiveData.set(`out-of-order: ${this.myId()} !== ${e}`),console.log("out-of-order detected");return}this.naiveData.set(e)},{}),this.ab=new AbortController,this.naiveDataWithAbort=u(0,{}),this._naiveEffectWithAbort=c(async()=>{this.ab.abort(),this.ab=new AbortController;let o=this.ab.signal,e=this.myId();try{let t=await m({params:e,abortSignal:o}).catch(f=>f.message);this.naiveDataWithAbort.set(t)}catch{}},{}),this.datUsingResource=h({params:this.myId,loader:m}),this.status=p(()=>["Idle","Error","Loading","Reloading","Resolved","Local"][this.datUsingResource.status()],{}),this.usingAsyncComputed=g(()=>m({params:this.myId()})),this.usingComputedResource=v(()=>m({params:this.myId()})),setInterval(()=>this.myId.update(o=>o+1),1e3)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=l({type:r,selectors:[["se-out-of-order"]],decls:20,vars:9,template:function(e,t){e&1&&(a(0,"h1"),n(1,"Out of Order problem"),i(),a(2,"p"),n(3),i(),a(4,"p"),n(5),i(),a(6,"p"),n(7),i(),a(8,"p"),n(9),i(),a(10,"p"),n(11),i(),a(12,"p"),n(13),i(),a(14,"p"),n(15),i(),a(16,"p"),n(17),i(),a(18,"p"),n(19),i()),e&2&&(s(3),d("My ID: ",t.myId()),s(2),d("Naive data: ",t.naiveData()),s(2),d("Naive data with abort: ",t.naiveDataWithAbort()),s(2),d("Data using resource: ",t.datUsingResource.value()),s(2),d("Data using resource has status: ",t.status()),s(2),d("Data using async computed: ",t.usingAsyncComputed()),s(2),d("Data using async resource: ",t.usingComputedResource().value()),s(2),d("async resource status ",t.usingComputedResource().status),s(2),d("async resource status ",t.usingComputedResource().stream))},styles:["[_nghost-%COMP%]{display:block}"]})}}return r})(),m=async({params:r,abortSignal:E})=>{let o=500+Math.random()*600;if(r%25===0)throw new Error("Failed to fetch");return await new Promise(e=>setTimeout(e,o)),E?.aborted?"":r};export{C as OutOfOrderComponent};
