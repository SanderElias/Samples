import{a as Q}from"./chunk-YKLHFWMG.js";import{B as K,c as q,f as R,g as H,j as G,m as z,n as J}from"./chunk-ZHL5IOZF.js";import{g as B}from"./chunk-6Z5BSBYQ.js";import"./chunk-QF5K4MHH.js";import{$ as x,D as C,Fc as E,Gc as W,Jb as f,Lb as u,Nb as D,Ob as S,Pb as k,Qb as j,Rb as m,Sb as l,U as w,V as b,X as v,Ya as d,_b as O,ea as c,ec as h,f as y,ic as P,ja as F,jc as T,ka as M,kc as V,ob as $,p as g,q as r,r as _,rc as p,uc as I,wc as L,xc as A,yc as N}from"./chunk-I3AI3OF7.js";import"./chunk-DAQOROHW.js";var X=(()=>{class t{constructor(){this.http=c(Q),this.addresses$=this.http.get("assets/addresses.csv",{responseType:"text"}).pipe(r(e=>e.split("\r").map(n=>n.split(","))),r(([e,...n])=>n.map((i,o)=>i.reduce((s,Y,Z)=>(s[U(e[Z])]=U(Y),s),{id:o}))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function U(t){return t?.replace(/^"(.*)"$/,"$1")}var te=["myForm"];function ne(t,a){t&1&&(m(0,"p"),p(1,"Do not change"),l())}function ie(t,a){if(t&1){let e=O();m(0,"label"),p(1),m(2,"div")(3,"input",4),N("ngModelChange",function(i){let o=F(e).$implicit,s=h();return A(s.person[o.name],i)||(s.person[o.name]=i),M(i)}),l(),f(4,ne,2,0,"p"),l()()}if(t&2){let e=a.$implicit,n=h();d(),I(" ",e.name," ",e.type," "),d(2),j("name",e.name)("type",e.type),L("ngModel",n.person[e.name]),d(),u(e.name==="id"?4:-1)}}function oe(t,a){t&1&&(m(0,"dialog")(1,"form",1,0),S(3,ie,5,6,"label",null,D),m(5,"div",2)(6,"button",3),p(7,"Submit"),l()()()()),t&2&&(d(3),k(a.fields))}var re=t=>{let a=(t.constructor.name||"unknown").toLowerCase();return t==null?"hidden":a==="string"?"text":a},Ce=(()=>{class t{constructor(){this.adr=c(X),this.person$=new y({}),this.fieldData$=this.person$.pipe(r(e=>Object.entries(e).map(([n,i])=>({name:n,value:i,type:re(i)}))),r(e=>e.filter(n=>n.type!=="Array"))),this.addresses$=this.adr.addresses$,this.vm$=_({person:this.person$,fields:this.fieldData$,addresses:this.addresses$}).pipe(r(({person:e,fields:n,addresses:i})=>({person:e,fields:n,addresses:i,names:Object.keys(i[0])})))}ngAfterViewInit(){this.formList.changes.pipe(w(void 0),r(()=>this.formList.first),C(e=>e!==void 0),b(e=>e.valueChanges),v(e=>console.log("form value changed",e))).subscribe(),this.adr.addresses$}async openWith(e){if(e){let n=document.querySelector("dialog"),o=(await g(this.addresses$)).find(s=>s.id===e);this.person$.next(o),n.showModal()}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=$({type:t,selectors:[["app-dyn-form"]],viewQuery:function(n,i){if(n&1&&P(te,5),n&2){let o;T(o=V())&&(i.formList=o)}},decls:4,vars:3,consts:[["myForm","ngForm"],["method","dialog"],[1,"labelRow"],["type","submit"],[3,"ngModelChange","name","type","ngModel"]],template:function(n,i){if(n&1&&(m(0,"h1"),p(1,"Dynamic form sample"),l(),f(2,oe,8,0,"dialog"),E(3,"async")),n&2){let o;d(2),u((o=W(3,1,i.vm$))?2:-1,o)}},dependencies:[K,J,q,R,H,z,G,B],styles:["dialog[_ngcontent-%COMP%]::backdrop{background:#1e142373}.tableHolder[_ngcontent-%COMP%]{height:80vh;overflow:auto;width:100rem;border-collapse:collapse}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#2a2929}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{display:grid;grid-template-columns:7rem 1fr;align-items:center;gap:.4rem}input[_ngcontent-%COMP%]{margin-bottom:5px;width:20rem}"]})}}return t})();export{Ce as DynFormComponent};
