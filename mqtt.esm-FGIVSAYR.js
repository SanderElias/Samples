import{a as We,b as Rt,c as on}from"./chunk-DAQOROHW.js";var $i=Object.defineProperty,Es=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyNames,As=Object.prototype.hasOwnProperty,qe=(s,f)=>()=>(s&&(f=s(s=0)),f),de=(s,f)=>()=>(f||s((f={exports:{}}).exports,f),f.exports),Bt=(s,f)=>{for(var o in f)$i(s,o,{get:f[o],enumerable:!0})},Is=(s,f,o,u)=>{if(f&&typeof f=="object"||typeof f=="function")for(let h of Ss(f))!As.call(s,h)&&h!==o&&$i(s,h,{get:()=>f[h],enumerable:!(u=Es(f,h))||u.enumerable});return s},Re=s=>Is($i({},"__esModule",{value:!0}),s),oe=qe(()=>{}),Ie={};Bt(Ie,{_debugEnd:()=>ni,_debugProcess:()=>ii,_events:()=>wi,_eventsCount:()=>_i,_exiting:()=>qr,_fatalExceptions:()=>ei,_getActiveHandles:()=>Wn,_getActiveRequests:()=>Fn,_kill:()=>zr,_linkedBinding:()=>Nn,_maxListeners:()=>yi,_preload_modules:()=>bi,_rawDebug:()=>Fr,_startProfilerIdleNotifier:()=>oi,_stopProfilerIdleNotifier:()=>si,_tickCallback:()=>ri,abort:()=>hi,addListener:()=>vi,allowedNodeEnvironmentFlags:()=>Xr,arch:()=>Tr,argv:()=>Rr,argv0:()=>gi,assert:()=>$n,binding:()=>Ur,chdir:()=>Nr,config:()=>Hr,cpuUsage:()=>Nt,cwd:()=>Lr,debugPort:()=>pi,default:()=>Hi,dlopen:()=>Dn,domain:()=>$r,emit:()=>ki,emitWarning:()=>Mr,env:()=>Pr,execArgv:()=>Cr,execPath:()=>di,exit:()=>Gr,features:()=>Zr,hasUncaughtExceptionCaptureCallback:()=>qn,hrtime:()=>Gt,kill:()=>Yr,listeners:()=>Vn,memoryUsage:()=>Kr,moduleLoadList:()=>Wr,nextTick:()=>jn,off:()=>Si,on:()=>rt,once:()=>Ei,openStdin:()=>Jr,pid:()=>ci,platform:()=>Or,ppid:()=>fi,prependListener:()=>Ti,prependOnceListener:()=>Oi,reallyExit:()=>Vr,release:()=>Dr,removeAllListeners:()=>Ii,removeListener:()=>Ai,resourceUsage:()=>Qr,setSourceMapsEnabled:()=>mi,setUncaughtExceptionCaptureCallback:()=>ti,stderr:()=>li,stdin:()=>ui,stdout:()=>ai,title:()=>kr,umask:()=>jr,uptime:()=>Hn,version:()=>xr,versions:()=>Br});function qi(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function ks(){!At||!Et||(At=!1,Et.length?Xe=Et.concat(Xe):Wt=-1,Xe.length&&Un())}function Un(){if(!At){var s=setTimeout(ks,0);At=!0;for(var f=Xe.length;f;){for(Et=Xe,Xe=[];++Wt<f;)Et&&Et[Wt].run();Wt=-1,f=Xe.length}Et=null,At=!1,clearTimeout(s)}}function jn(s){var f=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)f[o-1]=arguments[o];Xe.push(new Ln(s,f)),Xe.length===1&&!At&&setTimeout(Un,0)}function Ln(s,f){this.fun=s,this.array=f}function $e(){}function Nn(s){qi("_linkedBinding")}function Dn(s){qi("dlopen")}function Fn(){return[]}function Wn(){return[]}function $n(s,f){if(!s)throw new Error(f||"assertion error")}function qn(){return!1}function Hn(){return st.now()/1e3}function Gt(s){var f=Math.floor((Date.now()-st.now())*.001),o=st.now()*.001,u=Math.floor(o)+f,h=Math.floor(o%1*1e9);return s&&(u=u-s[0],h=h-s[1],h<0&&(u--,h+=Jt)),[u,h]}function rt(){return Hi}function Vn(s){return[]}var Xe,At,Et,Wt,kr,Tr,Or,Pr,Rr,Cr,xr,Br,Mr,Ur,jr,Lr,Nr,Dr,Fr,Wr,$r,qr,Hr,Vr,zr,Nt,Qr,Kr,Yr,Gr,Jr,Xr,Zr,ei,ti,ri,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,bi,mi,st,gr,Jt,yi,wi,_i,vi,Ei,Si,Ai,Ii,ki,Ti,Oi,Hi,Ts=qe(()=>{oe(),ae(),se(),Xe=[],At=!1,Wt=-1,Ln.prototype.run=function(){this.fun.apply(null,this.array)},kr="browser",Tr="x64",Or="browser",Pr={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Rr=["/usr/bin/node"],Cr=[],xr="v16.8.0",Br={},Mr=function(s,f){console.warn((f?f+": ":"")+s)},Ur=function(s){qi("binding")},jr=function(s){return 0},Lr=function(){return"/"},Nr=function(s){},Dr={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Fr=$e,Wr=[],$r={},qr=!1,Hr={},Vr=$e,zr=$e,Nt=function(){return{}},Qr=Nt,Kr=Nt,Yr=$e,Gr=$e,Jr=$e,Xr={},Zr={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ei=$e,ti=$e,ri=$e,ii=$e,ni=$e,oi=$e,si=$e,ai=void 0,li=void 0,ui=void 0,hi=$e,ci=2,fi=1,di="/bin/usr/node",pi=9229,gi="node",bi=[],mi=$e,st={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},st.now===void 0&&(gr=Date.now(),st.timing&&st.timing.navigationStart&&(gr=st.timing.navigationStart),st.now=()=>Date.now()-gr),Jt=1e9,Gt.bigint=function(s){var f=Gt(s);return typeof BigInt>"u"?f[0]*Jt+f[1]:BigInt(f[0]*Jt)+BigInt(f[1])},yi=10,wi={},_i=0,vi=rt,Ei=rt,Si=rt,Ai=rt,Ii=rt,ki=$e,Ti=rt,Oi=rt,Hi={version:xr,versions:Br,arch:Tr,platform:Or,release:Dr,_rawDebug:Fr,moduleLoadList:Wr,binding:Ur,_linkedBinding:Nn,_events:wi,_eventsCount:_i,_maxListeners:yi,on:rt,addListener:vi,once:Ei,off:Si,removeListener:Ai,removeAllListeners:Ii,emit:ki,prependListener:Ti,prependOnceListener:Oi,listeners:Vn,domain:$r,_exiting:qr,config:Hr,dlopen:Dn,uptime:Hn,_getActiveRequests:Fn,_getActiveHandles:Wn,reallyExit:Vr,_kill:zr,cpuUsage:Nt,resourceUsage:Qr,memoryUsage:Kr,kill:Yr,exit:Gr,openStdin:Jr,allowedNodeEnvironmentFlags:Xr,assert:$n,features:Zr,_fatalExceptions:ei,setUncaughtExceptionCaptureCallback:ti,hasUncaughtExceptionCaptureCallback:qn,emitWarning:Mr,nextTick:jn,_tickCallback:ri,_debugProcess:ii,_debugEnd:ni,_startProfilerIdleNotifier:oi,_stopProfilerIdleNotifier:si,stdout:ai,stdin:ui,stderr:li,abort:hi,umask:jr,chdir:Nr,cwd:Lr,env:Pr,title:kr,argv:Rr,execArgv:Cr,pid:ci,ppid:fi,execPath:di,debugPort:pi,hrtime:Gt,argv0:gi,_preload_modules:bi,setSourceMapsEnabled:mi}}),se=qe(()=>{Ts()}),Ne={};Bt(Ne,{Buffer:()=>rr,INSPECT_MAX_BYTES:()=>zn,default:()=>it,kMaxLength:()=>Qn});function Os(){if(Pi)return xt;Pi=!0,xt.byteLength=r,xt.toByteArray=n,xt.fromByteArray=d;for(var s=[],f=[],o=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=u.length;h<i;++h)s[h]=u[h],f[u.charCodeAt(h)]=h;f[45]=62,f[95]=63;function e(p){var w=p.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=w);var y=g===w?0:4-g%4;return[g,y]}function r(p){var w=e(p),g=w[0],y=w[1];return(g+y)*3/4-y}function t(p,w,g){return(w+g)*3/4-g}function n(p){var w,g=e(p),y=g[0],E=g[1],b=new o(t(p,y,E)),_=0,k=E>0?y-4:y,T;for(T=0;T<k;T+=4)w=f[p.charCodeAt(T)]<<18|f[p.charCodeAt(T+1)]<<12|f[p.charCodeAt(T+2)]<<6|f[p.charCodeAt(T+3)],b[_++]=w>>16&255,b[_++]=w>>8&255,b[_++]=w&255;return E===2&&(w=f[p.charCodeAt(T)]<<2|f[p.charCodeAt(T+1)]>>4,b[_++]=w&255),E===1&&(w=f[p.charCodeAt(T)]<<10|f[p.charCodeAt(T+1)]<<4|f[p.charCodeAt(T+2)]>>2,b[_++]=w>>8&255,b[_++]=w&255),b}function l(p){return s[p>>18&63]+s[p>>12&63]+s[p>>6&63]+s[p&63]}function c(p,w,g){for(var y,E=[],b=w;b<g;b+=3)y=(p[b]<<16&16711680)+(p[b+1]<<8&65280)+(p[b+2]&255),E.push(l(y));return E.join("")}function d(p){for(var w,g=p.length,y=g%3,E=[],b=16383,_=0,k=g-y;_<k;_+=b)E.push(c(p,_,_+b>k?k:_+b));return y===1?(w=p[g-1],E.push(s[w>>2]+s[w<<4&63]+"==")):y===2&&(w=(p[g-2]<<8)+p[g-1],E.push(s[w>>10]+s[w>>4&63]+s[w<<2&63]+"=")),E.join("")}return xt}function Ps(){return Ri?Dt:(Ri=!0,Dt.read=function(s,f,o,u,h){var i,e,r=h*8-u-1,t=(1<<r)-1,n=t>>1,l=-7,c=o?h-1:0,d=o?-1:1,p=s[f+c];for(c+=d,i=p&(1<<-l)-1,p>>=-l,l+=r;l>0;i=i*256+s[f+c],c+=d,l-=8);for(e=i&(1<<-l)-1,i>>=-l,l+=u;l>0;e=e*256+s[f+c],c+=d,l-=8);if(i===0)i=1-n;else{if(i===t)return e?NaN:(p?-1:1)*(1/0);e=e+Math.pow(2,u),i=i-n}return(p?-1:1)*e*Math.pow(2,i-u)},Dt.write=function(s,f,o,u,h,i){var e,r,t,n=i*8-h-1,l=(1<<n)-1,c=l>>1,d=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=u?0:i-1,w=u?1:-1,g=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(r=isNaN(f)?1:0,e=l):(e=Math.floor(Math.log(f)/Math.LN2),f*(t=Math.pow(2,-e))<1&&(e--,t*=2),e+c>=1?f+=d/t:f+=d*Math.pow(2,1-c),f*t>=2&&(e++,t/=2),e+c>=l?(r=0,e=l):e+c>=1?(r=(f*t-1)*Math.pow(2,h),e=e+c):(r=f*Math.pow(2,c-1)*Math.pow(2,h),e=0));h>=8;s[o+p]=r&255,p+=w,r/=256,h-=8);for(e=e<<h|r,n+=h;n>0;s[o+p]=e&255,p+=w,e/=256,n-=8);s[o+p-w]|=g*128},Dt)}function Rs(){if(Ci)return ft;Ci=!0;let s=Os(),f=Ps(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ft.Buffer=e,ft.SlowBuffer=E,ft.INSPECT_MAX_BYTES=50;let u=2147483647;ft.kMaxLength=u,e.TYPED_ARRAY_SUPPORT=h(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let a=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(a,m),a.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function i(a){if(a>u)throw new RangeError('The value "'+a+'" is invalid for option "size"');let m=new Uint8Array(a);return Object.setPrototypeOf(m,e.prototype),m}function e(a,m,v){if(typeof a=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(a)}return r(a,m,v)}e.poolSize=8192;function r(a,m,v){if(typeof a=="string")return c(a,m);if(ArrayBuffer.isView(a))return p(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(j(a,ArrayBuffer)||a&&j(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(j(a,SharedArrayBuffer)||a&&j(a.buffer,SharedArrayBuffer)))return w(a,m,v);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=a.valueOf&&a.valueOf();if(B!=null&&B!==a)return e.from(B,m,v);let N=g(a);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return e.from(a[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}e.from=function(a,m,v){return r(a,m,v)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function t(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function n(a,m,v){return t(a),a<=0?i(a):m!==void 0?typeof v=="string"?i(a).fill(m,v):i(a).fill(m):i(a)}e.alloc=function(a,m,v){return n(a,m,v)};function l(a){return t(a),i(a<0?0:y(a)|0)}e.allocUnsafe=function(a){return l(a)},e.allocUnsafeSlow=function(a){return l(a)};function c(a,m){if((typeof m!="string"||m==="")&&(m="utf8"),!e.isEncoding(m))throw new TypeError("Unknown encoding: "+m);let v=b(a,m)|0,B=i(v),N=B.write(a,m);return N!==v&&(B=B.slice(0,N)),B}function d(a){let m=a.length<0?0:y(a.length)|0,v=i(m);for(let B=0;B<m;B+=1)v[B]=a[B]&255;return v}function p(a){if(j(a,Uint8Array)){let m=new Uint8Array(a);return w(m.buffer,m.byteOffset,m.byteLength)}return d(a)}function w(a,m,v){if(m<0||a.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let B;return m===void 0&&v===void 0?B=new Uint8Array(a):v===void 0?B=new Uint8Array(a,m):B=new Uint8Array(a,m,v),Object.setPrototypeOf(B,e.prototype),B}function g(a){if(e.isBuffer(a)){let m=y(a.length)|0,v=i(m);return v.length===0||a.copy(v,0,0,m),v}if(a.length!==void 0)return typeof a.length!="number"||te(a.length)?i(0):d(a);if(a.type==="Buffer"&&Array.isArray(a.data))return d(a.data)}function y(a){if(a>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return a|0}function E(a){return+a!=a&&(a=0),e.alloc(+a)}e.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==e.prototype},e.compare=function(a,m){if(j(a,Uint8Array)&&(a=e.from(a,a.offset,a.byteLength)),j(m,Uint8Array)&&(m=e.from(m,m.offset,m.byteLength)),!e.isBuffer(a)||!e.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===m)return 0;let v=a.length,B=m.length;for(let N=0,Y=Math.min(v,B);N<Y;++N)if(a[N]!==m[N]){v=a[N],B=m[N];break}return v<B?-1:B<v?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,m){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return e.alloc(0);let v;if(m===void 0)for(m=0,v=0;v<a.length;++v)m+=a[v].length;let B=e.allocUnsafe(m),N=0;for(v=0;v<a.length;++v){let Y=a[v];if(j(Y,Uint8Array))N+Y.length>B.length?(e.isBuffer(Y)||(Y=e.from(Y)),Y.copy(B,N)):Uint8Array.prototype.set.call(B,Y,N);else if(e.isBuffer(Y))Y.copy(B,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=Y.length}return B};function b(a,m){if(e.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||j(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let v=a.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&v===0)return 0;let N=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return M(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return X(a).length;default:if(N)return B?-1:M(a).length;m=(""+m).toLowerCase(),N=!0}}e.byteLength=b;function _(a,m,v){let B=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(a||(a="utf8");;)switch(a){case"hex":return fe(this,m,v);case"utf8":case"utf-8":return V(this,m,v);case"ascii":return pe(this,m,v);case"latin1":case"binary":return ce(this,m,v);case"base64":return U(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,m,v);default:if(B)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),B=!0}}e.prototype._isBuffer=!0;function k(a,m,v){let B=a[m];a[m]=a[v],a[v]=B}e.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<a;m+=2)k(this,m,m+1);return this},e.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<a;m+=4)k(this,m,m+3),k(this,m+1,m+2);return this},e.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<a;m+=8)k(this,m,m+7),k(this,m+1,m+6),k(this,m+2,m+5),k(this,m+3,m+4);return this},e.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?V(this,0,a):_.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:e.compare(this,a)===0},e.prototype.inspect=function(){let a="",m=ft.INSPECT_MAX_BYTES;return a=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(a+=" ... "),"<Buffer "+a+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(a,m,v,B,N){if(j(a,Uint8Array)&&(a=e.from(a,a.offset,a.byteLength)),!e.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(m===void 0&&(m=0),v===void 0&&(v=a?a.length:0),B===void 0&&(B=0),N===void 0&&(N=this.length),m<0||v>a.length||B<0||N>this.length)throw new RangeError("out of range index");if(B>=N&&m>=v)return 0;if(B>=N)return-1;if(m>=v)return 1;if(m>>>=0,v>>>=0,B>>>=0,N>>>=0,this===a)return 0;let Y=N-B,ge=v-m,Ae=Math.min(Y,ge),Te=this.slice(B,N),Ce=a.slice(m,v);for(let ke=0;ke<Ae;++ke)if(Te[ke]!==Ce[ke]){Y=Te[ke],ge=Ce[ke];break}return Y<ge?-1:ge<Y?1:0};function T(a,m,v,B,N){if(a.length===0)return-1;if(typeof v=="string"?(B=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,te(v)&&(v=N?0:a.length-1),v<0&&(v=a.length+v),v>=a.length){if(N)return-1;v=a.length-1}else if(v<0)if(N)v=0;else return-1;if(typeof m=="string"&&(m=e.from(m,B)),e.isBuffer(m))return m.length===0?-1:S(a,m,v,B,N);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(a,m,v):Uint8Array.prototype.lastIndexOf.call(a,m,v):S(a,[m],v,B,N);throw new TypeError("val must be string, number or Buffer")}function S(a,m,v,B,N){let Y=1,ge=a.length,Ae=m.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(a.length<2||m.length<2)return-1;Y=2,ge/=2,Ae/=2,v/=2}function Te(ke,je){return Y===1?ke[je]:ke.readUInt16BE(je*Y)}let Ce;if(N){let ke=-1;for(Ce=v;Ce<ge;Ce++)if(Te(a,Ce)===Te(m,ke===-1?0:Ce-ke)){if(ke===-1&&(ke=Ce),Ce-ke+1===Ae)return ke*Y}else ke!==-1&&(Ce-=Ce-ke),ke=-1}else for(v+Ae>ge&&(v=ge-Ae),Ce=v;Ce>=0;Ce--){let ke=!0;for(let je=0;je<Ae;je++)if(Te(a,Ce+je)!==Te(m,je)){ke=!1;break}if(ke)return Ce}return-1}e.prototype.includes=function(a,m,v){return this.indexOf(a,m,v)!==-1},e.prototype.indexOf=function(a,m,v){return T(this,a,m,v,!0)},e.prototype.lastIndexOf=function(a,m,v){return T(this,a,m,v,!1)};function I(a,m,v,B){v=Number(v)||0;let N=a.length-v;B?(B=Number(B),B>N&&(B=N)):B=N;let Y=m.length;B>Y/2&&(B=Y/2);let ge;for(ge=0;ge<B;++ge){let Ae=parseInt(m.substr(ge*2,2),16);if(te(Ae))return ge;a[v+ge]=Ae}return ge}function C(a,m,v,B){return ie(M(m,a.length-v),a,v,B)}function W(a,m,v,B){return ie(z(m),a,v,B)}function K(a,m,v,B){return ie(X(m),a,v,B)}function le(a,m,v,B){return ie(Z(m,a.length-v),a,v,B)}e.prototype.write=function(a,m,v,B){if(m===void 0)B="utf8",v=this.length,m=0;else if(v===void 0&&typeof m=="string")B=m,v=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(v)?(v=v>>>0,B===void 0&&(B="utf8")):(B=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let N=this.length-m;if((v===void 0||v>N)&&(v=N),a.length>0&&(v<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let Y=!1;for(;;)switch(B){case"hex":return I(this,a,m,v);case"utf8":case"utf-8":return C(this,a,m,v);case"ascii":case"latin1":case"binary":return W(this,a,m,v);case"base64":return K(this,a,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,a,m,v);default:if(Y)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),Y=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(a,m,v){return m===0&&v===a.length?s.fromByteArray(a):s.fromByteArray(a.slice(m,v))}function V(a,m,v){v=Math.min(a.length,v);let B=[],N=m;for(;N<v;){let Y=a[N],ge=null,Ae=Y>239?4:Y>223?3:Y>191?2:1;if(N+Ae<=v){let Te,Ce,ke,je;switch(Ae){case 1:Y<128&&(ge=Y);break;case 2:Te=a[N+1],(Te&192)===128&&(je=(Y&31)<<6|Te&63,je>127&&(ge=je));break;case 3:Te=a[N+1],Ce=a[N+2],(Te&192)===128&&(Ce&192)===128&&(je=(Y&15)<<12|(Te&63)<<6|Ce&63,je>2047&&(je<55296||je>57343)&&(ge=je));break;case 4:Te=a[N+1],Ce=a[N+2],ke=a[N+3],(Te&192)===128&&(Ce&192)===128&&(ke&192)===128&&(je=(Y&15)<<18|(Te&63)<<12|(Ce&63)<<6|ke&63,je>65535&&je<1114112&&(ge=je))}}ge===null?(ge=65533,Ae=1):ge>65535&&(ge-=65536,B.push(ge>>>10&1023|55296),ge=56320|ge&1023),B.push(ge),N+=Ae}return L(B)}let Q=4096;function L(a){let m=a.length;if(m<=Q)return String.fromCharCode.apply(String,a);let v="",B=0;for(;B<m;)v+=String.fromCharCode.apply(String,a.slice(B,B+=Q));return v}function pe(a,m,v){let B="";v=Math.min(a.length,v);for(let N=m;N<v;++N)B+=String.fromCharCode(a[N]&127);return B}function ce(a,m,v){let B="";v=Math.min(a.length,v);for(let N=m;N<v;++N)B+=String.fromCharCode(a[N]);return B}function fe(a,m,v){let B=a.length;(!m||m<0)&&(m=0),(!v||v<0||v>B)&&(v=B);let N="";for(let Y=m;Y<v;++Y)N+=ye[a[Y]];return N}function me(a,m,v){let B=a.slice(m,v),N="";for(let Y=0;Y<B.length-1;Y+=2)N+=String.fromCharCode(B[Y]+B[Y+1]*256);return N}e.prototype.slice=function(a,m){let v=this.length;a=~~a,m=m===void 0?v:~~m,a<0?(a+=v,a<0&&(a=0)):a>v&&(a=v),m<0?(m+=v,m<0&&(m=0)):m>v&&(m=v),m<a&&(m=a);let B=this.subarray(a,m);return Object.setPrototypeOf(B,e.prototype),B};function q(a,m,v){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+m>v)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(a,m,v){a=a>>>0,m=m>>>0,v||q(a,m,this.length);let B=this[a],N=1,Y=0;for(;++Y<m&&(N*=256);)B+=this[a+Y]*N;return B},e.prototype.readUintBE=e.prototype.readUIntBE=function(a,m,v){a=a>>>0,m=m>>>0,v||q(a,m,this.length);let B=this[a+--m],N=1;for(;m>0&&(N*=256);)B+=this[a+--m]*N;return B},e.prototype.readUint8=e.prototype.readUInt8=function(a,m){return a=a>>>0,m||q(a,1,this.length),this[a]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(a,m){return a=a>>>0,m||q(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(a,m){return a=a>>>0,m||q(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(a,m){return a=a>>>0,m||q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(a,m){return a=a>>>0,m||q(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readBigUInt64LE=re(function(a){a=a>>>0,D(a,"offset");let m=this[a],v=this[a+7];(m===void 0||v===void 0)&&ne(a,this.length-8);let B=m+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,N=this[++a]+this[++a]*2**8+this[++a]*2**16+v*2**24;return BigInt(B)+(BigInt(N)<<BigInt(32))}),e.prototype.readBigUInt64BE=re(function(a){a=a>>>0,D(a,"offset");let m=this[a],v=this[a+7];(m===void 0||v===void 0)&&ne(a,this.length-8);let B=m*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],N=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+v;return(BigInt(B)<<BigInt(32))+BigInt(N)}),e.prototype.readIntLE=function(a,m,v){a=a>>>0,m=m>>>0,v||q(a,m,this.length);let B=this[a],N=1,Y=0;for(;++Y<m&&(N*=256);)B+=this[a+Y]*N;return N*=128,B>=N&&(B-=Math.pow(2,8*m)),B},e.prototype.readIntBE=function(a,m,v){a=a>>>0,m=m>>>0,v||q(a,m,this.length);let B=m,N=1,Y=this[a+--B];for(;B>0&&(N*=256);)Y+=this[a+--B]*N;return N*=128,Y>=N&&(Y-=Math.pow(2,8*m)),Y},e.prototype.readInt8=function(a,m){return a=a>>>0,m||q(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},e.prototype.readInt16LE=function(a,m){a=a>>>0,m||q(a,2,this.length);let v=this[a]|this[a+1]<<8;return v&32768?v|4294901760:v},e.prototype.readInt16BE=function(a,m){a=a>>>0,m||q(a,2,this.length);let v=this[a+1]|this[a]<<8;return v&32768?v|4294901760:v},e.prototype.readInt32LE=function(a,m){return a=a>>>0,m||q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,m){return a=a>>>0,m||q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readBigInt64LE=re(function(a){a=a>>>0,D(a,"offset");let m=this[a],v=this[a+7];(m===void 0||v===void 0)&&ne(a,this.length-8);let B=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(v<<24);return(BigInt(B)<<BigInt(32))+BigInt(m+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),e.prototype.readBigInt64BE=re(function(a){a=a>>>0,D(a,"offset");let m=this[a],v=this[a+7];(m===void 0||v===void 0)&&ne(a,this.length-8);let B=(m<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(B)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+v)}),e.prototype.readFloatLE=function(a,m){return a=a>>>0,m||q(a,4,this.length),f.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,m){return a=a>>>0,m||q(a,4,this.length),f.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,m){return a=a>>>0,m||q(a,8,this.length),f.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,m){return a=a>>>0,m||q(a,8,this.length),f.read(this,a,!1,52,8)};function he(a,m,v,B,N,Y){if(!e.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>N||m<Y)throw new RangeError('"value" argument is out of bounds');if(v+B>a.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(a,m,v,B){if(a=+a,m=m>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;he(this,a,m,v,ge,0)}let N=1,Y=0;for(this[m]=a&255;++Y<v&&(N*=256);)this[m+Y]=a/N&255;return m+v},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(a,m,v,B){if(a=+a,m=m>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;he(this,a,m,v,ge,0)}let N=v-1,Y=1;for(this[m+N]=a&255;--N>=0&&(Y*=256);)this[m+N]=a/Y&255;return m+v},e.prototype.writeUint8=e.prototype.writeUInt8=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,1,255,0),this[m]=a&255,m+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,2,65535,0),this[m]=a&255,this[m+1]=a>>>8,m+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,2,65535,0),this[m]=a>>>8,this[m+1]=a&255,m+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,4,4294967295,0),this[m+3]=a>>>24,this[m+2]=a>>>16,this[m+1]=a>>>8,this[m]=a&255,m+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,4,4294967295,0),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=a&255,m+4};function P(a,m,v,B,N){F(m,B,N,a,v,7);let Y=Number(m&BigInt(4294967295));a[v++]=Y,Y=Y>>8,a[v++]=Y,Y=Y>>8,a[v++]=Y,Y=Y>>8,a[v++]=Y;let ge=Number(m>>BigInt(32)&BigInt(4294967295));return a[v++]=ge,ge=ge>>8,a[v++]=ge,ge=ge>>8,a[v++]=ge,ge=ge>>8,a[v++]=ge,v}function ue(a,m,v,B,N){F(m,B,N,a,v,7);let Y=Number(m&BigInt(4294967295));a[v+7]=Y,Y=Y>>8,a[v+6]=Y,Y=Y>>8,a[v+5]=Y,Y=Y>>8,a[v+4]=Y;let ge=Number(m>>BigInt(32)&BigInt(4294967295));return a[v+3]=ge,ge=ge>>8,a[v+2]=ge,ge=ge>>8,a[v+1]=ge,ge=ge>>8,a[v]=ge,v+8}e.prototype.writeBigUInt64LE=re(function(a,m=0){return P(this,a,m,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=re(function(a,m=0){return ue(this,a,m,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(a,m,v,B){if(a=+a,m=m>>>0,!B){let Ae=Math.pow(2,8*v-1);he(this,a,m,v,Ae-1,-Ae)}let N=0,Y=1,ge=0;for(this[m]=a&255;++N<v&&(Y*=256);)a<0&&ge===0&&this[m+N-1]!==0&&(ge=1),this[m+N]=(a/Y>>0)-ge&255;return m+v},e.prototype.writeIntBE=function(a,m,v,B){if(a=+a,m=m>>>0,!B){let Ae=Math.pow(2,8*v-1);he(this,a,m,v,Ae-1,-Ae)}let N=v-1,Y=1,ge=0;for(this[m+N]=a&255;--N>=0&&(Y*=256);)a<0&&ge===0&&this[m+N+1]!==0&&(ge=1),this[m+N]=(a/Y>>0)-ge&255;return m+v},e.prototype.writeInt8=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,1,127,-128),a<0&&(a=255+a+1),this[m]=a&255,m+1},e.prototype.writeInt16LE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,2,32767,-32768),this[m]=a&255,this[m+1]=a>>>8,m+2},e.prototype.writeInt16BE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,2,32767,-32768),this[m]=a>>>8,this[m+1]=a&255,m+2},e.prototype.writeInt32LE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,4,2147483647,-2147483648),this[m]=a&255,this[m+1]=a>>>8,this[m+2]=a>>>16,this[m+3]=a>>>24,m+4},e.prototype.writeInt32BE=function(a,m,v){return a=+a,m=m>>>0,v||he(this,a,m,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=a&255,m+4},e.prototype.writeBigInt64LE=re(function(a,m=0){return P(this,a,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=re(function(a,m=0){return ue(this,a,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(a,m,v,B,N,Y){if(v+B>a.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function G(a,m,v,B,N){return m=+m,v=v>>>0,N||we(a,m,v,4),f.write(a,m,v,B,23,4),v+4}e.prototype.writeFloatLE=function(a,m,v){return G(this,a,m,!0,v)},e.prototype.writeFloatBE=function(a,m,v){return G(this,a,m,!1,v)};function ve(a,m,v,B,N){return m=+m,v=v>>>0,N||we(a,m,v,8),f.write(a,m,v,B,52,8),v+8}e.prototype.writeDoubleLE=function(a,m,v){return ve(this,a,m,!0,v)},e.prototype.writeDoubleBE=function(a,m,v){return ve(this,a,m,!1,v)},e.prototype.copy=function(a,m,v,B){if(!e.isBuffer(a))throw new TypeError("argument should be a Buffer");if(v||(v=0),!B&&B!==0&&(B=this.length),m>=a.length&&(m=a.length),m||(m=0),B>0&&B<v&&(B=v),B===v||a.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),a.length-m<B-v&&(B=a.length-m+v);let N=B-v;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,v,B):Uint8Array.prototype.set.call(a,this.subarray(v,B),m),N},e.prototype.fill=function(a,m,v,B){if(typeof a=="string"){if(typeof m=="string"?(B=m,m=0,v=this.length):typeof v=="string"&&(B=v,v=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!e.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(a.length===1){let Y=a.charCodeAt(0);(B==="utf8"&&Y<128||B==="latin1")&&(a=Y)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(m<0||this.length<m||this.length<v)throw new RangeError("Out of range index");if(v<=m)return this;m=m>>>0,v=v===void 0?this.length:v>>>0,a||(a=0);let N;if(typeof a=="number")for(N=m;N<v;++N)this[N]=a;else{let Y=e.isBuffer(a)?a:e.from(a,B),ge=Y.length;if(ge===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(N=0;N<v-m;++N)this[N+m]=Y[N%ge]}return this};let $={};function x(a,m,v){$[a]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}x("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),x("ERR_INVALID_ARG_TYPE",function(a,m){return`The "${a}" argument must be of type number. Received type ${typeof m}`},TypeError),x("ERR_OUT_OF_RANGE",function(a,m,v){let B=`The value of "${a}" is out of range.`,N=v;return Number.isInteger(v)&&Math.abs(v)>2**32?N=J(String(v)):typeof v=="bigint"&&(N=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(N=J(N)),N+="n"),B+=` It must be ${m}. Received ${N}`,B},RangeError);function J(a){let m="",v=a.length,B=a[0]==="-"?1:0;for(;v>=B+4;v-=3)m=`_${a.slice(v-3,v)}${m}`;return`${a.slice(0,v)}${m}`}function H(a,m,v){D(m,"offset"),(a[m]===void 0||a[m+v]===void 0)&&ne(m,a.length-(v+1))}function F(a,m,v,B,N,Y){if(a>v||a<m){let ge=typeof m=="bigint"?"n":"",Ae;throw Y>3?m===0||m===BigInt(0)?Ae=`>= 0${ge} and < 2${ge} ** ${(Y+1)*8}${ge}`:Ae=`>= -(2${ge} ** ${(Y+1)*8-1}${ge}) and < 2 ** ${(Y+1)*8-1}${ge}`:Ae=`>= ${m}${ge} and <= ${v}${ge}`,new $.ERR_OUT_OF_RANGE("value",Ae,a)}H(B,N,Y)}function D(a,m){if(typeof a!="number")throw new $.ERR_INVALID_ARG_TYPE(m,"number",a)}function ne(a,m,v){throw Math.floor(a)!==a?(D(a,v),new $.ERR_OUT_OF_RANGE(v||"offset","an integer",a)):m<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${m}`,a)}let ee=/[^+/0-9A-Za-z-_]/g;function R(a){if(a=a.split("=")[0],a=a.trim().replace(ee,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function M(a,m){m=m||1/0;let v,B=a.length,N=null,Y=[];for(let ge=0;ge<B;++ge){if(v=a.charCodeAt(ge),v>55295&&v<57344){if(!N){if(v>56319){(m-=3)>-1&&Y.push(239,191,189);continue}else if(ge+1===B){(m-=3)>-1&&Y.push(239,191,189);continue}N=v;continue}if(v<56320){(m-=3)>-1&&Y.push(239,191,189),N=v;continue}v=(N-55296<<10|v-56320)+65536}else N&&(m-=3)>-1&&Y.push(239,191,189);if(N=null,v<128){if((m-=1)<0)break;Y.push(v)}else if(v<2048){if((m-=2)<0)break;Y.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;Y.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;Y.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return Y}function z(a){let m=[];for(let v=0;v<a.length;++v)m.push(a.charCodeAt(v)&255);return m}function Z(a,m){let v,B,N,Y=[];for(let ge=0;ge<a.length&&!((m-=2)<0);++ge)v=a.charCodeAt(ge),B=v>>8,N=v%256,Y.push(N),Y.push(B);return Y}function X(a){return s.toByteArray(R(a))}function ie(a,m,v,B){let N;for(N=0;N<B&&!(N+v>=m.length||N>=a.length);++N)m[N+v]=a[N];return N}function j(a,m){return a instanceof m||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===m.name}function te(a){return a!==a}let ye=function(){let a="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){let B=v*16;for(let N=0;N<16;++N)m[B+N]=a[v]+a[N]}return m}();function re(a){return typeof BigInt>"u"?Ee:a}function Ee(){throw new Error("BigInt not supported")}return ft}var xt,Pi,Dt,Ri,ft,Ci,it,rr,zn,Qn,De=qe(()=>{oe(),ae(),se(),xt={},Pi=!1,Dt={},Ri=!1,ft={},Ci=!1,it=Rs(),it.Buffer,it.SlowBuffer,it.INSPECT_MAX_BYTES,it.kMaxLength,rr=it.Buffer,zn=it.INSPECT_MAX_BYTES,Qn=it.kMaxLength}),ae=qe(()=>{De()}),Cs=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=class{constructor(o){this.aliasToTopic={},this.max=o}put(o,u){return u===0||u>this.max?!1:(this.aliasToTopic[u]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};s.default=f}),Ue=de((s,f)=>{"use strict";oe(),ae(),se();var o=class extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let h="";for(let i=0;i<u.length;i++)h+=`    ${u[i].stack}
`;super(h),this.name="AggregateError",this.errors=u}};f.exports={AggregateError:o,ArrayIsArray(u){return Array.isArray(u)},ArrayPrototypeIncludes(u,h){return u.includes(h)},ArrayPrototypeIndexOf(u,h){return u.indexOf(h)},ArrayPrototypeJoin(u,h){return u.join(h)},ArrayPrototypeMap(u,h){return u.map(h)},ArrayPrototypePop(u,h){return u.pop(h)},ArrayPrototypePush(u,h){return u.push(h)},ArrayPrototypeSlice(u,h,i){return u.slice(h,i)},Error,FunctionPrototypeCall(u,h,...i){return u.call(h,...i)},FunctionPrototypeSymbolHasInstance(u,h){return Function.prototype[Symbol.hasInstance].call(u,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(u,h){return Object.defineProperties(u,h)},ObjectDefineProperty(u,h,i){return Object.defineProperty(u,h,i)},ObjectGetOwnPropertyDescriptor(u,h){return Object.getOwnPropertyDescriptor(u,h)},ObjectKeys(u){return Object.keys(u)},ObjectSetPrototypeOf(u,h){return Object.setPrototypeOf(u,h)},Promise,PromisePrototypeCatch(u,h){return u.catch(h)},PromisePrototypeThen(u,h,i){return u.then(h,i)},PromiseReject(u){return Promise.reject(u)},PromiseResolve(u){return Promise.resolve(u)},ReflectApply:Reflect.apply,RegExpPrototypeTest(u,h){return u.test(h)},SafeSet:Set,String,StringPrototypeSlice(u,h,i){return u.slice(h,i)},StringPrototypeToLowerCase(u){return u.toLowerCase()},StringPrototypeToUpperCase(u){return u.toUpperCase()},StringPrototypeTrim(u){return u.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(u,h,i){return u.set(h,i)},Boolean,Uint8Array}}),Kn=de((s,f)=>{"use strict";oe(),ae(),se(),f.exports={format(o,...u){return o.replace(/%([sdifj])/g,function(...[h,i]){let e=u.shift();return i==="f"?e.toFixed(6):i==="j"?JSON.stringify(e):i==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),He=de((s,f)=>{"use strict";oe(),ae(),se();var{format:o,inspect:u}=Kn(),{AggregateError:h}=Ue(),i=globalThis.AggregateError||h,e=Symbol("kIsNodeError"),r=["string","function","number","object","Function","Object","boolean","bigint","symbol"],t=/^([A-Z][a-z0-9]*)+$/,n="__node_internal_",l={};function c(b,_){if(!b)throw new l.ERR_INTERNAL_ASSERTION(_)}function d(b){let _="",k=b.length,T=b[0]==="-"?1:0;for(;k>=T+4;k-=3)_=`_${b.slice(k-3,k)}${_}`;return`${b.slice(0,k)}${_}`}function p(b,_,k){if(typeof _=="function")return c(_.length<=k.length,`Code: ${b}; The provided arguments length (${k.length}) does not match the required ones (${_.length}).`),_(...k);let T=(_.match(/%[dfijoOs]/g)||[]).length;return c(T===k.length,`Code: ${b}; The provided arguments length (${k.length}) does not match the required ones (${T}).`),k.length===0?_:o(_,...k)}function w(b,_,k){k||(k=Error);class T extends k{constructor(...I){super(p(b,_,I))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:k.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=b,T.prototype[e]=!0,l[b]=T}function g(b){let _=n+b.name;return Object.defineProperty(b,"name",{value:_}),b}function y(b,_){if(b&&_&&b!==_){if(Array.isArray(_.errors))return _.errors.push(b),_;let k=new i([_,b],_.message);return k.code=_.code,k}return b||_}var E=class extends Error{constructor(b="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(b,_),this.code="ABORT_ERR",this.name="AbortError"}};w("ERR_ASSERTION","%s",Error),w("ERR_INVALID_ARG_TYPE",(b,_,k)=>{c(typeof b=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let T="The ";b.endsWith(" argument")?T+=`${b} `:T+=`"${b}" ${b.includes(".")?"property":"argument"} `,T+="must be ";let S=[],I=[],C=[];for(let K of _)c(typeof K=="string","All expected entries have to be of type string"),r.includes(K)?S.push(K.toLowerCase()):t.test(K)?I.push(K):(c(K!=="object",'The value "object" should be written as "Object"'),C.push(K));if(I.length>0){let K=S.indexOf("object");K!==-1&&(S.splice(S,K,1),I.push("Object"))}if(S.length>0){switch(S.length){case 1:T+=`of type ${S[0]}`;break;case 2:T+=`one of type ${S[0]} or ${S[1]}`;break;default:{let K=S.pop();T+=`one of type ${S.join(", ")}, or ${K}`}}(I.length>0||C.length>0)&&(T+=" or ")}if(I.length>0){switch(I.length){case 1:T+=`an instance of ${I[0]}`;break;case 2:T+=`an instance of ${I[0]} or ${I[1]}`;break;default:{let K=I.pop();T+=`an instance of ${I.join(", ")}, or ${K}`}}C.length>0&&(T+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(T+="an "),T+=`${C[0]}`;break;case 2:T+=`one of ${C[0]} or ${C[1]}`;break;default:{let K=C.pop();T+=`one of ${C.join(", ")}, or ${K}`}}if(k==null)T+=`. Received ${k}`;else if(typeof k=="function"&&k.name)T+=`. Received function ${k.name}`;else if(typeof k=="object"){var W;if((W=k.constructor)!==null&&W!==void 0&&W.name)T+=`. Received an instance of ${k.constructor.name}`;else{let K=u(k,{depth:-1});T+=`. Received ${K}`}}else{let K=u(k,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),T+=`. Received type ${typeof k} (${K})`}return T},TypeError),w("ERR_INVALID_ARG_VALUE",(b,_,k="is invalid")=>{let T=u(_);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${k}. Received ${T}`},TypeError),w("ERR_INVALID_RETURN_VALUE",(b,_,k)=>{var T;let S=k!=null&&(T=k.constructor)!==null&&T!==void 0&&T.name?`instance of ${k.constructor.name}`:`type ${typeof k}`;return`Expected ${b} to be returned from the "${_}" function but got ${S}.`},TypeError),w("ERR_MISSING_ARGS",(...b)=>{c(b.length>0,"At least one arg needs to be specified");let _,k=b.length;switch(b=(Array.isArray(b)?b:[b]).map(T=>`"${T}"`).join(" or "),k){case 1:_+=`The ${b[0]} argument`;break;case 2:_+=`The ${b[0]} and ${b[1]} arguments`;break;default:{let T=b.pop();_+=`The ${b.join(", ")}, and ${T} arguments`}break}return`${_} must be specified`},TypeError),w("ERR_OUT_OF_RANGE",(b,_,k)=>{c(_,'Missing "range" argument');let T;if(Number.isInteger(k)&&Math.abs(k)>2**32)T=d(String(k));else if(typeof k=="bigint"){T=String(k);let S=BigInt(2)**BigInt(32);(k>S||k<-S)&&(T=d(T)),T+="n"}else T=u(k);return`The value of "${b}" is out of range. It must be ${_}. Received ${T}`},RangeError),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),w("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),w("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),w("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),w("ERR_STREAM_WRITE_AFTER_END","write after end",Error),w("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),f.exports={AbortError:E,aggregateTwoErrors:g(y),hideStackFrames:g,codes:l}}),qt=de((s,f)=>{"use strict";oe(),ae(),se();var{AbortController:o,AbortSignal:u}=typeof self<"u"?self:typeof window<"u"?window:void 0;f.exports=o,f.exports.AbortSignal=u,f.exports.default=o});function Pe(){Pe.init.call(this)}function Xt(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}function Yn(s){return s._maxListeners===void 0?Pe.defaultMaxListeners:s._maxListeners}function sn(s,f,o,u){var h,i,e,r;if(Xt(o),(i=s._events)===void 0?(i=s._events=Object.create(null),s._eventsCount=0):(i.newListener!==void 0&&(s.emit("newListener",f,o.listener?o.listener:o),i=s._events),e=i[f]),e===void 0)e=i[f]=o,++s._eventsCount;else if(typeof e=="function"?e=i[f]=u?[o,e]:[e,o]:u?e.unshift(o):e.push(o),(h=Yn(s))>0&&e.length>h&&!e.warned){e.warned=!0;var t=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");t.name="MaxListenersExceededWarning",t.emitter=s,t.type=f,t.count=e.length,r=t,console&&console.warn&&console.warn(r)}return s}function xs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function an(s,f,o){var u={fired:!1,wrapFn:void 0,target:s,type:f,listener:o},h=xs.bind(u);return h.listener=o,u.wrapFn=h,h}function ln(s,f,o){var u=s._events;if(u===void 0)return[];var h=u[f];return h===void 0?[]:typeof h=="function"?o?[h.listener||h]:[h]:o?function(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}(h):Gn(h,h.length)}function un(s){var f=this._events;if(f!==void 0){var o=f[s];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function Gn(s,f){for(var o=new Array(f),u=0;u<f;++u)o[u]=s[u];return o}var hn,cn,yt,br,mr,yr,ze,fn=qe(()=>{oe(),ae(),se(),yt=typeof Reflect=="object"?Reflect:null,br=yt&&typeof yt.apply=="function"?yt.apply:function(s,f,o){return Function.prototype.apply.call(s,f,o)},cn=yt&&typeof yt.ownKeys=="function"?yt.ownKeys:Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:function(s){return Object.getOwnPropertyNames(s)},mr=Number.isNaN||function(s){return s!=s},hn=Pe,Pe.EventEmitter=Pe,Pe.prototype._events=void 0,Pe.prototype._eventsCount=0,Pe.prototype._maxListeners=void 0,yr=10,Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return yr},set:function(s){if(typeof s!="number"||s<0||mr(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");yr=s}}),Pe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Pe.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||mr(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this},Pe.prototype.getMaxListeners=function(){return Yn(this)},Pe.prototype.emit=function(s){for(var f=[],o=1;o<arguments.length;o++)f.push(arguments[o]);var u=s==="error",h=this._events;if(h!==void 0)u=u&&h.error===void 0;else if(!u)return!1;if(u){var i;if(f.length>0&&(i=f[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var r=h[s];if(r===void 0)return!1;if(typeof r=="function")br(r,this,f);else{var t=r.length,n=Gn(r,t);for(o=0;o<t;++o)br(n[o],this,f)}return!0},Pe.prototype.addListener=function(s,f){return sn(this,s,f,!1)},Pe.prototype.on=Pe.prototype.addListener,Pe.prototype.prependListener=function(s,f){return sn(this,s,f,!0)},Pe.prototype.once=function(s,f){return Xt(f),this.on(s,an(this,s,f)),this},Pe.prototype.prependOnceListener=function(s,f){return Xt(f),this.prependListener(s,an(this,s,f)),this},Pe.prototype.removeListener=function(s,f){var o,u,h,i,e;if(Xt(f),(u=this._events)===void 0)return this;if((o=u[s])===void 0)return this;if(o===f||o.listener===f)--this._eventsCount==0?this._events=Object.create(null):(delete u[s],u.removeListener&&this.emit("removeListener",s,o.listener||f));else if(typeof o!="function"){for(h=-1,i=o.length-1;i>=0;i--)if(o[i]===f||o[i].listener===f){e=o[i].listener,h=i;break}if(h<0)return this;h===0?o.shift():function(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}(o,h),o.length===1&&(u[s]=o[0]),u.removeListener!==void 0&&this.emit("removeListener",s,e||f)}return this},Pe.prototype.off=Pe.prototype.removeListener,Pe.prototype.removeAllListeners=function(s){var f,o,u;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[s]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[s]),this;if(arguments.length===0){var h,i=Object.keys(o);for(u=0;u<i.length;++u)(h=i[u])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(f=o[s])=="function")this.removeListener(s,f);else if(f!==void 0)for(u=f.length-1;u>=0;u--)this.removeListener(s,f[u]);return this},Pe.prototype.listeners=function(s){return ln(this,s,!0)},Pe.prototype.rawListeners=function(s){return ln(this,s,!1)},Pe.listenerCount=function(s,f){return typeof s.listenerCount=="function"?s.listenerCount(f):un.call(s,f)},Pe.prototype.listenerCount=un,Pe.prototype.eventNames=function(){return this._eventsCount>0?cn(this._events):[]},ze=hn,ze.EventEmitter,ze.defaultMaxListeners,ze.init,ze.listenerCount,ze.EventEmitter,ze.defaultMaxListeners,ze.init,ze.listenerCount}),pt={};Bt(pt,{EventEmitter:()=>Jn,default:()=>ze,defaultMaxListeners:()=>Xn,init:()=>Zn,listenerCount:()=>eo,on:()=>to,once:()=>ro});var Jn,Xn,Zn,eo,to,ro,Tt=qe(()=>{oe(),ae(),se(),fn(),fn(),ze.once=function(s,f){return new Promise((o,u)=>{function h(...e){i!==void 0&&s.removeListener("error",i),o(e)}let i;f!=="error"&&(i=e=>{s.removeListener(name,h),u(e)},s.once("error",i)),s.once(f,h)})},ze.on=function(s,f){let o=[],u=[],h=null,i=!1,e={async next(){let n=o.shift();if(n)return createIterResult(n,!1);if(h){let l=Promise.reject(h);return h=null,l}return i?createIterResult(void 0,!0):new Promise((l,c)=>u.push({resolve:l,reject:c}))},async return(){s.removeListener(f,r),s.removeListener("error",t),i=!0;for(let n of u)n.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(n){h=n,s.removeListener(f,r),s.removeListener("error",t)},[Symbol.asyncIterator](){return this}};return s.on(f,r),s.on("error",t),e;function r(...n){let l=u.shift();l?l.resolve(createIterResult(n,!1)):o.push(n)}function t(n){i=!0;let l=u.shift();l?l.reject(n):h=n,e.return()}},{EventEmitter:Jn,defaultMaxListeners:Xn,init:Zn,listenerCount:eo,on:to,once:ro}=ze}),Ve=de((s,f)=>{"use strict";oe(),ae(),se();var o=(De(),Re(Ne)),{format:u,inspect:h}=Kn(),{codes:{ERR_INVALID_ARG_TYPE:i}}=He(),{kResistStopPropagation:e,AggregateError:r,SymbolDispose:t}=Ue(),n=globalThis.AbortSignal||qt().AbortSignal,l=globalThis.AbortController||qt().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||o.Blob,p=typeof d<"u"?function(y){return y instanceof d}:function(y){return!1},w=(y,E)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new i(E,"AbortSignal",y)},g=(y,E)=>{if(typeof y!="function")throw new i(E,"Function",y)};f.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(y){let E=!1;return function(...b){E||(E=!0,y.apply(this,b))}},createDeferredPromise:function(){let y,E;return{promise:new Promise((b,_)=>{y=b,E=_}),resolve:y,reject:E}},promisify(y){return new Promise((E,b)=>{y((_,...k)=>_?b(_):E(...k))})},debuglog(){return function(){}},format:u,inspect:h,types:{isAsyncFunction(y){return y instanceof c},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:p,deprecate(y,E){return y},addAbortListener:(Tt(),Re(pt)).addAbortListener||function(y,E){if(y===void 0)throw new i("signal","AbortSignal",y);w(y,"signal"),g(E,"listener");let b;return y.aborted?queueMicrotask(()=>E()):(y.addEventListener("abort",E,{__proto__:null,once:!0,[e]:!0}),b=()=>{y.removeEventListener("abort",E)}),{__proto__:null,[t](){var _;(_=b)===null||_===void 0||_()}}},AbortSignalAny:n.any||function(y){if(y.length===1)return y[0];let E=new l,b=()=>E.abort();return y.forEach(_=>{w(_,"signals"),_.addEventListener("abort",b,{once:!0})}),E.signal.addEventListener("abort",()=>{y.forEach(_=>_.removeEventListener("abort",b))},{once:!0}),E.signal}},f.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Ht=de((s,f)=>{"use strict";oe(),ae(),se();var{ArrayIsArray:o,ArrayPrototypeIncludes:u,ArrayPrototypeJoin:h,ArrayPrototypeMap:i,NumberIsInteger:e,NumberIsNaN:r,NumberMAX_SAFE_INTEGER:t,NumberMIN_SAFE_INTEGER:n,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:p,StringPrototypeToUpperCase:w,StringPrototypeTrim:g}=Ue(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:T}}=He(),{normalizeEncoding:S}=Ve(),{isAsyncFunction:I,isArrayBufferView:C}=Ve().types,W={};function K(j){return j===(j|0)}function le(j){return j===j>>>0}var U=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function Q(j,te,ye){if(typeof j>"u"&&(j=ye),typeof j=="string"){if(d(U,j)===null)throw new _(te,j,V);j=l(j,8)}return ce(j,te),j}var L=y((j,te,ye=n,re=t)=>{if(typeof j!="number")throw new b(te,"number",j);if(!e(j))throw new k(te,"an integer",j);if(j<ye||j>re)throw new k(te,`>= ${ye} && <= ${re}`,j)}),pe=y((j,te,ye=-2147483648,re=2147483647)=>{if(typeof j!="number")throw new b(te,"number",j);if(!e(j))throw new k(te,"an integer",j);if(j<ye||j>re)throw new k(te,`>= ${ye} && <= ${re}`,j)}),ce=y((j,te,ye=!1)=>{if(typeof j!="number")throw new b(te,"number",j);if(!e(j))throw new k(te,"an integer",j);let re=ye?1:0,Ee=4294967295;if(j<re||j>Ee)throw new k(te,`>= ${re} && <= ${Ee}`,j)});function fe(j,te){if(typeof j!="string")throw new b(te,"string",j)}function me(j,te,ye=void 0,re){if(typeof j!="number")throw new b(te,"number",j);if(ye!=null&&j<ye||re!=null&&j>re||(ye!=null||re!=null)&&r(j))throw new k(te,`${ye!=null?`>= ${ye}`:""}${ye!=null&&re!=null?" && ":""}${re!=null?`<= ${re}`:""}`,j)}var q=y((j,te,ye)=>{if(!u(ye,j)){let re="must be one of: "+h(i(ye,Ee=>typeof Ee=="string"?`'${Ee}'`:p(Ee)),", ");throw new _(te,j,re)}});function he(j,te){if(typeof j!="boolean")throw new b(te,"boolean",j)}function P(j,te,ye){return j==null||!c(j,te)?ye:j[te]}var ue=y((j,te,ye=null)=>{let re=P(ye,"allowArray",!1),Ee=P(ye,"allowFunction",!1);if(!P(ye,"nullable",!1)&&j===null||!re&&o(j)||typeof j!="object"&&(!Ee||typeof j!="function"))throw new b(te,"Object",j)}),we=y((j,te)=>{if(j!=null&&typeof j!="object"&&typeof j!="function")throw new b(te,"a dictionary",j)}),G=y((j,te,ye=0)=>{if(!o(j))throw new b(te,"Array",j);if(j.length<ye){let re=`must be longer than ${ye}`;throw new _(te,j,re)}});function ve(j,te){G(j,te);for(let ye=0;ye<j.length;ye++)fe(j[ye],`${te}[${ye}]`)}function $(j,te){G(j,te);for(let ye=0;ye<j.length;ye++)he(j[ye],`${te}[${ye}]`)}function x(j,te){G(j,te);for(let ye=0;ye<j.length;ye++){let re=j[ye],Ee=`${te}[${ye}]`;if(re==null)throw new b(Ee,"AbortSignal",re);ne(re,Ee)}}function J(j,te="signal"){if(fe(j,te),W[j]===void 0)throw W[w(j)]!==void 0?new T(j+" (signals must use all capital letters)"):new T(j)}var H=y((j,te="buffer")=>{if(!C(j))throw new b(te,["Buffer","TypedArray","DataView"],j)});function F(j,te){let ye=S(te),re=j.length;if(ye==="hex"&&re%2!==0)throw new _("encoding",te,`is invalid for data of length ${re}`)}function D(j,te="Port",ye=!0){if(typeof j!="number"&&typeof j!="string"||typeof j=="string"&&g(j).length===0||+j!==+j>>>0||j>65535||j===0&&!ye)throw new E(te,j,ye);return j|0}var ne=y((j,te)=>{if(j!==void 0&&(j===null||typeof j!="object"||!("aborted"in j)))throw new b(te,"AbortSignal",j)}),ee=y((j,te)=>{if(typeof j!="function")throw new b(te,"Function",j)}),R=y((j,te)=>{if(typeof j!="function"||I(j))throw new b(te,"Function",j)}),M=y((j,te)=>{if(j!==void 0)throw new b(te,"undefined",j)});function z(j,te,ye){if(!u(ye,j))throw new b(te,`('${h(ye,"|")}')`,j)}var Z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function X(j,te){if(typeof j>"u"||!d(Z,j))throw new _(te,j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(j){if(typeof j=="string")return X(j,"hints"),j;if(o(j)){let te=j.length,ye="";if(te===0)return ye;for(let re=0;re<te;re++){let Ee=j[re];X(Ee,"hints"),ye+=Ee,re!==te-1&&(ye+=", ")}return ye}throw new _("hints",j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}f.exports={isInt32:K,isUint32:le,parseFileMode:Q,validateArray:G,validateStringArray:ve,validateBooleanArray:$,validateAbortSignalArray:x,validateBoolean:he,validateBuffer:H,validateDictionary:we,validateEncoding:F,validateFunction:ee,validateInt32:pe,validateInteger:L,validateNumber:me,validateObject:ue,validateOneOf:q,validatePlainFunction:R,validatePort:D,validateSignalName:J,validateString:fe,validateUint32:ce,validateUndefined:M,validateUnion:z,validateAbortSignal:ne,validateLinkHeaderValue:ie}}),Ot=de((s,f)=>{oe(),ae(),se();var o=f.exports={},u,h;function i(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=i}catch{u=i}try{typeof clearTimeout=="function"?h=clearTimeout:h=e}catch{h=e}})();function r(E){if(u===setTimeout)return setTimeout(E,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(E,0);try{return u(E,0)}catch{try{return u.call(null,E,0)}catch{return u.call(this,E,0)}}}function t(E){if(h===clearTimeout)return clearTimeout(E);if((h===e||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(E);try{return h(E)}catch{try{return h.call(null,E)}catch{return h.call(this,E)}}}var n=[],l=!1,c,d=-1;function p(){!l||!c||(l=!1,c.length?n=c.concat(n):d=-1,n.length&&w())}function w(){if(!l){var E=r(p);l=!0;for(var b=n.length;b;){for(c=n,n=[];++d<b;)c&&c[d].run();d=-1,b=n.length}c=null,l=!1,t(E)}}o.nextTick=function(E){var b=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)b[_-1]=arguments[_];n.push(new g(E,b)),n.length===1&&!l&&r(w)};function g(E,b){this.fun=E,this.array=b}g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function y(){}o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(E){return[]},o.binding=function(E){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(E){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),ut=de((s,f)=>{"use strict";oe(),ae(),se();var{SymbolAsyncIterator:o,SymbolIterator:u,SymbolFor:h}=Ue(),i=h("nodejs.stream.destroyed"),e=h("nodejs.stream.errored"),r=h("nodejs.stream.readable"),t=h("nodejs.stream.writable"),n=h("nodejs.stream.disturbed"),l=h("nodejs.webstream.isClosedPromise"),c=h("nodejs.webstream.controllerErrorFunction");function d(P,ue=!1){var we;return!!(P&&typeof P.pipe=="function"&&typeof P.on=="function"&&(!ue||typeof P.pause=="function"&&typeof P.resume=="function")&&(!P._writableState||((we=P._readableState)===null||we===void 0?void 0:we.readable)!==!1)&&(!P._writableState||P._readableState))}function p(P){var ue;return!!(P&&typeof P.write=="function"&&typeof P.on=="function"&&(!P._readableState||((ue=P._writableState)===null||ue===void 0?void 0:ue.writable)!==!1))}function w(P){return!!(P&&typeof P.pipe=="function"&&P._readableState&&typeof P.on=="function"&&typeof P.write=="function")}function g(P){return P&&(P._readableState||P._writableState||typeof P.write=="function"&&typeof P.on=="function"||typeof P.pipe=="function"&&typeof P.on=="function")}function y(P){return!!(P&&!g(P)&&typeof P.pipeThrough=="function"&&typeof P.getReader=="function"&&typeof P.cancel=="function")}function E(P){return!!(P&&!g(P)&&typeof P.getWriter=="function"&&typeof P.abort=="function")}function b(P){return!!(P&&!g(P)&&typeof P.readable=="object"&&typeof P.writable=="object")}function _(P){return y(P)||E(P)||b(P)}function k(P,ue){return P==null?!1:ue===!0?typeof P[o]=="function":ue===!1?typeof P[u]=="function":typeof P[o]=="function"||typeof P[u]=="function"}function T(P){if(!g(P))return null;let ue=P._writableState,we=P._readableState,G=ue||we;return!!(P.destroyed||P[i]||G!=null&&G.destroyed)}function S(P){if(!p(P))return null;if(P.writableEnded===!0)return!0;let ue=P._writableState;return ue!=null&&ue.errored?!1:typeof ue?.ended!="boolean"?null:ue.ended}function I(P,ue){if(!p(P))return null;if(P.writableFinished===!0)return!0;let we=P._writableState;return we!=null&&we.errored?!1:typeof we?.finished!="boolean"?null:!!(we.finished||ue===!1&&we.ended===!0&&we.length===0)}function C(P){if(!d(P))return null;if(P.readableEnded===!0)return!0;let ue=P._readableState;return!ue||ue.errored?!1:typeof ue?.ended!="boolean"?null:ue.ended}function W(P,ue){if(!d(P))return null;let we=P._readableState;return we!=null&&we.errored?!1:typeof we?.endEmitted!="boolean"?null:!!(we.endEmitted||ue===!1&&we.ended===!0&&we.length===0)}function K(P){return P&&P[r]!=null?P[r]:typeof P?.readable!="boolean"?null:T(P)?!1:d(P)&&P.readable&&!W(P)}function le(P){return P&&P[t]!=null?P[t]:typeof P?.writable!="boolean"?null:T(P)?!1:p(P)&&P.writable&&!S(P)}function U(P,ue){return g(P)?T(P)?!0:!(ue?.readable!==!1&&K(P)||ue?.writable!==!1&&le(P)):null}function V(P){var ue,we;return g(P)?P.writableErrored?P.writableErrored:(ue=(we=P._writableState)===null||we===void 0?void 0:we.errored)!==null&&ue!==void 0?ue:null:null}function Q(P){var ue,we;return g(P)?P.readableErrored?P.readableErrored:(ue=(we=P._readableState)===null||we===void 0?void 0:we.errored)!==null&&ue!==void 0?ue:null:null}function L(P){if(!g(P))return null;if(typeof P.closed=="boolean")return P.closed;let ue=P._writableState,we=P._readableState;return typeof ue?.closed=="boolean"||typeof we?.closed=="boolean"?ue?.closed||we?.closed:typeof P._closed=="boolean"&&pe(P)?P._closed:null}function pe(P){return typeof P._closed=="boolean"&&typeof P._defaultKeepAlive=="boolean"&&typeof P._removedConnection=="boolean"&&typeof P._removedContLen=="boolean"}function ce(P){return typeof P._sent100=="boolean"&&pe(P)}function fe(P){var ue;return typeof P._consuming=="boolean"&&typeof P._dumped=="boolean"&&((ue=P.req)===null||ue===void 0?void 0:ue.upgradeOrConnect)===void 0}function me(P){if(!g(P))return null;let ue=P._writableState,we=P._readableState,G=ue||we;return!G&&ce(P)||!!(G&&G.autoDestroy&&G.emitClose&&G.closed===!1)}function q(P){var ue;return!!(P&&((ue=P[n])!==null&&ue!==void 0?ue:P.readableDidRead||P.readableAborted))}function he(P){var ue,we,G,ve,$,x,J,H,F,D;return!!(P&&((ue=(we=(G=(ve=($=(x=P[e])!==null&&x!==void 0?x:P.readableErrored)!==null&&$!==void 0?$:P.writableErrored)!==null&&ve!==void 0?ve:(J=P._readableState)===null||J===void 0?void 0:J.errorEmitted)!==null&&G!==void 0?G:(H=P._writableState)===null||H===void 0?void 0:H.errorEmitted)!==null&&we!==void 0?we:(F=P._readableState)===null||F===void 0?void 0:F.errored)!==null&&ue!==void 0?ue:!((D=P._writableState)===null||D===void 0)&&D.errored))}f.exports={isDestroyed:T,kIsDestroyed:i,isDisturbed:q,kIsDisturbed:n,isErrored:he,kIsErrored:e,isReadable:K,kIsReadable:r,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:t,isClosed:L,isDuplexNodeStream:w,isFinished:U,isIterable:k,isReadableNodeStream:d,isReadableStream:y,isReadableEnded:C,isReadableFinished:W,isReadableErrored:Q,isNodeStream:g,isWebStream:_,isWritable:le,isWritableNodeStream:p,isWritableStream:E,isWritableEnded:S,isWritableFinished:I,isWritableErrored:V,isServerRequest:fe,isServerResponse:ce,willEmitClose:me,isTransformStream:b}}),gt=de((s,f)=>{"use strict";oe(),ae(),se();var o=Ot(),{AbortError:u,codes:h}=He(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:e}=h,{kEmptyObject:r,once:t}=Ve(),{validateAbortSignal:n,validateFunction:l,validateObject:c,validateBoolean:d}=Ht(),{Promise:p,PromisePrototypeThen:w,SymbolDispose:g}=Ue(),{isClosed:y,isReadable:E,isReadableNodeStream:b,isReadableStream:_,isReadableFinished:k,isReadableErrored:T,isWritable:S,isWritableNodeStream:I,isWritableStream:C,isWritableFinished:W,isWritableErrored:K,isNodeStream:le,willEmitClose:U,kIsClosedPromise:V}=ut(),Q;function L(q){return q.setHeader&&typeof q.abort=="function"}var pe=()=>{};function ce(q,he,P){var ue,we;if(arguments.length===2?(P=he,he=r):he==null?he=r:c(he,"options"),l(P,"callback"),n(he.signal,"options.signal"),P=t(P),_(q)||C(q))return fe(q,he,P);if(!le(q))throw new i("stream",["ReadableStream","WritableStream","Stream"],q);let G=(ue=he.readable)!==null&&ue!==void 0?ue:b(q),ve=(we=he.writable)!==null&&we!==void 0?we:I(q),$=q._writableState,x=q._readableState,J=()=>{q.writable||D()},H=U(q)&&b(q)===G&&I(q)===ve,F=W(q,!1),D=()=>{F=!0,q.destroyed&&(H=!1),!(H&&(!q.readable||G))&&(!G||ne)&&P.call(q)},ne=k(q,!1),ee=()=>{ne=!0,q.destroyed&&(H=!1),!(H&&(!q.writable||ve))&&(!ve||F)&&P.call(q)},R=j=>{P.call(q,j)},M=y(q),z=()=>{M=!0;let j=K(q)||T(q);if(j&&typeof j!="boolean")return P.call(q,j);if(G&&!ne&&b(q,!0)&&!k(q,!1))return P.call(q,new e);if(ve&&!F&&!W(q,!1))return P.call(q,new e);P.call(q)},Z=()=>{M=!0;let j=K(q)||T(q);if(j&&typeof j!="boolean")return P.call(q,j);P.call(q)},X=()=>{q.req.on("finish",D)};L(q)?(q.on("complete",D),H||q.on("abort",z),q.req?X():q.on("request",X)):ve&&!$&&(q.on("end",J),q.on("close",J)),!H&&typeof q.aborted=="boolean"&&q.on("aborted",z),q.on("end",ee),q.on("finish",D),he.error!==!1&&q.on("error",R),q.on("close",z),M?o.nextTick(z):$!=null&&$.errorEmitted||x!=null&&x.errorEmitted?H||o.nextTick(Z):(!G&&(!H||E(q))&&(F||S(q)===!1)||!ve&&(!H||S(q))&&(ne||E(q)===!1)||x&&q.req&&q.aborted)&&o.nextTick(Z);let ie=()=>{P=pe,q.removeListener("aborted",z),q.removeListener("complete",D),q.removeListener("abort",z),q.removeListener("request",X),q.req&&q.req.removeListener("finish",D),q.removeListener("end",J),q.removeListener("close",J),q.removeListener("finish",D),q.removeListener("end",ee),q.removeListener("error",R),q.removeListener("close",z)};if(he.signal&&!M){let j=()=>{let te=P;ie(),te.call(q,new u(void 0,{cause:he.signal.reason}))};if(he.signal.aborted)o.nextTick(j);else{Q=Q||Ve().addAbortListener;let te=Q(he.signal,j),ye=P;P=t((...re)=>{te[g](),ye.apply(q,re)})}}return ie}function fe(q,he,P){let ue=!1,we=pe;if(he.signal)if(we=()=>{ue=!0,P.call(q,new u(void 0,{cause:he.signal.reason}))},he.signal.aborted)o.nextTick(we);else{Q=Q||Ve().addAbortListener;let ve=Q(he.signal,we),$=P;P=t((...x)=>{ve[g](),$.apply(q,x)})}let G=(...ve)=>{ue||o.nextTick(()=>P.apply(q,ve))};return w(q[V].promise,G,G),pe}function me(q,he){var P;let ue=!1;return he===null&&(he=r),(P=he)!==null&&P!==void 0&&P.cleanup&&(d(he.cleanup,"cleanup"),ue=he.cleanup),new p((we,G)=>{let ve=ce(q,he,$=>{ue&&ve(),$?G($):we()})})}f.exports=ce,f.exports.finished=me}),Mt=de((s,f)=>{"use strict";oe(),ae(),se();var o=Ot(),{aggregateTwoErrors:u,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:i}=He(),{Symbol:e}=Ue(),{kIsDestroyed:r,isDestroyed:t,isFinished:n,isServerRequest:l}=ut(),c=e("kDestroy"),d=e("kConstruct");function p(U,V,Q){U&&(U.stack,V&&!V.errored&&(V.errored=U),Q&&!Q.errored&&(Q.errored=U))}function w(U,V){let Q=this._readableState,L=this._writableState,pe=L||Q;return L!=null&&L.destroyed||Q!=null&&Q.destroyed?(typeof V=="function"&&V(),this):(p(U,L,Q),L&&(L.destroyed=!0),Q&&(Q.destroyed=!0),pe.constructed?g(this,U,V):this.once(c,function(ce){g(this,u(ce,U),V)}),this)}function g(U,V,Q){let L=!1;function pe(ce){if(L)return;L=!0;let fe=U._readableState,me=U._writableState;p(ce,me,fe),me&&(me.closed=!0),fe&&(fe.closed=!0),typeof Q=="function"&&Q(ce),ce?o.nextTick(y,U,ce):o.nextTick(E,U)}try{U._destroy(V||null,pe)}catch(ce){pe(ce)}}function y(U,V){b(U,V),E(U)}function E(U){let V=U._readableState,Q=U._writableState;Q&&(Q.closeEmitted=!0),V&&(V.closeEmitted=!0),(Q!=null&&Q.emitClose||V!=null&&V.emitClose)&&U.emit("close")}function b(U,V){let Q=U._readableState,L=U._writableState;L!=null&&L.errorEmitted||Q!=null&&Q.errorEmitted||(L&&(L.errorEmitted=!0),Q&&(Q.errorEmitted=!0),U.emit("error",V))}function _(){let U=this._readableState,V=this._writableState;U&&(U.constructed=!0,U.closed=!1,U.closeEmitted=!1,U.destroyed=!1,U.errored=null,U.errorEmitted=!1,U.reading=!1,U.ended=U.readable===!1,U.endEmitted=U.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function k(U,V,Q){let L=U._readableState,pe=U._writableState;if(pe!=null&&pe.destroyed||L!=null&&L.destroyed)return this;L!=null&&L.autoDestroy||pe!=null&&pe.autoDestroy?U.destroy(V):V&&(V.stack,pe&&!pe.errored&&(pe.errored=V),L&&!L.errored&&(L.errored=V),Q?o.nextTick(b,U,V):b(U,V))}function T(U,V){if(typeof U._construct!="function")return;let Q=U._readableState,L=U._writableState;Q&&(Q.constructed=!1),L&&(L.constructed=!1),U.once(d,V),!(U.listenerCount(d)>1)&&o.nextTick(S,U)}function S(U){let V=!1;function Q(L){if(V){k(U,L??new h);return}V=!0;let pe=U._readableState,ce=U._writableState,fe=ce||pe;pe&&(pe.constructed=!0),ce&&(ce.constructed=!0),fe.destroyed?U.emit(c,L):L?k(U,L,!0):o.nextTick(I,U)}try{U._construct(L=>{o.nextTick(Q,L)})}catch(L){o.nextTick(Q,L)}}function I(U){U.emit(d)}function C(U){return U?.setHeader&&typeof U.abort=="function"}function W(U){U.emit("close")}function K(U,V){U.emit("error",V),o.nextTick(W,U)}function le(U,V){!U||t(U)||(!V&&!n(U)&&(V=new i),l(U)?(U.socket=null,U.destroy(V)):C(U)?U.abort():C(U.req)?U.req.abort():typeof U.destroy=="function"?U.destroy(V):typeof U.close=="function"?U.close():V?o.nextTick(K,U,V):o.nextTick(W,U),U.destroyed||(U[r]=!0))}f.exports={construct:T,destroyer:le,destroy:w,undestroy:_,errorOrDestroy:k}}),Vi=de((s,f)=>{"use strict";oe(),ae(),se();var{ArrayIsArray:o,ObjectSetPrototypeOf:u}=Ue(),{EventEmitter:h}=(Tt(),Re(pt));function i(r){h.call(this,r)}u(i.prototype,h.prototype),u(i,h),i.prototype.pipe=function(r,t){let n=this;function l(E){r.writable&&r.write(E)===!1&&n.pause&&n.pause()}n.on("data",l);function c(){n.readable&&n.resume&&n.resume()}r.on("drain",c),!r._isStdio&&(!t||t.end!==!1)&&(n.on("end",p),n.on("close",w));let d=!1;function p(){d||(d=!0,r.end())}function w(){d||(d=!0,typeof r.destroy=="function"&&r.destroy())}function g(E){y(),h.listenerCount(this,"error")===0&&this.emit("error",E)}e(n,"error",g),e(r,"error",g);function y(){n.removeListener("data",l),r.removeListener("drain",c),n.removeListener("end",p),n.removeListener("close",w),n.removeListener("error",g),r.removeListener("error",g),n.removeListener("end",y),n.removeListener("close",y),r.removeListener("close",y)}return n.on("end",y),n.on("close",y),r.on("close",y),r.emit("pipe",n),r};function e(r,t,n){if(typeof r.prependListener=="function")return r.prependListener(t,n);!r._events||!r._events[t]?r.on(t,n):o(r._events[t])?r._events[t].unshift(n):r._events[t]=[n,r._events[t]]}f.exports={Stream:i,prependListener:e}}),or=de((s,f)=>{"use strict";oe(),ae(),se();var{SymbolDispose:o}=Ue(),{AbortError:u,codes:h}=He(),{isNodeStream:i,isWebStream:e,kControllerErrorFunction:r}=ut(),t=gt(),{ERR_INVALID_ARG_TYPE:n}=h,l,c=(d,p)=>{if(typeof d!="object"||!("aborted"in d))throw new n(p,"AbortSignal",d)};f.exports.addAbortSignal=function(d,p){if(c(d,"signal"),!i(p)&&!e(p))throw new n("stream",["ReadableStream","WritableStream","Stream"],p);return f.exports.addAbortSignalNoValidate(d,p)},f.exports.addAbortSignalNoValidate=function(d,p){if(typeof d!="object"||!("aborted"in d))return p;let w=i(p)?()=>{p.destroy(new u(void 0,{cause:d.reason}))}:()=>{p[r](new u(void 0,{cause:d.reason}))};if(d.aborted)w();else{l=l||Ve().addAbortListener;let g=l(d,w);t(p,g[o])}return p}}),Bs=de((s,f)=>{"use strict";oe(),ae(),se();var{StringPrototypeSlice:o,SymbolIterator:u,TypedArrayPrototypeSet:h,Uint8Array:i}=Ue(),{Buffer:e}=(De(),Re(Ne)),{inspect:r}=Ve();f.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){let n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,l=""+n.data;for(;(n=n.next)!==null;)l+=t+n.data;return l}concat(t){if(this.length===0)return e.alloc(0);let n=e.allocUnsafe(t>>>0),l=this.head,c=0;for(;l;)h(n,l.data,c),c+=l.data.length,l=l.next;return n}consume(t,n){let l=this.head.data;if(t<l.length){let c=l.slice(0,t);return this.head.data=l.slice(t),c}return t===l.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[u](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",l=this.head,c=0;do{let d=l.data;if(t>d.length)n+=d,t-=d.length;else{t===d.length?(n+=d,++c,l.next?this.head=l.next:this.head=this.tail=null):(n+=o(d,0,t),this.head=l,l.data=o(d,t));break}++c}while((l=l.next)!==null);return this.length-=c,n}_getBuffer(t){let n=e.allocUnsafe(t),l=t,c=this.head,d=0;do{let p=c.data;if(t>p.length)h(n,p,l-t),t-=p.length;else{t===p.length?(h(n,p,l-t),++d,c.next?this.head=c.next:this.head=this.tail=null):(h(n,new i(p.buffer,p.byteOffset,t),l-t),this.head=c,c.data=p.slice(t));break}++d}while((c=c.next)!==null);return this.length-=d,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return r(this,Rt(We({},n),{depth:0,customInspect:!1}))}}}),sr=de((s,f)=>{"use strict";oe(),ae(),se();var{MathFloor:o,NumberIsInteger:u}=Ue(),{validateInteger:h}=Ht(),{ERR_INVALID_ARG_VALUE:i}=He().codes,e=16*1024,r=16;function t(d,p,w){return d.highWaterMark!=null?d.highWaterMark:p?d[w]:null}function n(d){return d?r:e}function l(d,p){h(p,"value",0),d?r=p:e=p}function c(d,p,w,g){let y=t(p,g,w);if(y!=null){if(!u(y)||y<0){let E=g?`options.${w}`:"options.highWaterMark";throw new i(E,y)}return o(y)}return n(d.objectMode)}f.exports={getHighWaterMark:c,getDefaultHighWaterMark:n,setDefaultHighWaterMark:l}}),Ms=de((s,f)=>{oe(),ae(),se();var o=(De(),Re(Ne)),u=o.Buffer;function h(e,r){for(var t in e)r[t]=e[t]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?f.exports=o:(h(o,s),s.Buffer=i);function i(e,r,t){return u(e,r,t)}i.prototype=Object.create(u.prototype),h(u,i),i.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return u(e,r,t)},i.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=u(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n},i.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return u(e)},i.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),Us=de(s=>{"use strict";oe(),ae(),se();var f=Ms().Buffer,o=f.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(b){if(!b)return"utf8";for(var _;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(_)return;b=(""+b).toLowerCase(),_=!0}}function h(b){var _=u(b);if(typeof _!="string"&&(f.isEncoding===o||!o(b)))throw new Error("Unknown encoding: "+b);return _||b}s.StringDecoder=i;function i(b){this.encoding=h(b);var _;switch(this.encoding){case"utf16le":this.text=d,this.end=p,_=4;break;case"utf8":this.fillLast=n,_=4;break;case"base64":this.text=w,this.end=g,_=3;break;default:this.write=y,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(_)}i.prototype.write=function(b){if(b.length===0)return"";var _,k;if(this.lastNeed){if(_=this.fillLast(b),_===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<b.length?_?_+this.text(b,k):this.text(b,k):_||""},i.prototype.end=c,i.prototype.text=l,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function e(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function r(b,_,k){var T=_.length-1;if(T<k)return 0;var S=e(_[T]);return S>=0?(S>0&&(b.lastNeed=S-1),S):--T<k||S===-2?0:(S=e(_[T]),S>=0?(S>0&&(b.lastNeed=S-2),S):--T<k||S===-2?0:(S=e(_[T]),S>=0?(S>0&&(S===2?S=0:b.lastNeed=S-3),S):0))}function t(b,_,k){if((_[0]&192)!==128)return b.lastNeed=0,"\uFFFD";if(b.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return b.lastNeed=1,"\uFFFD";if(b.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return b.lastNeed=2,"\uFFFD"}}function n(b){var _=this.lastTotal-this.lastNeed,k=t(this,b,_);if(k!==void 0)return k;if(this.lastNeed<=b.length)return b.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,_,0,b.length),this.lastNeed-=b.length}function l(b,_){var k=r(this,b,_);if(!this.lastNeed)return b.toString("utf8",_);this.lastTotal=k;var T=b.length-(k-this.lastNeed);return b.copy(this.lastChar,0,T),b.toString("utf8",_,T)}function c(b){var _=b&&b.length?this.write(b):"";return this.lastNeed?_+"\uFFFD":_}function d(b,_){if((b.length-_)%2===0){var k=b.toString("utf16le",_);if(k){var T=k.charCodeAt(k.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",_,b.length-1)}function p(b){var _=b&&b.length?this.write(b):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,k)}return _}function w(b,_){var k=(b.length-_)%3;return k===0?b.toString("base64",_):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",_,b.length-k))}function g(b){var _=b&&b.length?this.write(b):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function y(b){return b.toString(this.encoding)}function E(b){return b&&b.length?this.write(b):""}}),io=de((s,f)=>{"use strict";oe(),ae(),se();var o=Ot(),{PromisePrototypeThen:u,SymbolAsyncIterator:h,SymbolIterator:i}=Ue(),{Buffer:e}=(De(),Re(Ne)),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_NULL_VALUES:t}=He().codes;function n(l,c,d){let p;if(typeof c=="string"||c instanceof e)return new l(Rt(We({objectMode:!0},d),{read(){this.push(c),this.push(null)}}));let w;if(c&&c[h])w=!0,p=c[h]();else if(c&&c[i])w=!1,p=c[i]();else throw new r("iterable",["Iterable"],c);let g=new l(We({objectMode:!0,highWaterMark:1},d)),y=!1;g._read=function(){y||(y=!0,b())},g._destroy=function(_,k){u(E(_),()=>o.nextTick(k,_),T=>o.nextTick(k,T||_))};async function E(_){let k=_!=null,T=typeof p.throw=="function";if(k&&T){let{value:S,done:I}=await p.throw(_);if(await S,I)return}if(typeof p.return=="function"){let{value:S}=await p.return();await S}}async function b(){for(;;){try{let{value:_,done:k}=w?await p.next():p.next();if(k)g.push(null);else{let T=_&&typeof _.then=="function"?await _:_;if(T===null)throw y=!1,new t;if(g.push(T))continue;y=!1}}catch(_){g.destroy(_)}break}}return g}f.exports=n}),ar=de((s,f)=>{"use strict";oe(),ae(),se();var o=Ot(),{ArrayPrototypeIndexOf:u,NumberIsInteger:h,NumberIsNaN:i,NumberParseInt:e,ObjectDefineProperties:r,ObjectKeys:t,ObjectSetPrototypeOf:n,Promise:l,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:p,Symbol:w}=Ue();f.exports=re,re.ReadableState=ye;var{EventEmitter:g}=(Tt(),Re(pt)),{Stream:y,prependListener:E}=Vi(),{Buffer:b}=(De(),Re(Ne)),{addAbortSignal:_}=or(),k=gt(),T=Ve().debuglog("stream",A=>{T=A}),S=Bs(),I=Mt(),{getHighWaterMark:C,getDefaultHighWaterMark:W}=sr(),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:U,ERR_OUT_OF_RANGE:V,ERR_STREAM_PUSH_AFTER_EOF:Q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:pe}=He(),{validateObject:ce}=Ht(),fe=w("kPaused"),{StringDecoder:me}=Us(),q=io();n(re.prototype,y.prototype),n(re,y);var he=()=>{},{errorOrDestroy:P}=I,ue=1,we=2,G=4,ve=8,$=16,x=32,J=64,H=128,F=256,D=512,ne=1024,ee=2048,R=4096,M=8192,z=16384,Z=32768,X=65536,ie=1<<17,j=1<<18;function te(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(O){O?this.state|=A:this.state&=~A}}}r(ye.prototype,{objectMode:te(ue),ended:te(we),endEmitted:te(G),reading:te(ve),constructed:te($),sync:te(x),needReadable:te(J),emittedReadable:te(H),readableListening:te(F),resumeScheduled:te(D),errorEmitted:te(ne),emitClose:te(ee),autoDestroy:te(R),destroyed:te(M),closed:te(z),closeEmitted:te(Z),multiAwaitDrain:te(X),readingMore:te(ie),dataEmitted:te(j)});function ye(A,O,be){typeof be!="boolean"&&(be=O instanceof at()),this.state=ee|R|$|x,A&&A.objectMode&&(this.state|=ue),be&&A&&A.readableObjectMode&&(this.state|=ue),this.highWaterMark=A?C(this,A,"readableHighWaterMark",be):W(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[fe]=null,A&&A.emitClose===!1&&(this.state&=~ee),A&&A.autoDestroy===!1&&(this.state&=~R),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new me(A.encoding),this.encoding=A.encoding)}function re(A){if(!(this instanceof re))return new re(A);let O=this instanceof at();this._readableState=new ye(A,this,O),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!O&&_(A.signal,this)),y.call(this,A),I.construct(this,()=>{this._readableState.needReadable&&Ae(this,this._readableState)})}re.prototype.destroy=I.destroy,re.prototype._undestroy=I.undestroy,re.prototype._destroy=function(A,O){O(A)},re.prototype[g.captureRejectionSymbol]=function(A){this.destroy(A)},re.prototype[d]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new pe,this.destroy(A)),new l((O,be)=>k(this,_e=>_e&&_e!==A?be(_e):O(null)))},re.prototype.push=function(A,O){return Ee(this,A,O,!1)},re.prototype.unshift=function(A,O){return Ee(this,A,O,!0)};function Ee(A,O,be,_e){T("readableAddChunk",O);let Se=A._readableState,Fe;if((Se.state&ue)===0&&(typeof O=="string"?(be=be||Se.defaultEncoding,Se.encoding!==be&&(_e&&Se.encoding?O=b.from(O,be).toString(Se.encoding):(O=b.from(O,be),be=""))):O instanceof b?be="":y._isUint8Array(O)?(O=y._uint8ArrayToBuffer(O),be=""):O!=null&&(Fe=new le("chunk",["string","Buffer","Uint8Array"],O))),Fe)P(A,Fe);else if(O===null)Se.state&=~ve,N(A,Se);else if((Se.state&ue)!==0||O&&O.length>0)if(_e)if((Se.state&G)!==0)P(A,new L);else{if(Se.destroyed||Se.errored)return!1;a(A,Se,O,!0)}else if(Se.ended)P(A,new Q);else{if(Se.destroyed||Se.errored)return!1;Se.state&=~ve,Se.decoder&&!be?(O=Se.decoder.write(O),Se.objectMode||O.length!==0?a(A,Se,O,!1):Ae(A,Se)):a(A,Se,O,!1)}else _e||(Se.state&=~ve,Ae(A,Se));return!Se.ended&&(Se.length<Se.highWaterMark||Se.length===0)}function a(A,O,be,_e){O.flowing&&O.length===0&&!O.sync&&A.listenerCount("data")>0?((O.state&X)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,A.emit("data",be)):(O.length+=O.objectMode?1:be.length,_e?O.buffer.unshift(be):O.buffer.push(be),(O.state&J)!==0&&Y(A)),Ae(A,O)}re.prototype.isPaused=function(){let A=this._readableState;return A[fe]===!0||A.flowing===!1},re.prototype.setEncoding=function(A){let O=new me(A);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;let be=this._readableState.buffer,_e="";for(let Se of be)_e+=O.write(Se);return be.clear(),_e!==""&&be.push(_e),this._readableState.length=_e.length,this};var m=1073741824;function v(A){if(A>m)throw new V("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function B(A,O){return A<=0||O.length===0&&O.ended?0:(O.state&ue)!==0?1:i(A)?O.flowing&&O.length?O.buffer.first().length:O.length:A<=O.length?A:O.ended?O.length:0}re.prototype.read=function(A){T("read",A),A===void 0?A=NaN:h(A)||(A=e(A,10));let O=this._readableState,be=A;if(A>O.highWaterMark&&(O.highWaterMark=v(A)),A!==0&&(O.state&=~H),A===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return T("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?hr(this):Y(this),null;if(A=B(A,O),A===0&&O.ended)return O.length===0&&hr(this),null;let _e=(O.state&J)!==0;if(T("need readable",_e),(O.length===0||O.length-A<O.highWaterMark)&&(_e=!0,T("length less than watermark",_e)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)_e=!1,T("reading, ended or constructing",_e);else if(_e){T("do read"),O.state|=ve|x,O.length===0&&(O.state|=J);try{this._read(O.highWaterMark)}catch(Fe){P(this,Fe)}O.state&=~x,O.reading||(A=B(be,O))}let Se;return A>0?Se=Zi(A,O):Se=null,Se===null?(O.needReadable=O.length<=O.highWaterMark,A=0):(O.length-=A,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),be!==A&&O.ended&&hr(this)),Se!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",Se)),Se};function N(A,O){if(T("onEofChunk"),!O.ended){if(O.decoder){let be=O.decoder.end();be&&be.length&&(O.buffer.push(be),O.length+=O.objectMode?1:be.length)}O.ended=!0,O.sync?Y(A):(O.needReadable=!1,O.emittedReadable=!0,ge(A))}}function Y(A){let O=A._readableState;T("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(T("emitReadable",O.flowing),O.emittedReadable=!0,o.nextTick(ge,A))}function ge(A){let O=A._readableState;T("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(A.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,Ji(A)}function Ae(A,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,o.nextTick(Te,A,O))}function Te(A,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){let be=O.length;if(T("maybeReadMore read 0"),A.read(0),be===O.length)break}O.readingMore=!1}re.prototype._read=function(A){throw new U("_read()")},re.prototype.pipe=function(A,O){let be=this,_e=this._readableState;_e.pipes.length===1&&(_e.multiAwaitDrain||(_e.multiAwaitDrain=!0,_e.awaitDrainWriters=new c(_e.awaitDrainWriters?[_e.awaitDrainWriters]:[]))),_e.pipes.push(A),T("pipe count=%d opts=%j",_e.pipes.length,O);let Se=(!O||O.end!==!1)&&A!==o.stdout&&A!==o.stderr?Qe:jt;_e.endEmitted?o.nextTick(Se):be.once("end",Se),A.on("unpipe",Fe);function Fe(mt,et){T("onunpipe"),mt===be&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,vs())}function Qe(){T("onend"),A.end()}let bt,tn=!1;function vs(){T("cleanup"),A.removeListener("close",dr),A.removeListener("finish",pr),bt&&A.removeListener("drain",bt),A.removeListener("error",fr),A.removeListener("unpipe",Fe),be.removeListener("end",Qe),be.removeListener("end",jt),be.removeListener("data",nn),tn=!0,bt&&_e.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&bt()}function rn(){tn||(_e.pipes.length===1&&_e.pipes[0]===A?(T("false write response, pause",0),_e.awaitDrainWriters=A,_e.multiAwaitDrain=!1):_e.pipes.length>1&&_e.pipes.includes(A)&&(T("false write response, pause",_e.awaitDrainWriters.size),_e.awaitDrainWriters.add(A)),be.pause()),bt||(bt=Ce(be,A),A.on("drain",bt))}be.on("data",nn);function nn(mt){T("ondata");let et=A.write(mt);T("dest.write",et),et===!1&&rn()}function fr(mt){if(T("onerror",mt),jt(),A.removeListener("error",fr),A.listenerCount("error")===0){let et=A._writableState||A._readableState;et&&!et.errorEmitted?P(A,mt):A.emit("error",mt)}}E(A,"error",fr);function dr(){A.removeListener("finish",pr),jt()}A.once("close",dr);function pr(){T("onfinish"),A.removeListener("close",dr),jt()}A.once("finish",pr);function jt(){T("unpipe"),be.unpipe(A)}return A.emit("pipe",be),A.writableNeedDrain===!0?rn():_e.flowing||(T("pipe resume"),be.resume()),A};function Ce(A,O){return function(){let be=A._readableState;be.awaitDrainWriters===O?(T("pipeOnDrain",1),be.awaitDrainWriters=null):be.multiAwaitDrain&&(T("pipeOnDrain",be.awaitDrainWriters.size),be.awaitDrainWriters.delete(O)),(!be.awaitDrainWriters||be.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}re.prototype.unpipe=function(A){let O=this._readableState,be={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!A){let Se=O.pipes;O.pipes=[],this.pause();for(let Fe=0;Fe<Se.length;Fe++)Se[Fe].emit("unpipe",this,{hasUnpiped:!1});return this}let _e=u(O.pipes,A);return _e===-1?this:(O.pipes.splice(_e,1),O.pipes.length===0&&this.pause(),A.emit("unpipe",this,be),this)},re.prototype.on=function(A,O){let be=y.prototype.on.call(this,A,O),_e=this._readableState;return A==="data"?(_e.readableListening=this.listenerCount("readable")>0,_e.flowing!==!1&&this.resume()):A==="readable"&&!_e.endEmitted&&!_e.readableListening&&(_e.readableListening=_e.needReadable=!0,_e.flowing=!1,_e.emittedReadable=!1,T("on readable",_e.length,_e.reading),_e.length?Y(this):_e.reading||o.nextTick(je,this)),be},re.prototype.addListener=re.prototype.on,re.prototype.removeListener=function(A,O){let be=y.prototype.removeListener.call(this,A,O);return A==="readable"&&o.nextTick(ke,this),be},re.prototype.off=re.prototype.removeListener,re.prototype.removeAllListeners=function(A){let O=y.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&o.nextTick(ke,this),O};function ke(A){let O=A._readableState;O.readableListening=A.listenerCount("readable")>0,O.resumeScheduled&&O[fe]===!1?O.flowing=!0:A.listenerCount("data")>0?A.resume():O.readableListening||(O.flowing=null)}function je(A){T("readable nexttick read 0"),A.read(0)}re.prototype.resume=function(){let A=this._readableState;return A.flowing||(T("resume"),A.flowing=!A.readableListening,bs(this,A)),A[fe]=!1,this};function bs(A,O){O.resumeScheduled||(O.resumeScheduled=!0,o.nextTick(ms,A,O))}function ms(A,O){T("resume",O.reading),O.reading||A.read(0),O.resumeScheduled=!1,A.emit("resume"),Ji(A),O.flowing&&!O.reading&&A.read(0)}re.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[fe]=!0,this};function Ji(A){let O=A._readableState;for(T("flow",O.flowing);O.flowing&&A.read()!==null;);}re.prototype.wrap=function(A){let O=!1;A.on("data",_e=>{!this.push(_e)&&A.pause&&(O=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",_e=>{P(this,_e)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&A.resume&&(O=!1,A.resume())};let be=t(A);for(let _e=1;_e<be.length;_e++){let Se=be[_e];this[Se]===void 0&&typeof A[Se]=="function"&&(this[Se]=A[Se].bind(A))}return this},re.prototype[p]=function(){return Xi(this)},re.prototype.iterator=function(A){return A!==void 0&&ce(A,"options"),Xi(this,A)};function Xi(A,O){typeof A.read!="function"&&(A=re.wrap(A,{objectMode:!0}));let be=ys(A,O);return be.stream=A,be}async function*ys(A,O){let be=he;function _e(Qe){this===A?(be(),be=he):be=Qe}A.on("readable",_e);let Se,Fe=k(A,{writable:!1},Qe=>{Se=Qe?K(Se,Qe):null,be(),be=he});try{for(;;){let Qe=A.destroyed?null:A.read();if(Qe!==null)yield Qe;else{if(Se)throw Se;if(Se===null)return;await new l(_e)}}}catch(Qe){throw Se=K(Se,Qe),Se}finally{(Se||O?.destroyOnReturn!==!1)&&(Se===void 0||A._readableState.autoDestroy)?I.destroyer(A,null):(A.off("readable",_e),Fe())}}r(re.prototype,{readable:{__proto__:null,get(){let A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),r(ye.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[fe]!==!1},set(A){this[fe]=!!A}}}),re._fromList=Zi;function Zi(A,O){if(O.length===0)return null;let be;return O.objectMode?be=O.buffer.shift():!A||A>=O.length?(O.decoder?be=O.buffer.join(""):O.buffer.length===1?be=O.buffer.first():be=O.buffer.concat(O.length),O.buffer.clear()):be=O.buffer.consume(A,O.decoder),be}function hr(A){let O=A._readableState;T("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,o.nextTick(ws,O,A))}function ws(A,O){if(T("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)o.nextTick(_s,O);else if(A.autoDestroy){let be=O._writableState;(!be||be.autoDestroy&&(be.finished||be.writable===!1))&&O.destroy()}}}function _s(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}re.from=function(A,O){return q(re,A,O)};var cr;function en(){return cr===void 0&&(cr={}),cr}re.fromWeb=function(A,O){return en().newStreamReadableFromReadableStream(A,O)},re.toWeb=function(A,O){return en().newReadableStreamFromStreamReadable(A,O)},re.wrap=function(A,O){var be,_e;return new re(Rt(We({objectMode:(be=(_e=A.readableObjectMode)!==null&&_e!==void 0?_e:A.objectMode)!==null&&be!==void 0?be:!0},O),{destroy(Se,Fe){I.destroyer(A,Se),Fe(Se)}})).wrap(A)}}),zi=de((s,f)=>{"use strict";oe(),ae(),se();var o=Ot(),{ArrayPrototypeSlice:u,Error:h,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:e,ObjectDefineProperties:r,ObjectSetPrototypeOf:t,StringPrototypeToLowerCase:n,Symbol:l,SymbolHasInstance:c}=Ue();f.exports=ce,ce.WritableState=L;var{EventEmitter:d}=(Tt(),Re(pt)),p=Vi().Stream,{Buffer:w}=(De(),Re(Ne)),g=Mt(),{addAbortSignal:y}=or(),{getHighWaterMark:E,getDefaultHighWaterMark:b}=sr(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:W,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:le}=He().codes,{errorOrDestroy:U}=g;t(ce.prototype,p.prototype),t(ce,p);function V(){}var Q=l("kOnFinished");function L(R,M,z){typeof z!="boolean"&&(z=M instanceof at()),this.objectMode=!!(R&&R.objectMode),z&&(this.objectMode=this.objectMode||!!(R&&R.writableObjectMode)),this.highWaterMark=R?E(this,R,"writableHighWaterMark",z):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Z=!!(R&&R.decodeStrings===!1);this.decodeStrings=!Z,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=P.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,pe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Q]=[]}function pe(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}L.prototype.getBuffer=function(){return u(this.buffered,this.bufferedIndex)},e(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ce(R){let M=this instanceof at();if(!M&&!i(ce,this))return new ce(R);this._writableState=new L(R,this,M),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&y(R.signal,this)),p.call(this,R),g.construct(this,()=>{let z=this._writableState;z.writing||ve(this,z),H(this,z)})}e(ce,c,{__proto__:null,value:function(R){return i(this,R)?!0:this!==ce?!1:R&&R._writableState instanceof L}}),ce.prototype.pipe=function(){U(this,new S)};function fe(R,M,z,Z){let X=R._writableState;if(typeof z=="function")Z=z,z=X.defaultEncoding;else{if(!z)z=X.defaultEncoding;else if(z!=="buffer"&&!w.isEncoding(z))throw new le(z);typeof Z!="function"&&(Z=V)}if(M===null)throw new W;if(!X.objectMode)if(typeof M=="string")X.decodeStrings!==!1&&(M=w.from(M,z),z="buffer");else if(M instanceof w)z="buffer";else if(p._isUint8Array(M))M=p._uint8ArrayToBuffer(M),z="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],M);let ie;return X.ending?ie=new K:X.destroyed&&(ie=new I("write")),ie?(o.nextTick(Z,ie),U(R,ie,!0),ie):(X.pendingcb++,me(R,X,M,z,Z))}ce.prototype.write=function(R,M,z){return fe(this,R,M,z)===!0},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||ve(this,R))},ce.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=n(R)),!w.isEncoding(R))throw new le(R);return this._writableState.defaultEncoding=R,this};function me(R,M,z,Z,X){let ie=M.objectMode?1:z.length;M.length+=ie;let j=M.length<M.highWaterMark;return j||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:z,encoding:Z,callback:X}),M.allBuffers&&Z!=="buffer"&&(M.allBuffers=!1),M.allNoop&&X!==V&&(M.allNoop=!1)):(M.writelen=ie,M.writecb=X,M.writing=!0,M.sync=!0,R._write(z,Z,M.onwrite),M.sync=!1),j&&!M.errored&&!M.destroyed}function q(R,M,z,Z,X,ie,j){M.writelen=Z,M.writecb=j,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new I("write")):z?R._writev(X,M.onwrite):R._write(X,ie,M.onwrite),M.sync=!1}function he(R,M,z,Z){--M.pendingcb,Z(z),G(M),U(R,z)}function P(R,M){let z=R._writableState,Z=z.sync,X=z.writecb;if(typeof X!="function"){U(R,new T);return}z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0,M?(M.stack,z.errored||(z.errored=M),R._readableState&&!R._readableState.errored&&(R._readableState.errored=M),Z?o.nextTick(he,R,z,M,X):he(R,z,M,X)):(z.buffered.length>z.bufferedIndex&&ve(R,z),Z?z.afterWriteTickInfo!==null&&z.afterWriteTickInfo.cb===X?z.afterWriteTickInfo.count++:(z.afterWriteTickInfo={count:1,cb:X,stream:R,state:z},o.nextTick(ue,z.afterWriteTickInfo)):we(R,z,1,X))}function ue({stream:R,state:M,count:z,cb:Z}){return M.afterWriteTickInfo=null,we(R,M,z,Z)}function we(R,M,z,Z){for(!M.ending&&!R.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,R.emit("drain"));z-- >0;)M.pendingcb--,Z();M.destroyed&&G(M),H(R,M)}function G(R){if(R.writing)return;for(let X=R.bufferedIndex;X<R.buffered.length;++X){var M;let{chunk:ie,callback:j}=R.buffered[X],te=R.objectMode?1:ie.length;R.length-=te,j((M=R.errored)!==null&&M!==void 0?M:new I("write"))}let z=R[Q].splice(0);for(let X=0;X<z.length;X++){var Z;z[X]((Z=R.errored)!==null&&Z!==void 0?Z:new I("end"))}pe(R)}function ve(R,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;let{buffered:z,bufferedIndex:Z,objectMode:X}=M,ie=z.length-Z;if(!ie)return;let j=Z;if(M.bufferProcessing=!0,ie>1&&R._writev){M.pendingcb-=ie-1;let te=M.allNoop?V:re=>{for(let Ee=j;Ee<z.length;++Ee)z[Ee].callback(re)},ye=M.allNoop&&j===0?z:u(z,j);ye.allBuffers=M.allBuffers,q(R,M,!0,M.length,ye,"",te),pe(M)}else{do{let{chunk:te,encoding:ye,callback:re}=z[j];z[j++]=null;let Ee=X?1:te.length;q(R,M,!1,Ee,te,ye,re)}while(j<z.length&&!M.writing);j===z.length?pe(M):j>256?(z.splice(0,j),M.bufferedIndex=0):M.bufferedIndex=j}M.bufferProcessing=!1}ce.prototype._write=function(R,M,z){if(this._writev)this._writev([{chunk:R,encoding:M}],z);else throw new k("_write()")},ce.prototype._writev=null,ce.prototype.end=function(R,M,z){let Z=this._writableState;typeof R=="function"?(z=R,R=null,M=null):typeof M=="function"&&(z=M,M=null);let X;if(R!=null){let ie=fe(this,R,M);ie instanceof h&&(X=ie)}return Z.corked&&(Z.corked=1,this.uncork()),X||(!Z.errored&&!Z.ending?(Z.ending=!0,H(this,Z,!0),Z.ended=!0):Z.finished?X=new C("end"):Z.destroyed&&(X=new I("end"))),typeof z=="function"&&(X||Z.finished?o.nextTick(z,X):Z[Q].push(z)),this};function $(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function x(R,M){let z=!1;function Z(X){if(z){U(R,X??T());return}if(z=!0,M.pendingcb--,X){let ie=M[Q].splice(0);for(let j=0;j<ie.length;j++)ie[j](X);U(R,X,M.sync)}else $(M)&&(M.prefinished=!0,R.emit("prefinish"),M.pendingcb++,o.nextTick(F,R,M))}M.sync=!0,M.pendingcb++;try{R._final(Z)}catch(X){Z(X)}M.sync=!1}function J(R,M){!M.prefinished&&!M.finalCalled&&(typeof R._final=="function"&&!M.destroyed?(M.finalCalled=!0,x(R,M)):(M.prefinished=!0,R.emit("prefinish")))}function H(R,M,z){$(M)&&(J(R,M),M.pendingcb===0&&(z?(M.pendingcb++,o.nextTick((Z,X)=>{$(X)?F(Z,X):X.pendingcb--},R,M)):$(M)&&(M.pendingcb++,F(R,M))))}function F(R,M){M.pendingcb--,M.finished=!0;let z=M[Q].splice(0);for(let Z=0;Z<z.length;Z++)z[Z]();if(R.emit("finish"),M.autoDestroy){let Z=R._readableState;(!Z||Z.autoDestroy&&(Z.endEmitted||Z.readable===!1))&&R.destroy()}}r(ce.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var D=g.destroy;ce.prototype.destroy=function(R,M){let z=this._writableState;return!z.destroyed&&(z.bufferedIndex<z.buffered.length||z[Q].length)&&o.nextTick(G,z),D.call(this,R,M),this},ce.prototype._undestroy=g.undestroy,ce.prototype._destroy=function(R,M){M(R)},ce.prototype[d.captureRejectionSymbol]=function(R){this.destroy(R)};var ne;function ee(){return ne===void 0&&(ne={}),ne}ce.fromWeb=function(R,M){return ee().newStreamWritableFromWritableStream(R,M)},ce.toWeb=function(R){return ee().newWritableStreamFromStreamWritable(R)}}),js=de((s,f)=>{oe(),ae(),se();var o=Ot(),u=(De(),Re(Ne)),{isReadable:h,isWritable:i,isIterable:e,isNodeStream:r,isReadableNodeStream:t,isWritableNodeStream:n,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:d}=ut(),p=gt(),{AbortError:w,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:y}}=He(),{destroyer:E}=Mt(),b=at(),_=ar(),k=zi(),{createDeferredPromise:T}=Ve(),S=io(),I=globalThis.Blob||u.Blob,C=typeof I<"u"?function(Q){return Q instanceof I}:function(Q){return!1},W=globalThis.AbortController||qt().AbortController,{FunctionPrototypeCall:K}=Ue(),le=class extends b{constructor(Q){super(Q),Q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};f.exports=function Q(L,pe){if(l(L))return L;if(t(L))return V({readable:L});if(n(L))return V({writable:L});if(r(L))return V({writable:!1,readable:!1});if(c(L))return V({readable:_.fromWeb(L)});if(d(L))return V({writable:k.fromWeb(L)});if(typeof L=="function"){let{value:fe,write:me,final:q,destroy:he}=U(L);if(e(fe))return S(le,fe,{objectMode:!0,write:me,final:q,destroy:he});let P=fe?.then;if(typeof P=="function"){let ue,we=K(P,fe,G=>{if(G!=null)throw new y("nully","body",G)},G=>{E(ue,G)});return ue=new le({objectMode:!0,readable:!1,write:me,final(G){q(async()=>{try{await we,o.nextTick(G,null)}catch(ve){o.nextTick(G,ve)}})},destroy:he})}throw new y("Iterable, AsyncIterable or AsyncFunction",pe,fe)}if(C(L))return Q(L.arrayBuffer());if(e(L))return S(le,L,{objectMode:!0,writable:!1});if(c(L?.readable)&&d(L?.writable))return le.fromWeb(L);if(typeof L?.writable=="object"||typeof L?.readable=="object"){let fe=L!=null&&L.readable?t(L?.readable)?L?.readable:Q(L.readable):void 0,me=L!=null&&L.writable?n(L?.writable)?L?.writable:Q(L.writable):void 0;return V({readable:fe,writable:me})}let ce=L?.then;if(typeof ce=="function"){let fe;return K(ce,L,me=>{me!=null&&fe.push(me),fe.push(null)},me=>{E(fe,me)}),fe=new le({objectMode:!0,writable:!1,read(){}})}throw new g(pe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],L)};function U(Q){let{promise:L,resolve:pe}=T(),ce=new W,fe=ce.signal;return{value:Q(async function*(){for(;;){let me=L;L=null;let{chunk:q,done:he,cb:P}=await me;if(o.nextTick(P),he)return;if(fe.aborted)throw new w(void 0,{cause:fe.reason});({promise:L,resolve:pe}=T()),yield q}}(),{signal:fe}),write(me,q,he){let P=pe;pe=null,P({chunk:me,done:!1,cb:he})},final(me){let q=pe;pe=null,q({done:!0,cb:me})},destroy(me,q){ce.abort(),q(me)}}}function V(Q){let L=Q.readable&&typeof Q.readable.read!="function"?_.wrap(Q.readable):Q.readable,pe=Q.writable,ce=!!h(L),fe=!!i(pe),me,q,he,P,ue;function we(G){let ve=P;P=null,ve?ve(G):G&&ue.destroy(G)}return ue=new le({readableObjectMode:!!(L!=null&&L.readableObjectMode),writableObjectMode:!!(pe!=null&&pe.writableObjectMode),readable:ce,writable:fe}),fe&&(p(pe,G=>{fe=!1,G&&E(L,G),we(G)}),ue._write=function(G,ve,$){pe.write(G,ve)?$():me=$},ue._final=function(G){pe.end(),q=G},pe.on("drain",function(){if(me){let G=me;me=null,G()}}),pe.on("finish",function(){if(q){let G=q;q=null,G()}})),ce&&(p(L,G=>{ce=!1,G&&E(L,G),we(G)}),L.on("readable",function(){if(he){let G=he;he=null,G()}}),L.on("end",function(){ue.push(null)}),ue._read=function(){for(;;){let G=L.read();if(G===null){he=ue._read;return}if(!ue.push(G))return}}),ue._destroy=function(G,ve){!G&&P!==null&&(G=new w),he=null,me=null,q=null,P===null?ve(G):(P=ve,E(pe,G),E(L,G))},ue}}),at=de((s,f)=>{"use strict";oe(),ae(),se();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:u,ObjectKeys:h,ObjectSetPrototypeOf:i}=Ue();f.exports=t;var e=ar(),r=zi();i(t.prototype,e.prototype),i(t,e);{let d=h(r.prototype);for(let p=0;p<d.length;p++){let w=d[p];t.prototype[w]||(t.prototype[w]=r.prototype[w])}}function t(d){if(!(this instanceof t))return new t(d);e.call(this,d),r.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(t.prototype,{writable:We({__proto__:null},u(r.prototype,"writable")),writableHighWaterMark:We({__proto__:null},u(r.prototype,"writableHighWaterMark")),writableObjectMode:We({__proto__:null},u(r.prototype,"writableObjectMode")),writableBuffer:We({__proto__:null},u(r.prototype,"writableBuffer")),writableLength:We({__proto__:null},u(r.prototype,"writableLength")),writableFinished:We({__proto__:null},u(r.prototype,"writableFinished")),writableCorked:We({__proto__:null},u(r.prototype,"writableCorked")),writableEnded:We({__proto__:null},u(r.prototype,"writableEnded")),writableNeedDrain:We({__proto__:null},u(r.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var n;function l(){return n===void 0&&(n={}),n}t.fromWeb=function(d,p){return l().newStreamDuplexFromReadableWritablePair(d,p)},t.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};var c;t.from=function(d){return c||(c=js()),c(d,"body")}}),no=de((s,f)=>{"use strict";oe(),ae(),se();var{ObjectSetPrototypeOf:o,Symbol:u}=Ue();f.exports=t;var{ERR_METHOD_NOT_IMPLEMENTED:h}=He().codes,i=at(),{getHighWaterMark:e}=sr();o(t.prototype,i.prototype),o(t,i);var r=u("kCallback");function t(c){if(!(this instanceof t))return new t(c);let d=c?e(this,c,"readableHighWaterMark",!0):null;d===0&&(c=Rt(We({},c),{highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0})),i.call(this,c),this._readableState.sync=!1,this[r]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function n(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,p)=>{if(d){c?c(d):this.destroy(d);return}p!=null&&this.push(p),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==n&&n.call(this)}t.prototype._final=n,t.prototype._transform=function(c,d,p){throw new h("_transform()")},t.prototype._write=function(c,d,p){let w=this._readableState,g=this._writableState,y=w.length;this._transform(c,d,(E,b)=>{if(E){p(E);return}b!=null&&this.push(b),g.ended||y===w.length||w.length<w.highWaterMark?p():this[r]=p})},t.prototype._read=function(){if(this[r]){let c=this[r];this[r]=null,c()}}}),oo=de((s,f)=>{"use strict";oe(),ae(),se();var{ObjectSetPrototypeOf:o}=Ue();f.exports=h;var u=no();o(h.prototype,u.prototype),o(h,u);function h(i){if(!(this instanceof h))return new h(i);u.call(this,i)}h.prototype._transform=function(i,e,r){r(null,i)}}),Qi=de((s,f)=>{oe(),ae(),se();var o=Ot(),{ArrayIsArray:u,Promise:h,SymbolAsyncIterator:i,SymbolDispose:e}=Ue(),r=gt(),{once:t}=Ve(),n=Mt(),l=at(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:w,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:E}=He(),{validateFunction:b,validateAbortSignal:_}=Ht(),{isIterable:k,isReadable:T,isReadableNodeStream:S,isNodeStream:I,isTransformStream:C,isWebStream:W,isReadableStream:K,isReadableFinished:le}=ut(),U=globalThis.AbortController||qt().AbortController,V,Q,L;function pe(G,ve,$){let x=!1;G.on("close",()=>{x=!0});let J=r(G,{readable:ve,writable:$},H=>{x=!H});return{destroy:H=>{x||(x=!0,n.destroyer(G,H||new g("pipe")))},cleanup:J}}function ce(G){return b(G[G.length-1],"streams[stream.length - 1]"),G.pop()}function fe(G){if(k(G))return G;if(S(G))return me(G);throw new d("val",["Readable","Iterable","AsyncIterable"],G)}async function*me(G){Q||(Q=ar()),yield*Q.prototype[i].call(G)}async function q(G,ve,$,{end:x}){let J,H=null,F=ee=>{if(ee&&(J=ee),H){let R=H;H=null,R()}},D=()=>new h((ee,R)=>{J?R(J):H=()=>{J?R(J):ee()}});ve.on("drain",F);let ne=r(ve,{readable:!1},F);try{ve.writableNeedDrain&&await D();for await(let ee of G)ve.write(ee)||await D();x&&(ve.end(),await D()),$()}catch(ee){$(J!==ee?c(J,ee):ee)}finally{ne(),ve.off("drain",F)}}async function he(G,ve,$,{end:x}){C(ve)&&(ve=ve.writable);let J=ve.getWriter();try{for await(let H of G)await J.ready,J.write(H).catch(()=>{});await J.ready,x&&await J.close(),$()}catch(H){try{await J.abort(H),$(H)}catch(F){$(F)}}}function P(...G){return ue(G,t(ce(G)))}function ue(G,ve,$){if(G.length===1&&u(G[0])&&(G=G[0]),G.length<2)throw new w("streams");let x=new U,J=x.signal,H=$?.signal,F=[];_(H,"options.signal");function D(){X(new E)}L=L||Ve().addAbortListener;let ne;H&&(ne=L(H,D));let ee,R,M=[],z=0;function Z(re){X(re,--z===0)}function X(re,Ee){var a;if(re&&(!ee||ee.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ee=re),!(!ee&&!Ee)){for(;M.length;)M.shift()(ee);(a=ne)===null||a===void 0||a[e](),x.abort(),Ee&&(ee||F.forEach(m=>m()),o.nextTick(ve,ee,R))}}let ie;for(let re=0;re<G.length;re++){let Ee=G[re],a=re<G.length-1,m=re>0,v=a||$?.end!==!1,B=re===G.length-1;if(I(Ee)){let N=function(Y){Y&&Y.name!=="AbortError"&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Z(Y)};var j=N;if(v){let{destroy:Y,cleanup:ge}=pe(Ee,a,m);M.push(Y),T(Ee)&&B&&F.push(ge)}Ee.on("error",N),T(Ee)&&B&&F.push(()=>{Ee.removeListener("error",N)})}if(re===0)if(typeof Ee=="function"){if(ie=Ee({signal:J}),!k(ie))throw new p("Iterable, AsyncIterable or Stream","source",ie)}else k(Ee)||S(Ee)||C(Ee)?ie=Ee:ie=l.from(Ee);else if(typeof Ee=="function"){if(C(ie)){var te;ie=fe((te=ie)===null||te===void 0?void 0:te.readable)}else ie=fe(ie);if(ie=Ee(ie,{signal:J}),a){if(!k(ie,!0))throw new p("AsyncIterable",`transform[${re-1}]`,ie)}else{var ye;V||(V=oo());let N=new V({objectMode:!0}),Y=(ye=ie)===null||ye===void 0?void 0:ye.then;if(typeof Y=="function")z++,Y.call(ie,Te=>{R=Te,Te!=null&&N.write(Te),v&&N.end(),o.nextTick(Z)},Te=>{N.destroy(Te),o.nextTick(Z,Te)});else if(k(ie,!0))z++,q(ie,N,Z,{end:v});else if(K(ie)||C(ie)){let Te=ie.readable||ie;z++,q(Te,N,Z,{end:v})}else throw new p("AsyncIterable or Promise","destination",ie);ie=N;let{destroy:ge,cleanup:Ae}=pe(ie,!1,!0);M.push(ge),B&&F.push(Ae)}}else if(I(Ee)){if(S(ie)){z+=2;let N=we(ie,Ee,Z,{end:v});T(Ee)&&B&&F.push(N)}else if(C(ie)||K(ie)){let N=ie.readable||ie;z++,q(N,Ee,Z,{end:v})}else if(k(ie))z++,q(ie,Ee,Z,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ee}else if(W(Ee)){if(S(ie))z++,he(fe(ie),Ee,Z,{end:v});else if(K(ie)||k(ie))z++,he(ie,Ee,Z,{end:v});else if(C(ie))z++,he(ie.readable,Ee,Z,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ee}else ie=l.from(Ee)}return(J!=null&&J.aborted||H!=null&&H.aborted)&&o.nextTick(D),ie}function we(G,ve,$,{end:x}){let J=!1;if(ve.on("close",()=>{J||$(new y)}),G.pipe(ve,{end:!1}),x){let F=function(){J=!0,ve.end()};var H=F;le(G)?o.nextTick(F):G.once("end",F)}else $();return r(G,{readable:!0,writable:!1},F=>{let D=G._readableState;F&&F.code==="ERR_STREAM_PREMATURE_CLOSE"&&D&&D.ended&&!D.errored&&!D.errorEmitted?G.once("end",$).once("error",$):$(F)}),r(ve,{readable:!1,writable:!0},$)}f.exports={pipelineImpl:ue,pipeline:P}}),so=de((s,f)=>{"use strict";oe(),ae(),se();var{pipeline:o}=Qi(),u=at(),{destroyer:h}=Mt(),{isNodeStream:i,isReadable:e,isWritable:r,isWebStream:t,isTransformStream:n,isWritableStream:l,isReadableStream:c}=ut(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:w}}=He(),g=gt();f.exports=function(...y){if(y.length===0)throw new w("streams");if(y.length===1)return u.from(y[0]);let E=[...y];if(typeof y[0]=="function"&&(y[0]=u.from(y[0])),typeof y[y.length-1]=="function"){let U=y.length-1;y[U]=u.from(y[U])}for(let U=0;U<y.length;++U)if(!(!i(y[U])&&!t(y[U]))){if(U<y.length-1&&!(e(y[U])||c(y[U])||n(y[U])))throw new p(`streams[${U}]`,E[U],"must be readable");if(U>0&&!(r(y[U])||l(y[U])||n(y[U])))throw new p(`streams[${U}]`,E[U],"must be writable")}let b,_,k,T,S;function I(U){let V=T;T=null,V?V(U):U?S.destroy(U):!le&&!K&&S.destroy()}let C=y[0],W=o(y,I),K=!!(r(C)||l(C)||n(C)),le=!!(e(W)||c(W)||n(W));if(S=new u({writableObjectMode:!!(C!=null&&C.writableObjectMode),readableObjectMode:!!(W!=null&&W.readableObjectMode),writable:K,readable:le}),K){if(i(C))S._write=function(V,Q,L){C.write(V,Q)?L():b=L},S._final=function(V){C.end(),_=V},C.on("drain",function(){if(b){let V=b;b=null,V()}});else if(t(C)){let V=(n(C)?C.writable:C).getWriter();S._write=async function(Q,L,pe){try{await V.ready,V.write(Q).catch(()=>{}),pe()}catch(ce){pe(ce)}},S._final=async function(Q){try{await V.ready,V.close().catch(()=>{}),_=Q}catch(L){Q(L)}}}let U=n(W)?W.readable:W;g(U,()=>{if(_){let V=_;_=null,V()}})}if(le){if(i(W))W.on("readable",function(){if(k){let U=k;k=null,U()}}),W.on("end",function(){S.push(null)}),S._read=function(){for(;;){let U=W.read();if(U===null){k=S._read;return}if(!S.push(U))return}};else if(t(W)){let U=(n(W)?W.readable:W).getReader();S._read=async function(){for(;;)try{let{value:V,done:Q}=await U.read();if(!S.push(V))return;if(Q){S.push(null);return}}catch{return}}}}return S._destroy=function(U,V){!U&&T!==null&&(U=new d),k=null,b=null,_=null,T===null?V(U):(T=V,i(W)&&h(W,U))},S}}),Ls=de((s,f)=>{"use strict";oe(),ae(),se();var o=globalThis.AbortController||qt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:u,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:e},AbortError:r}=He(),{validateAbortSignal:t,validateInteger:n,validateObject:l}=Ht(),c=Ue().Symbol("kWeak"),d=Ue().Symbol("kResistStopPropagation"),{finished:p}=gt(),w=so(),{addAbortSignalNoValidate:g}=or(),{isWritable:y,isNodeStream:E}=ut(),{deprecate:b}=Ve(),{ArrayPrototypePush:_,Boolean:k,MathFloor:T,Number:S,NumberIsNaN:I,Promise:C,PromiseReject:W,PromiseResolve:K,PromisePrototypeThen:le,Symbol:U}=Ue(),V=U("kEmpty"),Q=U("kEof");function L(H,F){if(F!=null&&l(F,"options"),F?.signal!=null&&t(F.signal,"options.signal"),E(H)&&!y(H))throw new u("stream",H,"must be writable");let D=w(this,H);return F!=null&&F.signal&&g(F.signal,D),D}function pe(H,F){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);F!=null&&l(F,"options"),F?.signal!=null&&t(F.signal,"options.signal");let D=1;F?.concurrency!=null&&(D=T(F.concurrency));let ne=D-1;return F?.highWaterMark!=null&&(ne=T(F.highWaterMark)),n(D,"options.concurrency",1),n(ne,"options.highWaterMark",0),ne+=D,async function*(){let ee=Ve().AbortSignalAny([F?.signal].filter(k)),R=this,M=[],z={signal:ee},Z,X,ie=!1,j=0;function te(){ie=!0,ye()}function ye(){j-=1,re()}function re(){X&&!ie&&j<D&&M.length<ne&&(X(),X=null)}async function Ee(){try{for await(let a of R){if(ie)return;if(ee.aborted)throw new r;try{if(a=H(a,z),a===V)continue;a=K(a)}catch(m){a=W(m)}j+=1,le(a,ye,te),M.push(a),Z&&(Z(),Z=null),!ie&&(M.length>=ne||j>=D)&&await new C(m=>{X=m})}M.push(Q)}catch(a){let m=W(a);le(m,ye,te),M.push(m)}finally{ie=!0,Z&&(Z(),Z=null)}}Ee();try{for(;;){for(;M.length>0;){let a=await M[0];if(a===Q)return;if(ee.aborted)throw new r;a!==V&&(yield a),M.shift(),re()}await new C(a=>{Z=a})}}finally{ie=!0,X&&(X(),X=null)}}.call(this)}function ce(H=void 0){return H!=null&&l(H,"options"),H?.signal!=null&&t(H.signal,"options.signal"),async function*(){let F=0;for await(let ne of this){var D;if(H!=null&&(D=H.signal)!==null&&D!==void 0&&D.aborted)throw new r({cause:H.signal.reason});yield[F++,ne]}}.call(this)}async function fe(H,F=void 0){for await(let D of P.call(this,H,F))return!0;return!1}async function me(H,F=void 0){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);return!await fe.call(this,async(...D)=>!await H(...D),F)}async function q(H,F){for await(let D of P.call(this,H,F))return D}async function he(H,F){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);async function D(ne,ee){return await H(ne,ee),V}for await(let ne of pe.call(this,D,F));}function P(H,F){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);async function D(ne,ee){return await H(ne,ee)?ne:V}return pe.call(this,D,F)}var ue=class extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function we(H,F,D){var ne;if(typeof H!="function")throw new h("reducer",["Function","AsyncFunction"],H);D!=null&&l(D,"options"),D?.signal!=null&&t(D.signal,"options.signal");let ee=arguments.length>1;if(D!=null&&(ne=D.signal)!==null&&ne!==void 0&&ne.aborted){let X=new r(void 0,{cause:D.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(X)),X}let R=new o,M=R.signal;if(D!=null&&D.signal){let X={once:!0,[c]:this,[d]:!0};D.signal.addEventListener("abort",()=>R.abort(),X)}let z=!1;try{for await(let X of this){var Z;if(z=!0,D!=null&&(Z=D.signal)!==null&&Z!==void 0&&Z.aborted)throw new r;ee?F=await H(F,X,{signal:M}):(F=X,ee=!0)}if(!z&&!ee)throw new ue}finally{R.abort()}return F}async function G(H){H!=null&&l(H,"options"),H?.signal!=null&&t(H.signal,"options.signal");let F=[];for await(let ne of this){var D;if(H!=null&&(D=H.signal)!==null&&D!==void 0&&D.aborted)throw new r(void 0,{cause:H.signal.reason});_(F,ne)}return F}function ve(H,F){let D=pe.call(this,H,F);return async function*(){for await(let ne of D)yield*ne}.call(this)}function $(H){if(H=S(H),I(H))return 0;if(H<0)throw new e("number",">= 0",H);return H}function x(H,F=void 0){return F!=null&&l(F,"options"),F?.signal!=null&&t(F.signal,"options.signal"),H=$(H),async function*(){var D;if(F!=null&&(D=F.signal)!==null&&D!==void 0&&D.aborted)throw new r;for await(let ee of this){var ne;if(F!=null&&(ne=F.signal)!==null&&ne!==void 0&&ne.aborted)throw new r;H--<=0&&(yield ee)}}.call(this)}function J(H,F=void 0){return F!=null&&l(F,"options"),F?.signal!=null&&t(F.signal,"options.signal"),H=$(H),async function*(){var D;if(F!=null&&(D=F.signal)!==null&&D!==void 0&&D.aborted)throw new r;for await(let ee of this){var ne;if(F!=null&&(ne=F.signal)!==null&&ne!==void 0&&ne.aborted)throw new r;if(H-- >0&&(yield ee),H<=0)return}}.call(this)}f.exports.streamReturningOperators={asIndexedPairs:b(ce,"readable.asIndexedPairs will be removed in a future version."),drop:x,filter:P,flatMap:ve,map:pe,take:J,compose:L},f.exports.promiseReturningOperators={every:me,forEach:he,reduce:we,toArray:G,some:fe,find:q}}),ao=de((s,f)=>{"use strict";oe(),ae(),se();var{ArrayPrototypePop:o,Promise:u}=Ue(),{isIterable:h,isNodeStream:i,isWebStream:e}=ut(),{pipelineImpl:r}=Qi(),{finished:t}=gt();lo();function n(...l){return new u((c,d)=>{let p,w,g=l[l.length-1];if(g&&typeof g=="object"&&!i(g)&&!h(g)&&!e(g)){let y=o(l);p=y.signal,w=y.end}r(l,(y,E)=>{y?d(y):c(E)},{signal:p,end:w})})}f.exports={finished:t,pipeline:n}}),lo=de((s,f)=>{"use strict";oe(),ae(),se();var{Buffer:o}=(De(),Re(Ne)),{ObjectDefineProperty:u,ObjectKeys:h,ReflectApply:i}=Ue(),{promisify:{custom:e}}=Ve(),{streamReturningOperators:r,promiseReturningOperators:t}=Ls(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:n}}=He(),l=so(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=sr(),{pipeline:p}=Qi(),{destroyer:w}=Mt(),g=gt(),y=ao(),E=ut(),b=f.exports=Vi().Stream;b.isDestroyed=E.isDestroyed,b.isDisturbed=E.isDisturbed,b.isErrored=E.isErrored,b.isReadable=E.isReadable,b.isWritable=E.isWritable,b.Readable=ar();for(let k of h(r)){let T=function(...I){if(new.target)throw n();return b.Readable.from(i(S,this,I))},S=r[k];u(T,"name",{__proto__:null,value:S.name}),u(T,"length",{__proto__:null,value:S.length}),u(b.Readable.prototype,k,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let k of h(t)){let T=function(...I){if(new.target)throw n();return i(S,this,I)},S=t[k];u(T,"name",{__proto__:null,value:S.name}),u(T,"length",{__proto__:null,value:S.length}),u(b.Readable.prototype,k,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}b.Writable=zi(),b.Duplex=at(),b.Transform=no(),b.PassThrough=oo(),b.pipeline=p;var{addAbortSignal:_}=or();b.addAbortSignal=_,b.finished=g,b.destroy=w,b.compose=l,b.setDefaultHighWaterMark=c,b.getDefaultHighWaterMark=d,u(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return y}}),u(p,e,{__proto__:null,enumerable:!0,get(){return y.pipeline}}),u(g,e,{__proto__:null,enumerable:!0,get(){return y.finished}}),b.Stream=b,b._isUint8Array=function(k){return k instanceof Uint8Array},b._uint8ArrayToBuffer=function(k){return o.from(k.buffer,k.byteOffset,k.byteLength)}}),Pt=de((s,f)=>{"use strict";oe(),ae(),se();var o=lo(),u=ao(),h=o.Readable.destroy;f.exports=o.Readable,f.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,f.exports._isUint8Array=o._isUint8Array,f.exports.isDisturbed=o.isDisturbed,f.exports.isErrored=o.isErrored,f.exports.isReadable=o.isReadable,f.exports.Readable=o.Readable,f.exports.Writable=o.Writable,f.exports.Duplex=o.Duplex,f.exports.Transform=o.Transform,f.exports.PassThrough=o.PassThrough,f.exports.addAbortSignal=o.addAbortSignal,f.exports.finished=o.finished,f.exports.destroy=o.destroy,f.exports.destroy=h,f.exports.pipeline=o.pipeline,f.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return u}}),f.exports.Stream=o.Stream,f.exports.default=f.exports}),Ns=de((s,f)=>{oe(),ae(),se(),typeof Object.create=="function"?f.exports=function(o,u){u&&(o.super_=u,o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:f.exports=function(o,u){if(u){o.super_=u;var h=function(){};h.prototype=u.prototype,o.prototype=new h,o.prototype.constructor=o}}}),Ds=de((s,f)=>{"use strict";oe(),ae(),se();var{Buffer:o}=(De(),Re(Ne)),u=Symbol.for("BufferList");function h(i){if(!(this instanceof h))return new h(i);h._init.call(this,i)}h._init=function(i){Object.defineProperty(this,u,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},h.prototype._new=function(i){return new h(i)},h.prototype._offset=function(i){if(i===0)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){let t=e+this._bufs[r].length;if(i<t||r===this._bufs.length-1)return[r,i-e];e=t}},h.prototype._reverseOffset=function(i){let e=i[0],r=i[1];for(let t=0;t<e;t++)r+=this._bufs[t].length;return r},h.prototype.get=function(i){if(i>this.length||i<0)return;let e=this._offset(i);return this._bufs[e[0]][e[1]]},h.prototype.slice=function(i,e){return typeof i=="number"&&i<0&&(i+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,i,e)},h.prototype.copy=function(i,e,r,t){if((typeof r!="number"||r<0)&&(r=0),(typeof t!="number"||t>this.length)&&(t=this.length),r>=this.length||t<=0)return i||o.alloc(0);let n=!!i,l=this._offset(r),c=t-r,d=c,p=n&&e||0,w=l[1];if(r===0&&t===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let g=0;g<this._bufs.length;g++)this._bufs[g].copy(i,p),p+=this._bufs[g].length;return i}if(d<=this._bufs[l[0]].length-w)return n?this._bufs[l[0]].copy(i,e,w,w+d):this._bufs[l[0]].slice(w,w+d);n||(i=o.allocUnsafe(c));for(let g=l[0];g<this._bufs.length;g++){let y=this._bufs[g].length-w;if(d>y)this._bufs[g].copy(i,p,w),p+=y;else{this._bufs[g].copy(i,p,w,w+d),p+=y;break}d-=y,w&&(w=0)}return i.length>p?i.slice(0,p):i},h.prototype.shallowSlice=function(i,e){if(i=i||0,e=typeof e!="number"?this.length:e,i<0&&(i+=this.length),e<0&&(e+=this.length),i===e)return this._new();let r=this._offset(i),t=this._offset(e),n=this._bufs.slice(r[0],t[0]+1);return t[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,t[1]),r[1]!==0&&(n[0]=n[0].slice(r[1])),this._new(n)},h.prototype.toString=function(i,e,r){return this.slice(e,r).toString(i)},h.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this},h.prototype.duplicate=function(){let i=this._new();for(let e=0;e<this._bufs.length;e++)i.append(this._bufs[e]);return i},h.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(o.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let e=0;e<i.length;e++)this.append(i[e]);else if(this._isBufferList(i))for(let e=0;e<i._bufs.length;e++)this.append(i._bufs[e]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(o.from(i));return this},h.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},h.prototype.indexOf=function(i,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof i=="function"||Array.isArray(i))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof i=="number"?i=o.from([i]):typeof i=="string"?i=o.from(i,r):this._isBufferList(i)?i=i.slice():Array.isArray(i.buffer)?i=o.from(i.buffer,i.byteOffset,i.byteLength):o.isBuffer(i)||(i=o.from(i)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),i.length===0)return e>this.length?this.length:e;let t=this._offset(e),n=t[0],l=t[1];for(;n<this._bufs.length;n++){let c=this._bufs[n];for(;l<c.length;)if(c.length-l>=i.length){let d=c.indexOf(i,l);if(d!==-1)return this._reverseOffset([n,d]);l=c.length-i.length+1}else{let d=this._reverseOffset([n,l]);if(this._match(d,i))return d;l++}l=0}return-1},h.prototype._match=function(i,e){if(this.length-i<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(i+r)!==e[r])return!1;return!0},function(){let i={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in i)(function(r){i[r]===null?h.prototype[r]=function(t,n){return this.slice(t,t+n)[r](0,n)}:h.prototype[r]=function(t=0){return this.slice(t,t+i[r])[r](0)}})(e)}(),h.prototype._isBufferList=function(i){return i instanceof h||h.isBufferList(i)},h.isBufferList=function(i){return i!=null&&i[u]},f.exports=h}),Fs=de((s,f)=>{"use strict";oe(),ae(),se();var o=Pt().Duplex,u=Ns(),h=Ds();function i(e){if(!(this instanceof i))return new i(e);if(typeof e=="function"){this._callback=e;let r=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)}),e=null}h._init.call(this,e),o.call(this)}u(i,o),Object.assign(i.prototype,h.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,r,t){this._appendBuffer(e),typeof t=="function"&&t()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof h||i.isBufferList(e)},i.isBufferList=h.isBufferList,f.exports=i,f.exports.BufferListStream=i,f.exports.BufferList=h}),Ws=de((s,f)=>{oe(),ae(),se();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};f.exports=o}),uo=de((s,f)=>{oe(),ae(),se();var o=f.exports,{Buffer:u}=(De(),Re(Ne));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let i in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[i];o.requiredHeaderFlagsErrors[i]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[i]+" packet"}o.codes={};for(let i in o.types){let e=o.types[i];o.codes[e]=i}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=u.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=u.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=u.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let i in o.properties){let e=o.properties[i];o.propertiesCodes[e]=i}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(i){return[0,1,2].map(e=>[0,1].map(r=>[0,1].map(t=>{let n=u.alloc(1);return n.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|e<<o.QOS_SHIFT|t,0,!0),n})))}o.PUBLISH_HEADER=h("publish"),o.SUBSCRIBE_HEADER=h("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=h("unsubscribe"),o.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},o.SUBACK_HEADER=u.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=u.from([3]),o.VERSION4=u.from([4]),o.VERSION5=u.from([5]),o.VERSION131=u.from([131]),o.VERSION132=u.from([132]),o.QOS=[0,1,2].map(i=>u.from([i])),o.EMPTY={pingreq:u.from([o.codes.pingreq<<4,0]),pingresp:u.from([o.codes.pingresp<<4,0]),disconnect:u.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),$s=de((s,f)=>{oe(),ae(),se();var o=1e3,u=o*60,h=u*60,i=h*24,e=i*7,r=i*365.25;f.exports=function(d,p){p=p||{};var w=typeof d;if(w==="string"&&d.length>0)return t(d);if(w==="number"&&isFinite(d))return p.long?l(d):n(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function t(d){if(d=String(d),!(d.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var w=parseFloat(p[1]),g=(p[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return w*r;case"weeks":case"week":case"w":return w*e;case"days":case"day":case"d":return w*i;case"hours":case"hour":case"hrs":case"hr":case"h":return w*h;case"minutes":case"minute":case"mins":case"min":case"m":return w*u;case"seconds":case"second":case"secs":case"sec":case"s":return w*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function n(d){var p=Math.abs(d);return p>=i?Math.round(d/i)+"d":p>=h?Math.round(d/h)+"h":p>=u?Math.round(d/u)+"m":p>=o?Math.round(d/o)+"s":d+"ms"}function l(d){var p=Math.abs(d);return p>=i?c(d,p,i,"day"):p>=h?c(d,p,h,"hour"):p>=u?c(d,p,u,"minute"):p>=o?c(d,p,o,"second"):d+" ms"}function c(d,p,w,g){var y=p>=w*1.5;return Math.round(d/w)+" "+g+(y?"s":"")}}),qs=de((s,f)=>{oe(),ae(),se();function o(u){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=r,i.enabled=l,i.humanize=$s(),i.destroy=d,Object.keys(u).forEach(p=>{i[p]=u[p]}),i.names=[],i.skips=[],i.formatters={};function h(p){let w=0;for(let g=0;g<p.length;g++)w=(w<<5)-w+p.charCodeAt(g),w|=0;return i.colors[Math.abs(w)%i.colors.length]}i.selectColor=h;function i(p){let w,g=null,y,E;function b(..._){if(!b.enabled)return;let k=b,T=Number(new Date),S=T-(w||T);k.diff=S,k.prev=w,k.curr=T,w=T,_[0]=i.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let I=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(C,W)=>{if(C==="%%")return"%";I++;let K=i.formatters[W];if(typeof K=="function"){let le=_[I];C=K.call(k,le),_.splice(I,1),I--}return C}),i.formatArgs.call(k,_),(k.log||i.log).apply(k,_)}return b.namespace=p,b.useColors=i.useColors(),b.color=i.selectColor(p),b.extend=e,b.destroy=i.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==i.namespaces&&(y=i.namespaces,E=i.enabled(p)),E),set:_=>{g=_}}),typeof i.init=="function"&&i.init(b),b}function e(p,w){let g=i(this.namespace+(typeof w>"u"?":":w)+p);return g.log=this.log,g}function r(p){i.save(p),i.namespaces=p,i.names=[],i.skips=[];let w=(typeof p=="string"?p:"").trim().replace(" ",",").split(",").filter(Boolean);for(let g of w)g[0]==="-"?i.skips.push(g.slice(1)):i.names.push(g)}function t(p,w){let g=0,y=0,E=-1,b=0;for(;g<p.length;)if(y<w.length&&(w[y]===p[g]||w[y]==="*"))w[y]==="*"?(E=y,b=g,y++):(g++,y++);else if(E!==-1)y=E+1,b++,g=b;else return!1;for(;y<w.length&&w[y]==="*";)y++;return y===w.length}function n(){let p=[...i.names,...i.skips.map(w=>"-"+w)].join(",");return i.enable(""),p}function l(p){for(let w of i.skips)if(t(p,w))return!1;for(let w of i.names)if(t(p,w))return!0;return!1}function c(p){return p instanceof Error?p.stack||p.message:p}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}f.exports=o}),lt=de((s,f)=>{oe(),ae(),se(),s.formatArgs=u,s.save=h,s.load=i,s.useColors=o,s.storage=e(),s.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+f.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;t.splice(1,0,n,"color: inherit");let l=0,c=0;t[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(c=l))}),t.splice(c,0,n)}s.log=console.debug||console.log||(()=>{});function h(t){try{t?s.storage.setItem("debug",t):s.storage.removeItem("debug")}catch{}}function i(){let t;try{t=s.storage.getItem("debug")}catch{}return!t&&typeof Ie<"u"&&"env"in Ie&&(t=Ie.env.DEBUG),t}function e(){try{return localStorage}catch{}}f.exports=qs()(s);var{formatters:r}=f.exports;r.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}),Hs=de((s,f)=>{oe(),ae(),se();var o=Fs(),{EventEmitter:u}=(Tt(),Re(pt)),h=Ws(),i=uo(),e=lt()("mqtt-packet:parser"),r=class xi extends u{constructor(){super(),this.parser=this.constructor.parser}static parser(n){return this instanceof xi?(this.settings=n||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new xi().parser(n)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=o(),this._stateCounter=0}parse(n){for(this.error&&this._resetState(),this._list.append(n),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let n=this._list.readUInt8(0),l=n>>i.CMD_SHIFT;this.packet.cmd=i.types[l];let c=n&15,d=i.requiredHeaderFlags[l];return d!=null&&c!==d?this._emitError(new Error(i.requiredHeaderFlagsErrors[l])):(this.packet.retain=(n&i.RETAIN_MASK)!==0,this.packet.qos=n>>i.QOS_SHIFT&i.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(n&i.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let n=this._parseVarByteNum(!0);return n&&(this.packet.length=n.value,this._list.consume(n.bytes)),e("_parseLength %d",n.value),!!n}_parsePayload(){e("_parsePayload: payload %O",this._list);let n=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}n=!0}return e("_parsePayload complete result: %s",n),n}_parseConnect(){e("_parseConnect");let n,l,c,d,p={},w=this.packet,g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse protocolId"));if(g!=="MQTT"&&g!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(w.protocolId=g,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(w.protocolVersion=this._list.readUInt8(this._pos),w.protocolVersion>=128&&(w.bridgeMode=!0,w.protocolVersion=w.protocolVersion-128),w.protocolVersion!==3&&w.protocolVersion!==4&&w.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));p.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK;let y=!!(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT;if(p.will)w.will={},w.will.retain=y,w.will.qos=E;else{if(y)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(w.clean=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK)!==0,this._pos++,w.keepalive=this._parseNum(),w.keepalive===-1)return this._emitError(new Error("Packet too short"));if(w.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(w.properties=_)}let b=this._parseString();if(b===null)return this._emitError(new Error("Packet too short"));if(w.clientId=b,e("_parseConnect: packet.clientId: %s",w.clientId),p.will){if(w.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(w.will.properties=_)}if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse will topic"));if(w.will.topic=n,e("_parseConnect: packet.will.topic: %s",w.will.topic),l=this._parseBuffer(),l===null)return this._emitError(new Error("Cannot parse will payload"));w.will.payload=l,e("_parseConnect: packet.will.paylaod: %s",w.will.payload)}if(p.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));w.username=d,e("_parseConnect: packet.username: %s",w.username)}if(p.password){if(c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse password"));w.password=c}return this.settings=w,e("_parseConnect: complete"),w}_parseConnack(){e("_parseConnack");let n=this.packet;if(this._list.length<1)return null;let l=this._list.readUInt8(this._pos++);if(l>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(n.sessionPresent=!!(l&i.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?n.reasonCode=this._list.readUInt8(this._pos++):n.reasonCode=0;else{if(this._list.length<2)return null;n.returnCode=this._list.readUInt8(this._pos++)}if(n.returnCode===-1||n.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(n.properties=c)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let n=this.packet;if(n.topic=this._parseString(),n.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(n.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}n.payload=this._list.slice(this._pos,n.length),e("_parsePublish: payload from buffer list: %o",n.payload)}}_parseSubscribe(){e("_parseSubscribe");let n=this.packet,l,c,d,p,w,g,y;if(n.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(n.properties=E)}if(n.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<n.length;){if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(c=this._parseByte(),this.settings.protocolVersion===5){if(c&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(c&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=c&i.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(g=(c>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK)!==0,w=(c>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,p=c>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,p>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));y={topic:l,qos:d},this.settings.protocolVersion===5?(y.nl=g,y.rap=w,y.rh=p):this.settings.bridgeMode&&(y.rh=0,y.rap=!0,y.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",y),n.subscriptions.push(y)}}}_parseSuback(){e("_parseSuback");let n=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!i.MQTT5_SUBACK_CODES[l])return this._emitError(new Error("Invalid suback code"))}else if(l>2&&l!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let n=this.packet;if(n.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<n.length;){let l=this._parseString();if(l===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",l),n.unsubscriptions.push(l)}}}_parseUnsuback(){e("_parseUnsuback");let n=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&n.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(n.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let l=this._parseProperties();for(Object.getOwnPropertyNames(l).length&&(n.properties=l),n.granted=[];this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(!i.MQTT5_UNSUBACK_CODES[c])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(c)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let n=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(n.length>2){switch(n.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!i.MQTT5_PUBACK_PUBREC_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!i.MQTT5_PUBREL_PUBCOMP_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",n.reasonCode)}else n.reasonCode=0;if(n.length>3){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}}return!0}_parseDisconnect(){let n=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(n.reasonCode=this._parseByte(),i.MQTT5_DISCONNECT_CODES[n.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):n.reasonCode=0;let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let n=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(n.reasonCode=this._parseByte(),!i.MQTT5_AUTH_CODES[n.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let l=this._parseProperties();return Object.getOwnPropertyNames(l).length&&(n.properties=l),e("_parseAuth: result: true"),!0}_parseMessageId(){let n=this.packet;return n.messageId=this._parseNum(),n.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",n.messageId),!0)}_parseString(n){let l=this._parseNum(),c=l+this._pos;if(l===-1||c>this._list.length||c>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,c);return this._pos+=l,e("_parseString: result: %s",d),d}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let n=this._parseNum(),l=n+this._pos;if(n===-1||l>this._list.length||l>this.packet.length)return null;let c=this._list.slice(this._pos,l);return this._pos+=n,e("_parseBuffer: result: %o",c),c}_parseNum(){if(this._list.length-this._pos<2)return-1;let n=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",n),n}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let n=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",n),n}_parseVarByteNum(n){e("_parseVarByteNum");let l=4,c=0,d=1,p=0,w=!1,g,y=this._pos?this._pos:0;for(;c<l&&y+c<this._list.length;){if(g=this._list.readUInt8(y+c++),p+=d*(g&i.VARBYTEINT_MASK),d*=128,(g&i.VARBYTEINT_FIN_MASK)===0){w=!0;break}if(this._list.length<=c)break}return!w&&c===l&&this._list.length>=c&&this._emitError(new Error("Invalid variable byte integer")),y&&(this._pos+=c),w?n?w={bytes:c,value:p}:w=p:w=!1,e("_parseVarByteNum: result: %o",w),w}_parseByte(){let n;return this._pos<this._list.length&&(n=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",n),n}_parseByType(n){switch(e("_parseByType: type: %s",n),n){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let n=this._parseVarByteNum(),l=this._pos+n,c={};for(;this._pos<l;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let p=i.propertiesCodes[d];if(!p)return this._emitError(new Error("Unknown property")),!1;if(p==="userProperties"){c[p]||(c[p]=Object.create(null));let w=this._parseByType(i.propertiesTypes[p]);if(c[p][w.name])if(Array.isArray(c[p][w.name]))c[p][w.name].push(w.value);else{let g=c[p][w.name];c[p][w.name]=[g],c[p][w.name].push(w.value)}else c[p][w.name]=w.value;continue}c[p]?Array.isArray(c[p])?c[p].push(this._parseByType(i.propertiesTypes[p])):(c[p]=[c[p]],c[p].push(this._parseByType(i.propertiesTypes[p]))):c[p]=this._parseByType(i.propertiesTypes[p])}return c}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(n){e("_emitError",n),this.error=n,this.emit("error",n)}};f.exports=r}),Vs=de((s,f)=>{oe(),ae(),se();var{Buffer:o}=(De(),Re(Ne)),u=65536,h={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function e(l){let c=o.allocUnsafe(2);return c.writeUInt8(l>>8,0),c.writeUInt8(l&255,1),c}function r(){for(let l=0;l<u;l++)h[l]=e(l)}function t(l){let c=0,d=0,p=o.allocUnsafe(4);do c=l%128|0,l=l/128|0,l>0&&(c=c|128),p.writeUInt8(c,d++);while(l>0&&d<4);return l>0&&(d=0),i?p.subarray(0,d):p.slice(0,d)}function n(l){let c=o.allocUnsafe(4);return c.writeUInt32BE(l,0),c}f.exports={cache:h,generateCache:r,generateNumber:e,genBufVariableByteInt:t,generate4ByteBuffer:n}}),zs=de((s,f)=>{"use strict";oe(),ae(),se(),typeof Ie>"u"||!Ie.version||Ie.version.indexOf("v0.")===0||Ie.version.indexOf("v1.")===0&&Ie.version.indexOf("v1.8.")!==0?f.exports={nextTick:o}:f.exports=Ie;function o(u,h,i,e){if(typeof u!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,t,n;switch(r){case 0:case 1:return Ie.nextTick(u);case 2:return Ie.nextTick(function(){u.call(null,h)});case 3:return Ie.nextTick(function(){u.call(null,h,i)});case 4:return Ie.nextTick(function(){u.call(null,h,i,e)});default:for(t=new Array(r-1),n=0;n<t.length;)t[n++]=arguments[n];return Ie.nextTick(function(){u.apply(null,t)})}}}),ho=de((s,f)=>{oe(),ae(),se();var o=uo(),{Buffer:u}=(De(),Re(Ne)),h=u.allocUnsafe(0),i=u.from([0]),e=Vs(),r=zs().nextTick,t=lt()("mqtt-packet:writeToStream"),n=e.cache,l=e.generateNumber,c=e.generateCache,d=e.genBufVariableByteInt,p=e.generate4ByteBuffer,w=ce,g=!0;function y($,x,J){switch(t("generate called"),x.cork&&(x.cork(),r(E,x)),g&&(g=!1,c()),t("generate: packet.cmd: %s",$.cmd),$.cmd){case"connect":return b($,x,J);case"connack":return _($,x,J);case"publish":return k($,x,J);case"puback":case"pubrec":case"pubrel":case"pubcomp":return T($,x,J);case"subscribe":return S($,x,J);case"suback":return I($,x,J);case"unsubscribe":return C($,x,J);case"unsuback":return W($,x,J);case"pingreq":case"pingresp":return K($,x,J);case"disconnect":return le($,x,J);case"auth":return U($,x,J);default:return x.destroy(new Error("Unknown command")),!1}}Object.defineProperty(y,"cacheNumbers",{get(){return w===ce},set($){$?((!n||Object.keys(n).length===0)&&(g=!0),w=ce):(g=!1,w=fe)}});function E($){$.uncork()}function b($,x,J){let H=$||{},F=H.protocolId||"MQTT",D=H.protocolVersion||4,ne=H.will,ee=H.clean,R=H.keepalive||0,M=H.clientId||"",z=H.username,Z=H.password,X=H.properties;ee===void 0&&(ee=!0);let ie=0;if(!F||typeof F!="string"&&!u.isBuffer(F))return x.destroy(new Error("Invalid protocolId")),!1;if(ie+=F.length+2,D!==3&&D!==4&&D!==5)return x.destroy(new Error("Invalid protocol version")),!1;if(ie+=1,(typeof M=="string"||u.isBuffer(M))&&(M||D>=4)&&(M||ee))ie+=u.byteLength(M)+2;else{if(D<4)return x.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ee*1===0)return x.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!==0)return x.destroy(new Error("Invalid keepalive")),!1;ie+=2,ie+=1;let j,te;if(D===5){if(j=he(x,X),!j)return!1;ie+=j.length}if(ne){if(typeof ne!="object")return x.destroy(new Error("Invalid will")),!1;if(!ne.topic||typeof ne.topic!="string")return x.destroy(new Error("Invalid will topic")),!1;if(ie+=u.byteLength(ne.topic)+2,ie+=2,ne.payload)if(ne.payload.length>=0)typeof ne.payload=="string"?ie+=u.byteLength(ne.payload):ie+=ne.payload.length;else return x.destroy(new Error("Invalid will payload")),!1;if(te={},D===5){if(te=he(x,ne.properties),!te)return!1;ie+=te.length}}let ye=!1;if(z!=null)if(ve(z))ye=!0,ie+=u.byteLength(z)+2;else return x.destroy(new Error("Invalid username")),!1;if(Z!=null){if(!ye)return x.destroy(new Error("Username is required to use password")),!1;if(ve(Z))ie+=G(Z)+2;else return x.destroy(new Error("Invalid password")),!1}x.write(o.CONNECT_HEADER),Q(x,ie),q(x,F),H.bridgeMode&&(D+=128),x.write(D===131?o.VERSION131:D===132?o.VERSION132:D===4?o.VERSION4:D===5?o.VERSION5:o.VERSION3);let re=0;return re|=z!=null?o.USERNAME_MASK:0,re|=Z!=null?o.PASSWORD_MASK:0,re|=ne&&ne.retain?o.WILL_RETAIN_MASK:0,re|=ne&&ne.qos?ne.qos<<o.WILL_QOS_SHIFT:0,re|=ne?o.WILL_FLAG_MASK:0,re|=ee?o.CLEAN_SESSION_MASK:0,x.write(u.from([re])),w(x,R),D===5&&j.write(),q(x,M),ne&&(D===5&&te.write(),L(x,ne.topic),q(x,ne.payload)),z!=null&&q(x,z),Z!=null&&q(x,Z),!0}function _($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=H===5?F.reasonCode:F.returnCode,ne=F.properties,ee=2;if(typeof D!="number")return x.destroy(new Error("Invalid return code")),!1;let R=null;if(H===5){if(R=he(x,ne),!R)return!1;ee+=R.length}return x.write(o.CONNACK_HEADER),Q(x,ee),x.write(F.sessionPresent?o.SESSIONPRESENT_HEADER:i),x.write(u.from([D])),R?.write(),!0}function k($,x,J){t("publish: packet: %o",$);let H=J?J.protocolVersion:4,F=$||{},D=F.qos||0,ne=F.retain?o.RETAIN_MASK:0,ee=F.topic,R=F.payload||h,M=F.messageId,z=F.properties,Z=0;if(typeof ee=="string")Z+=u.byteLength(ee)+2;else if(u.isBuffer(ee))Z+=ee.length+2;else return x.destroy(new Error("Invalid topic")),!1;if(u.isBuffer(R)?Z+=R.length:Z+=u.byteLength(R),D&&typeof M!="number")return x.destroy(new Error("Invalid messageId")),!1;D&&(Z+=2);let X=null;if(H===5){if(X=he(x,z),!X)return!1;Z+=X.length}return x.write(o.PUBLISH_HEADER[D][F.dup?1:0][ne?1:0]),Q(x,Z),w(x,G(ee)),x.write(ee),D>0&&w(x,M),X?.write(),t("publish: payload: %o",R),x.write(R)}function T($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.cmd||"puback",ne=F.messageId,ee=F.dup&&D==="pubrel"?o.DUP_MASK:0,R=0,M=F.reasonCode,z=F.properties,Z=H===5?3:2;if(D==="pubrel"&&(R=1),typeof ne!="number")return x.destroy(new Error("Invalid messageId")),!1;let X=null;if(H===5&&typeof z=="object"){if(X=P(x,z,J,Z),!X)return!1;Z+=X.length}return x.write(o.ACKS[D][R][ee][0]),Z===3&&(Z+=M!==0?1:-1),Q(x,Z),w(x,ne),H===5&&Z!==2&&x.write(u.from([M])),X!==null?X.write():Z===4&&x.write(u.from([0])),!0}function S($,x,J){t("subscribe: packet: ");let H=J?J.protocolVersion:4,F=$||{},D=F.dup?o.DUP_MASK:0,ne=F.messageId,ee=F.subscriptions,R=F.properties,M=0;if(typeof ne!="number")return x.destroy(new Error("Invalid messageId")),!1;M+=2;let z=null;if(H===5){if(z=he(x,R),!z)return!1;M+=z.length}if(typeof ee=="object"&&ee.length)for(let X=0;X<ee.length;X+=1){let ie=ee[X].topic,j=ee[X].qos;if(typeof ie!="string")return x.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof j!="number")return x.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(H===5){if(typeof(ee[X].nl||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ee[X].rap||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let te=ee[X].rh||0;if(typeof te!="number"||te>2)return x.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}M+=u.byteLength(ie)+2+1}else return x.destroy(new Error("Invalid subscriptions")),!1;t("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),x.write(o.SUBSCRIBE_HEADER[1][D?1:0][0]),Q(x,M),w(x,ne),z!==null&&z.write();let Z=!0;for(let X of ee){let ie=X.topic,j=X.qos,te=+X.nl,ye=+X.rap,re=X.rh,Ee;L(x,ie),Ee=o.SUBSCRIBE_OPTIONS_QOS[j],H===5&&(Ee|=te?o.SUBSCRIBE_OPTIONS_NL:0,Ee|=ye?o.SUBSCRIBE_OPTIONS_RAP:0,Ee|=re?o.SUBSCRIBE_OPTIONS_RH[re]:0),Z=x.write(u.from([Ee]))}return Z}function I($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.messageId,ne=F.granted,ee=F.properties,R=0;if(typeof D!="number")return x.destroy(new Error("Invalid messageId")),!1;if(R+=2,typeof ne=="object"&&ne.length)for(let z=0;z<ne.length;z+=1){if(typeof ne[z]!="number")return x.destroy(new Error("Invalid qos vector")),!1;R+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let M=null;if(H===5){if(M=P(x,ee,J,R),!M)return!1;R+=M.length}return x.write(o.SUBACK_HEADER),Q(x,R),w(x,D),M!==null&&M.write(),x.write(u.from(ne))}function C($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.messageId,ne=F.dup?o.DUP_MASK:0,ee=F.unsubscriptions,R=F.properties,M=0;if(typeof D!="number")return x.destroy(new Error("Invalid messageId")),!1;if(M+=2,typeof ee=="object"&&ee.length)for(let X=0;X<ee.length;X+=1){if(typeof ee[X]!="string")return x.destroy(new Error("Invalid unsubscriptions")),!1;M+=u.byteLength(ee[X])+2}else return x.destroy(new Error("Invalid unsubscriptions")),!1;let z=null;if(H===5){if(z=he(x,R),!z)return!1;M+=z.length}x.write(o.UNSUBSCRIBE_HEADER[1][ne?1:0][0]),Q(x,M),w(x,D),z!==null&&z.write();let Z=!0;for(let X=0;X<ee.length;X++)Z=L(x,ee[X]);return Z}function W($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.messageId,ne=F.dup?o.DUP_MASK:0,ee=F.granted,R=F.properties,M=F.cmd,z=0,Z=2;if(typeof D!="number")return x.destroy(new Error("Invalid messageId")),!1;if(H===5)if(typeof ee=="object"&&ee.length)for(let ie=0;ie<ee.length;ie+=1){if(typeof ee[ie]!="number")return x.destroy(new Error("Invalid qos vector")),!1;Z+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let X=null;if(H===5){if(X=P(x,R,J,Z),!X)return!1;Z+=X.length}return x.write(o.ACKS[M][z][ne][0]),Q(x,Z),w(x,D),X!==null&&X.write(),H===5&&x.write(u.from(ee)),!0}function K($,x,J){return x.write(o.EMPTY[$.cmd])}function le($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.reasonCode,ne=F.properties,ee=H===5?1:0,R=null;if(H===5){if(R=P(x,ne,J,ee),!R)return!1;ee+=R.length}return x.write(u.from([o.codes.disconnect<<4])),Q(x,ee),H===5&&x.write(u.from([D])),R!==null&&R.write(),!0}function U($,x,J){let H=J?J.protocolVersion:4,F=$||{},D=F.reasonCode,ne=F.properties,ee=H===5?1:0;H!==5&&x.destroy(new Error("Invalid mqtt version for auth packet"));let R=P(x,ne,J,ee);return R?(ee+=R.length,x.write(u.from([o.codes.auth<<4])),Q(x,ee),x.write(u.from([D])),R!==null&&R.write(),!0):!1}var V={};function Q($,x){if(x>o.VARBYTEINT_MAX)return $.destroy(new Error(`Invalid variable byte integer: ${x}`)),!1;let J=V[x];return J||(J=d(x),x<16384&&(V[x]=J)),t("writeVarByteInt: writing to stream: %o",J),$.write(J)}function L($,x){let J=u.byteLength(x);return w($,J),t("writeString: %s",x),$.write(x,"utf8")}function pe($,x,J){L($,x),L($,J)}function ce($,x){return t("writeNumberCached: number: %d",x),t("writeNumberCached: %o",n[x]),$.write(n[x])}function fe($,x){let J=l(x);return t("writeNumberGenerated: %o",J),$.write(J)}function me($,x){let J=p(x);return t("write4ByteNumber: %o",J),$.write(J)}function q($,x){typeof x=="string"?L($,x):x?(w($,x.length),$.write(x)):w($,0)}function he($,x){if(typeof x!="object"||x.length!=null)return{length:1,write(){we($,{},0)}};let J=0;function H(F,D){let ne=o.propertiesTypes[F],ee=0;switch(ne){case"byte":{if(typeof D!="boolean")return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=2;break}case"int8":{if(typeof D!="number"||D<0||D>255)return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=2;break}case"binary":{if(D&&D===null)return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=1+u.byteLength(D)+2;break}case"int16":{if(typeof D!="number"||D<0||D>65535)return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=3;break}case"int32":{if(typeof D!="number"||D<0||D>4294967295)return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=5;break}case"var":{if(typeof D!="number"||D<0||D>268435455)return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=1+u.byteLength(d(D));break}case"string":{if(typeof D!="string")return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=3+u.byteLength(D.toString());break}case"pair":{if(typeof D!="object")return $.destroy(new Error(`Invalid ${F}: ${D}`)),!1;ee+=Object.getOwnPropertyNames(D).reduce((R,M)=>{let z=D[M];return Array.isArray(z)?R+=z.reduce((Z,X)=>(Z+=3+u.byteLength(M.toString())+2+u.byteLength(X.toString()),Z),0):R+=3+u.byteLength(M.toString())+2+u.byteLength(D[M].toString()),R},0);break}default:return $.destroy(new Error(`Invalid property ${F}: ${D}`)),!1}return ee}if(x)for(let F in x){let D=0,ne=0,ee=x[F];if(ee!==void 0){if(Array.isArray(ee))for(let R=0;R<ee.length;R++){if(ne=H(F,ee[R]),!ne)return!1;D+=ne}else{if(ne=H(F,ee),!ne)return!1;D=ne}if(!D)return!1;J+=D}}return{length:u.byteLength(d(J))+J,write(){we($,x,J)}}}function P($,x,J,H){let F=["reasonString","userProperties"],D=J&&J.properties&&J.properties.maximumPacketSize?J.properties.maximumPacketSize:0,ne=he($,x);if(D)for(;H+ne.length>D;){let ee=F.shift();if(ee&&x[ee])delete x[ee],ne=he($,x);else return!1}return ne}function ue($,x,J){switch(o.propertiesTypes[x]){case"byte":{$.write(u.from([o.properties[x]])),$.write(u.from([+J]));break}case"int8":{$.write(u.from([o.properties[x]])),$.write(u.from([J]));break}case"binary":{$.write(u.from([o.properties[x]])),q($,J);break}case"int16":{$.write(u.from([o.properties[x]])),w($,J);break}case"int32":{$.write(u.from([o.properties[x]])),me($,J);break}case"var":{$.write(u.from([o.properties[x]])),Q($,J);break}case"string":{$.write(u.from([o.properties[x]])),L($,J);break}case"pair":{Object.getOwnPropertyNames(J).forEach(H=>{let F=J[H];Array.isArray(F)?F.forEach(D=>{$.write(u.from([o.properties[x]])),pe($,H.toString(),D.toString())}):($.write(u.from([o.properties[x]])),pe($,H.toString(),F.toString()))});break}default:return $.destroy(new Error(`Invalid property ${x} value: ${J}`)),!1}}function we($,x,J){Q($,J);for(let H in x)if(Object.prototype.hasOwnProperty.call(x,H)&&x[H]!=null){let F=x[H];if(Array.isArray(F))for(let D=0;D<F.length;D++)ue($,H,F[D]);else ue($,H,F)}}function G($){return $?$ instanceof u?$.length:u.byteLength($):0}function ve($){return typeof $=="string"||$ instanceof u}f.exports=y}),Qs=de((s,f)=>{oe(),ae(),se();var o=ho(),{EventEmitter:u}=(Tt(),Re(pt)),{Buffer:h}=(De(),Re(Ne));function i(r,t){let n=new e;return o(r,n,t),n.concat()}var e=class extends u{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0,t=new Array(this._array.length),n=this._array,l=0,c;for(c=0;c<n.length&&n[c]!==void 0;c++)typeof n[c]!="string"?t[c]=n[c].length:t[c]=h.byteLength(n[c]),r+=t[c];let d=h.allocUnsafe(r);for(c=0;c<n.length&&n[c]!==void 0;c++)typeof n[c]!="string"?(n[c].copy(d,l),l+=t[c]):(d.write(n[c],l),l+=t[c]);return d}destroy(r){r&&this.emit("error",r)}};f.exports=i}),Ks=de(s=>{oe(),ae(),se(),s.parser=Hs().parser,s.generate=Qs(),s.writeToStream=ho()}),co=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};s.default=f}),Ys=de((s,f)=>{"use strict";oe(),ae(),se(),f.exports=u;function o(i){return i instanceof rr?rr.from(i):new i.constructor(i.buffer.slice(),i.byteOffset,i.length)}function u(i){if(i=i||{},i.circles)return h(i);let e=new Map;if(e.set(Date,c=>new Date(c)),e.set(Map,(c,d)=>new Map(t(Array.from(c),d))),e.set(Set,(c,d)=>new Set(t(Array.from(c),d))),i.constructorHandlers)for(let c of i.constructorHandlers)e.set(c[0],c[1]);let r=null;return i.proto?l:n;function t(c,d){let p=Object.keys(c),w=new Array(p.length);for(let g=0;g<p.length;g++){let y=p[g],E=c[y];typeof E!="object"||E===null?w[y]=E:E.constructor!==Object&&(r=e.get(E.constructor))?w[y]=r(E,d):ArrayBuffer.isView(E)?w[y]=o(E):w[y]=d(E)}return w}function n(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return t(c,n);if(c.constructor!==Object&&(r=e.get(c.constructor)))return r(c,n);let d={};for(let p in c){if(Object.hasOwnProperty.call(c,p)===!1)continue;let w=c[p];typeof w!="object"||w===null?d[p]=w:w.constructor!==Object&&(r=e.get(w.constructor))?d[p]=r(w,n):ArrayBuffer.isView(w)?d[p]=o(w):d[p]=n(w)}return d}function l(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return t(c,l);if(c.constructor!==Object&&(r=e.get(c.constructor)))return r(c,l);let d={};for(let p in c){let w=c[p];typeof w!="object"||w===null?d[p]=w:w.constructor!==Object&&(r=e.get(w.constructor))?d[p]=r(w,l):ArrayBuffer.isView(w)?d[p]=o(w):d[p]=l(w)}return d}}function h(i){let e=[],r=[],t=new Map;if(t.set(Date,p=>new Date(p)),t.set(Map,(p,w)=>new Map(l(Array.from(p),w))),t.set(Set,(p,w)=>new Set(l(Array.from(p),w))),i.constructorHandlers)for(let p of i.constructorHandlers)t.set(p[0],p[1]);let n=null;return i.proto?d:c;function l(p,w){let g=Object.keys(p),y=new Array(g.length);for(let E=0;E<g.length;E++){let b=g[E],_=p[b];if(typeof _!="object"||_===null)y[b]=_;else if(_.constructor!==Object&&(n=t.get(_.constructor)))y[b]=n(_,w);else if(ArrayBuffer.isView(_))y[b]=o(_);else{let k=e.indexOf(_);k!==-1?y[b]=r[k]:y[b]=w(_)}}return y}function c(p){if(typeof p!="object"||p===null)return p;if(Array.isArray(p))return l(p,c);if(p.constructor!==Object&&(n=t.get(p.constructor)))return n(p,c);let w={};e.push(p),r.push(w);for(let g in p){if(Object.hasOwnProperty.call(p,g)===!1)continue;let y=p[g];if(typeof y!="object"||y===null)w[g]=y;else if(y.constructor!==Object&&(n=t.get(y.constructor)))w[g]=n(y,c);else if(ArrayBuffer.isView(y))w[g]=o(y);else{let E=e.indexOf(y);E!==-1?w[g]=r[E]:w[g]=c(y)}}return e.pop(),r.pop(),w}function d(p){if(typeof p!="object"||p===null)return p;if(Array.isArray(p))return l(p,d);if(p.constructor!==Object&&(n=t.get(p.constructor)))return n(p,d);let w={};e.push(p),r.push(w);for(let g in p){let y=p[g];if(typeof y!="object"||y===null)w[g]=y;else if(y.constructor!==Object&&(n=t.get(y.constructor)))w[g]=n(y,d);else if(ArrayBuffer.isView(y))w[g]=o(y);else{let E=e.indexOf(y);E!==-1?w[g]=r[E]:w[g]=d(y)}}return e.pop(),r.pop(),w}}}),Gs=de((s,f)=>{"use strict";oe(),ae(),se(),f.exports=Ys()()}),Js=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.validateTopic=f,s.validateTopics=o;function f(u){let h=u.split("/");for(let i=0;i<h.length;i++)if(h[i]!=="+"){if(h[i]==="#")return i===h.length-1;if(h[i].indexOf("+")!==-1||h[i].indexOf("#")!==-1)return!1}return!0}function o(u){if(u.length===0)return"empty_topic_list";for(let h=0;h<u.length;h++)if(!f(u[h]))return u[h];return null}}),fo=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=Pt(),o={objectMode:!0},u={clean:!0},h=class{constructor(i){this.options=i||{},this.options=Object.assign(Object.assign({},u),i),this._inflights=new Map}put(i,e){return this._inflights.set(i.messageId,i),e&&e(),this}createStream(){let i=new f.Readable(o),e=[],r=!1,t=0;return this._inflights.forEach((n,l)=>{e.push(n)}),i._read=()=>{!r&&t<e.length?i.push(e[t++]):i.push(null)},i.destroy=n=>{if(!r)return r=!0,setTimeout(()=>{i.emit("close")},0),i},i}del(i,e){let r=this._inflights.get(i.messageId);return r?(this._inflights.delete(i.messageId),e(null,r)):e&&e(new Error("missing packet")),this}get(i,e){let r=this._inflights.get(i.messageId);return r?e(null,r):e&&e(new Error("missing packet")),this}close(i){this.options.clean&&(this._inflights=null),i&&i()}};s.default=h}),Xs=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=[0,16,128,131,135,144,145,151,153],o=(u,h,i)=>{u.log("handlePublish: packet %o",h),i=typeof i<"u"?i:u.noop;let e=h.topic.toString(),r=h.payload,{qos:t}=h,{messageId:n}=h,{options:l}=u;if(u.options.protocolVersion===5){let c;if(h.properties&&(c=h.properties.topicAlias),typeof c<"u")if(e.length===0)if(c>0&&c<=65535){let d=u.topicAliasRecv.getTopicByAlias(c);if(d)e=d,u.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,c);else{u.log("handlePublish :: unregistered topic alias. alias: %d",c),u.emit("error",new Error("Received unregistered Topic Alias"));return}}else{u.log("handlePublish :: topic alias out of range. alias: %d",c),u.emit("error",new Error("Received Topic Alias is out of range"));return}else if(u.topicAliasRecv.put(e,c))u.log("handlePublish :: registered topic: %s - alias: %d",e,c);else{u.log("handlePublish :: topic alias out of range. alias: %d",c),u.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(u.log("handlePublish: qos %d",t),t){case 2:{l.customHandleAcks(e,r,h,(c,d)=>{if(typeof c=="number"&&(d=c,c=null),c)return u.emit("error",c);if(f.indexOf(d)===-1)return u.emit("error",new Error("Wrong reason code for pubrec"));d?u._sendPacket({cmd:"pubrec",messageId:n,reasonCode:d},i):u.incomingStore.put(h,()=>{u._sendPacket({cmd:"pubrec",messageId:n},i)})});break}case 1:{l.customHandleAcks(e,r,h,(c,d)=>{if(typeof c=="number"&&(d=c,c=null),c)return u.emit("error",c);if(f.indexOf(d)===-1)return u.emit("error",new Error("Wrong reason code for puback"));d||u.emit("message",e,r,h),u.handleMessage(h,p=>{if(p)return i&&i(p);u._sendPacket({cmd:"puback",messageId:n,reasonCode:d},i)})});break}case 0:u.emit("message",e,r,h),u.handleMessage(h,i);break;default:u.log("handlePublish: unknown QoS. Doing nothing.");break}};s.default=o}),Zs=de((s,f)=>{f.exports={version:"5.13.2"}}),Ut=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.MQTTJS_VERSION=s.nextTick=s.ErrorWithSubackPacket=s.ErrorWithReasonCode=void 0,s.applyMixin=u;var f=class po extends Error{constructor(i,e){super(i),this.code=e,Object.setPrototypeOf(this,po.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};s.ErrorWithReasonCode=f;var o=class go extends Error{constructor(i,e){super(i),this.packet=e,Object.setPrototypeOf(this,go.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};s.ErrorWithSubackPacket=o;function u(h,i,e=!1){var r;let t=[i];for(;;){let n=t[0],l=Object.getPrototypeOf(n);if(l?.prototype)t.unshift(l);else break}for(let n of t)for(let l of Object.getOwnPropertyNames(n.prototype))(e||l!=="constructor")&&Object.defineProperty(h.prototype,l,(r=Object.getOwnPropertyDescriptor(n.prototype,l))!==null&&r!==void 0?r:Object.create(null))}s.nextTick=typeof Ie?.nextTick=="function"?Ie.nextTick:h=>{setTimeout(h,0)},s.MQTTJS_VERSION=Zs().version}),lr=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=void 0;var f=Ut();s.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(u,h)=>{let{messageId:i}=h,e=h.cmd,r=null,t=u.outgoing[i]?u.outgoing[i].cb:null,n=null;if(!t){u.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(u.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let l=h.reasonCode;l&&l>0&&l!==16?(n=new f.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),u._removeOutgoingAndStoreMessage(i,()=>{t(n,h)})):u._removeOutgoingAndStoreMessage(i,t);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:i};let l=h.reasonCode;l&&l>0&&l!==16?(n=new f.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),u._removeOutgoingAndStoreMessage(i,()=>{t(n,h)})):u._sendPacket(r);break}case"suback":{delete u.outgoing[i],u.messageIdProvider.deallocate(i);let l=h.granted;for(let c=0;c<l.length;c++){let d=l[c];if((d&128)!==0){n=new Error(`Subscribe error: ${s.ReasonCodes[d]}`),n.code=d;let p=u.messageIdToTopic[i];p&&p.forEach(w=>{delete u._resubscribeTopics[w]})}}delete u.messageIdToTopic[i],u._invokeStoreProcessingQueue(),t(n,h);break}case"unsuback":{delete u.outgoing[i],u.messageIdProvider.deallocate(i),u._invokeStoreProcessingQueue(),t(null,h);break}default:u.emit("error",new Error("unrecognized packet type"))}u.disconnecting&&Object.keys(u.outgoing).length===0&&u.emit("outgoingEmpty")};s.default=o}),ea=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=Ut(),o=lr(),u=(h,i)=>{let{options:e}=h,r=e.protocolVersion,t=r===5?i.reasonCode:i.returnCode;if(r!==5){let n=new f.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,t);h.emit("error",n);return}h.handleAuth(i,(n,l)=>{if(n){h.emit("error",n);return}if(t===24)h.reconnecting=!1,h._sendPacket(l);else{let c=new f.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[t]}`,t);h.emit("error",c)}})};s.default=u}),ta=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.LRUCache=void 0;var f=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,u=typeof Ie=="object"&&Ie?Ie:{},h=(w,g,y,E)=>{typeof u.emitWarning=="function"?u.emitWarning(w,g,y,E):console.error(`[${y}] ${g}: ${w}`)},i=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof i>"u"){e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(y,E){this._onabort.push(E)}},i=class{constructor(){g()}signal=new e;abort(y){if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(let E of this.signal._onabort)E(y);this.signal.onabort?.(y)}}};let w=u.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",g=()=>{w&&(w=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",g))}}var r=w=>!o.has(w),t=Symbol("type"),n=w=>w&&w===Math.floor(w)&&w>0&&isFinite(w),l=w=>n(w)?w<=Math.pow(2,8)?Uint8Array:w<=Math.pow(2,16)?Uint16Array:w<=Math.pow(2,32)?Uint32Array:w<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(w){super(w),this.fill(0)}},d=class Ft{heap;length;static#l=!1;static create(g){let y=l(g);if(!y)return[];Ft.#l=!0;let E=new Ft(g,y);return Ft.#l=!1,E}constructor(g,y){if(!Ft.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new y(g),this.length=0}push(g){this.heap[this.length++]=g}pop(){return this.heap[--this.length]}},p=class bo{#l;#c;#g;#b;#R;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#m;#i;#r;#e;#u;#f;#a;#o;#y;#s;#w;#_;#d;#v;#k;#h;static unsafeExposeInternals(g){return{starts:g.#_,ttls:g.#d,sizes:g.#w,keyMap:g.#i,keyList:g.#r,valList:g.#e,next:g.#u,prev:g.#f,get head(){return g.#a},get tail(){return g.#o},free:g.#y,isBackgroundFetch:y=>g.#t(y),backgroundFetch:(y,E,b,_)=>g.#M(y,E,b,_),moveToTail:y=>g.#P(y),indexes:y=>g.#E(y),rindexes:y=>g.#S(y),isStale:y=>g.#p(y)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#m}get size(){return this.#n}get fetchMethod(){return this.#R}get memoMethod(){return this.#C}get dispose(){return this.#g}get disposeAfter(){return this.#b}constructor(g){let{max:y=0,ttl:E,ttlResolution:b=1,ttlAutopurge:_,updateAgeOnGet:k,updateAgeOnHas:T,allowStale:S,dispose:I,disposeAfter:C,noDisposeOnSet:W,noUpdateTTL:K,maxSize:le=0,maxEntrySize:U=0,sizeCalculation:V,fetchMethod:Q,memoMethod:L,noDeleteOnFetchRejection:pe,noDeleteOnStaleGet:ce,allowStaleOnFetchRejection:fe,allowStaleOnFetchAbort:me,ignoreFetchAbort:q}=g;if(y!==0&&!n(y))throw new TypeError("max option must be a nonnegative integer");let he=y?l(y):Array;if(!he)throw new Error("invalid max value: "+y);if(this.#l=y,this.#c=le,this.maxEntrySize=U||this.#c,this.sizeCalculation=V,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#C=L,Q!==void 0&&typeof Q!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=Q,this.#k=!!Q,this.#i=new Map,this.#r=new Array(y).fill(void 0),this.#e=new Array(y).fill(void 0),this.#u=new he(y),this.#f=new he(y),this.#a=0,this.#o=0,this.#y=d.create(y),this.#n=0,this.#m=0,typeof I=="function"&&(this.#g=I),typeof C=="function"?(this.#b=C,this.#s=[]):(this.#b=void 0,this.#s=void 0),this.#v=!!this.#g,this.#h=!!this.#b,this.noDisposeOnSet=!!W,this.noUpdateTTL=!!K,this.noDeleteOnFetchRejection=!!pe,this.allowStaleOnFetchRejection=!!fe,this.allowStaleOnFetchAbort=!!me,this.ignoreFetchAbort=!!q,this.maxEntrySize!==0){if(this.#c!==0&&!n(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!n(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!ce,this.updateAgeOnGet=!!k,this.updateAgeOnHas=!!T,this.ttlResolution=n(b)||b===0?b:1,this.ttlAutopurge=!!_,this.ttl=E||0,this.ttl){if(!n(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#U()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let P="LRU_CACHE_UNBOUNDED";r(P)&&(o.add(P),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,bo))}}getRemainingTTL(g){return this.#i.has(g)?1/0:0}#U(){let g=new c(this.#l),y=new c(this.#l);this.#d=g,this.#_=y,this.#j=(_,k,T=f.now())=>{if(y[_]=k!==0?T:0,g[_]=k,k!==0&&this.ttlAutopurge){let S=setTimeout(()=>{this.#p(_)&&this.#A(this.#r[_],"expire")},k+1);S.unref&&S.unref()}},this.#T=_=>{y[_]=g[_]!==0?f.now():0},this.#I=(_,k)=>{if(g[k]){let T=g[k],S=y[k];if(!T||!S)return;_.ttl=T,_.start=S,_.now=E||b();let I=_.now-S;_.remainingTTL=T-I}};let E=0,b=()=>{let _=f.now();if(this.ttlResolution>0){E=_;let k=setTimeout(()=>E=0,this.ttlResolution);k.unref&&k.unref()}return _};this.getRemainingTTL=_=>{let k=this.#i.get(_);if(k===void 0)return 0;let T=g[k],S=y[k];if(!T||!S)return 1/0;let I=(E||b())-S;return T-I},this.#p=_=>{let k=y[_],T=g[_];return!!T&&!!k&&(E||b())-k>T}}#T=()=>{};#I=()=>{};#j=()=>{};#p=()=>!1;#W(){let g=new c(this.#l);this.#m=0,this.#w=g,this.#O=y=>{this.#m-=g[y],g[y]=0},this.#L=(y,E,b,_)=>{if(this.#t(E))return 0;if(!n(b))if(_){if(typeof _!="function")throw new TypeError("sizeCalculation must be a function");if(b=_(E,y),!n(b))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return b},this.#x=(y,E,b)=>{if(g[y]=E,this.#c){let _=this.#c-g[y];for(;this.#m>_;)this.#B(!0)}this.#m+=g[y],b&&(b.entrySize=E,b.totalCalculatedSize=this.#m)}}#O=g=>{};#x=(g,y,E)=>{};#L=(g,y,E,b)=>{if(E||b)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:g=this.allowStale}={}){if(this.#n)for(let y=this.#o;!(!this.#N(y)||((g||!this.#p(y))&&(yield y),y===this.#a));)y=this.#f[y]}*#S({allowStale:g=this.allowStale}={}){if(this.#n)for(let y=this.#a;!(!this.#N(y)||((g||!this.#p(y))&&(yield y),y===this.#o));)y=this.#u[y]}#N(g){return g!==void 0&&this.#i.get(this.#r[g])===g}*entries(){for(let g of this.#E())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*rentries(){for(let g of this.#S())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*keys(){for(let g of this.#E()){let y=this.#r[g];y!==void 0&&!this.#t(this.#e[g])&&(yield y)}}*rkeys(){for(let g of this.#S()){let y=this.#r[g];y!==void 0&&!this.#t(this.#e[g])&&(yield y)}}*values(){for(let g of this.#E())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}*rvalues(){for(let g of this.#S())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(g,y={}){for(let E of this.#E()){let b=this.#e[E],_=this.#t(b)?b.__staleWhileFetching:b;if(_!==void 0&&g(_,this.#r[E],this))return this.get(this.#r[E],y)}}forEach(g,y=this){for(let E of this.#E()){let b=this.#e[E],_=this.#t(b)?b.__staleWhileFetching:b;_!==void 0&&g.call(y,_,this.#r[E],this)}}rforEach(g,y=this){for(let E of this.#S()){let b=this.#e[E],_=this.#t(b)?b.__staleWhileFetching:b;_!==void 0&&g.call(y,_,this.#r[E],this)}}purgeStale(){let g=!1;for(let y of this.#S({allowStale:!0}))this.#p(y)&&(this.#A(this.#r[y],"expire"),g=!0);return g}info(g){let y=this.#i.get(g);if(y===void 0)return;let E=this.#e[y],b=this.#t(E)?E.__staleWhileFetching:E;if(b===void 0)return;let _={value:b};if(this.#d&&this.#_){let k=this.#d[y],T=this.#_[y];if(k&&T){let S=k-(f.now()-T);_.ttl=S,_.start=Date.now()}}return this.#w&&(_.size=this.#w[y]),_}dump(){let g=[];for(let y of this.#E({allowStale:!0})){let E=this.#r[y],b=this.#e[y],_=this.#t(b)?b.__staleWhileFetching:b;if(_===void 0||E===void 0)continue;let k={value:_};if(this.#d&&this.#_){k.ttl=this.#d[y];let T=f.now()-this.#_[y];k.start=Math.floor(Date.now()-T)}this.#w&&(k.size=this.#w[y]),g.unshift([E,k])}return g}load(g){this.clear();for(let[y,E]of g){if(E.start){let b=Date.now()-E.start;E.start=f.now()-b}this.set(y,E.value,E)}}set(g,y,E={}){if(y===void 0)return this.delete(g),this;let{ttl:b=this.ttl,start:_,noDisposeOnSet:k=this.noDisposeOnSet,sizeCalculation:T=this.sizeCalculation,status:S}=E,{noUpdateTTL:I=this.noUpdateTTL}=E,C=this.#L(g,y,E.size||0,T);if(this.maxEntrySize&&C>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.#A(g,"set"),this;let W=this.#n===0?void 0:this.#i.get(g);if(W===void 0)W=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#l?this.#B(!1):this.#n,this.#r[W]=g,this.#e[W]=y,this.#i.set(g,W),this.#u[this.#o]=W,this.#f[W]=this.#o,this.#o=W,this.#n++,this.#x(W,C,S),S&&(S.set="add"),I=!1;else{this.#P(W);let K=this.#e[W];if(y!==K){if(this.#k&&this.#t(K)){K.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:le}=K;le!==void 0&&!k&&(this.#v&&this.#g?.(le,g,"set"),this.#h&&this.#s?.push([le,g,"set"]))}else k||(this.#v&&this.#g?.(K,g,"set"),this.#h&&this.#s?.push([K,g,"set"]));if(this.#O(W),this.#x(W,C,S),this.#e[W]=y,S){S.set="replace";let le=K&&this.#t(K)?K.__staleWhileFetching:K;le!==void 0&&(S.oldValue=le)}}else S&&(S.set="update")}if(b!==0&&!this.#d&&this.#U(),this.#d&&(I||this.#j(W,b,_),S&&this.#I(S,W)),!k&&this.#h&&this.#s){let K=this.#s,le;for(;le=K?.shift();)this.#b?.(...le)}return this}pop(){try{for(;this.#n;){let g=this.#e[this.#a];if(this.#B(!0),this.#t(g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(this.#h&&this.#s){let g=this.#s,y;for(;y=g?.shift();)this.#b?.(...y)}}}#B(g){let y=this.#a,E=this.#r[y],b=this.#e[y];return this.#k&&this.#t(b)?b.__abortController.abort(new Error("evicted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(b,E,"evict"),this.#h&&this.#s?.push([b,E,"evict"])),this.#O(y),g&&(this.#r[y]=void 0,this.#e[y]=void 0,this.#y.push(y)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#u[y],this.#i.delete(E),this.#n--,y}has(g,y={}){let{updateAgeOnHas:E=this.updateAgeOnHas,status:b}=y,_=this.#i.get(g);if(_!==void 0){let k=this.#e[_];if(this.#t(k)&&k.__staleWhileFetching===void 0)return!1;if(this.#p(_))b&&(b.has="stale",this.#I(b,_));else return E&&this.#T(_),b&&(b.has="hit",this.#I(b,_)),!0}else b&&(b.has="miss");return!1}peek(g,y={}){let{allowStale:E=this.allowStale}=y,b=this.#i.get(g);if(b===void 0||!E&&this.#p(b))return;let _=this.#e[b];return this.#t(_)?_.__staleWhileFetching:_}#M(g,y,E,b){let _=y===void 0?void 0:this.#e[y];if(this.#t(_))return _;let k=new i,{signal:T}=E;T?.addEventListener("abort",()=>k.abort(T.reason),{signal:k.signal});let S={signal:k.signal,options:E,context:b},I=(V,Q=!1)=>{let{aborted:L}=k.signal,pe=E.ignoreFetchAbort&&V!==void 0;if(E.status&&(L&&!Q?(E.status.fetchAborted=!0,E.status.fetchError=k.signal.reason,pe&&(E.status.fetchAbortIgnored=!0)):E.status.fetchResolved=!0),L&&!pe&&!Q)return W(k.signal.reason);let ce=le;return this.#e[y]===le&&(V===void 0?ce.__staleWhileFetching?this.#e[y]=ce.__staleWhileFetching:this.#A(g,"fetch"):(E.status&&(E.status.fetchUpdated=!0),this.set(g,V,S.options))),V},C=V=>(E.status&&(E.status.fetchRejected=!0,E.status.fetchError=V),W(V)),W=V=>{let{aborted:Q}=k.signal,L=Q&&E.allowStaleOnFetchAbort,pe=L||E.allowStaleOnFetchRejection,ce=pe||E.noDeleteOnFetchRejection,fe=le;if(this.#e[y]===le&&(!ce||fe.__staleWhileFetching===void 0?this.#A(g,"fetch"):L||(this.#e[y]=fe.__staleWhileFetching)),pe)return E.status&&fe.__staleWhileFetching!==void 0&&(E.status.returnedStale=!0),fe.__staleWhileFetching;if(fe.__returned===fe)throw V},K=(V,Q)=>{let L=this.#R?.(g,_,S);L&&L instanceof Promise&&L.then(pe=>V(pe===void 0?void 0:pe),Q),k.signal.addEventListener("abort",()=>{(!E.ignoreFetchAbort||E.allowStaleOnFetchAbort)&&(V(void 0),E.allowStaleOnFetchAbort&&(V=pe=>I(pe,!0)))})};E.status&&(E.status.fetchDispatched=!0);let le=new Promise(K).then(I,C),U=Object.assign(le,{__abortController:k,__staleWhileFetching:_,__returned:void 0});return y===void 0?(this.set(g,U,Rt(We({},S.options),{status:void 0})),y=this.#i.get(g)):this.#e[y]=U,U}#t(g){if(!this.#k)return!1;let y=g;return!!y&&y instanceof Promise&&y.hasOwnProperty("__staleWhileFetching")&&y.__abortController instanceof i}async fetch(g,y={}){let{allowStale:E=this.allowStale,updateAgeOnGet:b=this.updateAgeOnGet,noDeleteOnStaleGet:_=this.noDeleteOnStaleGet,ttl:k=this.ttl,noDisposeOnSet:T=this.noDisposeOnSet,size:S=0,sizeCalculation:I=this.sizeCalculation,noUpdateTTL:C=this.noUpdateTTL,noDeleteOnFetchRejection:W=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:K=this.allowStaleOnFetchRejection,ignoreFetchAbort:le=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:V,forceRefresh:Q=!1,status:L,signal:pe}=y;if(!this.#k)return L&&(L.fetch="get"),this.get(g,{allowStale:E,updateAgeOnGet:b,noDeleteOnStaleGet:_,status:L});let ce={allowStale:E,updateAgeOnGet:b,noDeleteOnStaleGet:_,ttl:k,noDisposeOnSet:T,size:S,sizeCalculation:I,noUpdateTTL:C,noDeleteOnFetchRejection:W,allowStaleOnFetchRejection:K,allowStaleOnFetchAbort:U,ignoreFetchAbort:le,status:L,signal:pe},fe=this.#i.get(g);if(fe===void 0){L&&(L.fetch="miss");let me=this.#M(g,fe,ce,V);return me.__returned=me}else{let me=this.#e[fe];if(this.#t(me)){let ue=E&&me.__staleWhileFetching!==void 0;return L&&(L.fetch="inflight",ue&&(L.returnedStale=!0)),ue?me.__staleWhileFetching:me.__returned=me}let q=this.#p(fe);if(!Q&&!q)return L&&(L.fetch="hit"),this.#P(fe),b&&this.#T(fe),L&&this.#I(L,fe),me;let he=this.#M(g,fe,ce,V),P=he.__staleWhileFetching!==void 0&&E;return L&&(L.fetch=q?"stale":"refresh",P&&q&&(L.returnedStale=!0)),P?he.__staleWhileFetching:he.__returned=he}}async forceFetch(g,y={}){let E=await this.fetch(g,y);if(E===void 0)throw new Error("fetch() returned undefined");return E}memo(g,y={}){let E=this.#C;if(!E)throw new Error("no memoMethod provided to constructor");let I=y,{context:b,forceRefresh:_}=I,k=on(I,["context","forceRefresh"]),T=this.get(g,k);if(!_&&T!==void 0)return T;let S=E(g,T,{options:k,context:b});return this.set(g,S,k),S}get(g,y={}){let{allowStale:E=this.allowStale,updateAgeOnGet:b=this.updateAgeOnGet,noDeleteOnStaleGet:_=this.noDeleteOnStaleGet,status:k}=y,T=this.#i.get(g);if(T!==void 0){let S=this.#e[T],I=this.#t(S);return k&&this.#I(k,T),this.#p(T)?(k&&(k.get="stale"),I?(k&&E&&S.__staleWhileFetching!==void 0&&(k.returnedStale=!0),E?S.__staleWhileFetching:void 0):(_||this.#A(g,"expire"),k&&E&&(k.returnedStale=!0),E?S:void 0)):(k&&(k.get="hit"),I?S.__staleWhileFetching:(this.#P(T),b&&this.#T(T),S))}else k&&(k.get="miss")}#D(g,y){this.#f[y]=g,this.#u[g]=y}#P(g){g!==this.#o&&(g===this.#a?this.#a=this.#u[g]:this.#D(this.#f[g],this.#u[g]),this.#D(this.#o,g),this.#o=g)}delete(g){return this.#A(g,"delete")}#A(g,y){let E=!1;if(this.#n!==0){let b=this.#i.get(g);if(b!==void 0)if(E=!0,this.#n===1)this.#F(y);else{this.#O(b);let _=this.#e[b];if(this.#t(_)?_.__abortController.abort(new Error("deleted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(_,g,y),this.#h&&this.#s?.push([_,g,y])),this.#i.delete(g),this.#r[b]=void 0,this.#e[b]=void 0,b===this.#o)this.#o=this.#f[b];else if(b===this.#a)this.#a=this.#u[b];else{let k=this.#f[b];this.#u[k]=this.#u[b];let T=this.#u[b];this.#f[T]=this.#f[b]}this.#n--,this.#y.push(b)}}if(this.#h&&this.#s?.length){let b=this.#s,_;for(;_=b?.shift();)this.#b?.(..._)}return E}clear(){return this.#F("delete")}#F(g){for(let y of this.#S({allowStale:!0})){let E=this.#e[y];if(this.#t(E))E.__abortController.abort(new Error("deleted"));else{let b=this.#r[y];this.#v&&this.#g?.(E,b,g),this.#h&&this.#s?.push([E,b,g])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#_&&(this.#d.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#m=0,this.#n=0,this.#h&&this.#s){let y=this.#s,E;for(;E=y?.shift();)this.#b?.(...E)}}};s.LRUCache=p}),ht=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.ContainerIterator=s.Container=s.Base=void 0;var f=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};s.ContainerIterator=f;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};s.Base=o;var u=class extends o{};s.Container=u}),ra=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ht(),o=class extends f.Base{constructor(h=[]){super(),this.S=[];let i=this;h.forEach(function(e){i.push(e)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},u=o;s.default=u}),ia=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ht(),o=class extends f.Base{constructor(h=[]){super(),this.j=0,this.q=[];let i=this;h.forEach(function(e){i.push(e)})}clear(){this.q=[],this.i=this.j=0}push(h){let i=this.q.length;if(this.j/i>.5&&this.j+this.i>=i&&i>4096){let e=this.i;for(let r=0;r<e;++r)this.q[r]=this.q[this.j+r];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},u=o;s.default=u}),na=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ht(),o=class extends f.Base{constructor(h=[],i=function(r,t){return r>t?-1:r<t?1:0},e=!0){if(super(),this.v=i,Array.isArray(h))this.C=e?[...h]:h;else{this.C=[];let t=this;h.forEach(function(n){t.C.push(n)})}this.i=this.C.length;let r=this.i>>1;for(let t=this.i-1>>1;t>=0;--t)this.k(t,r)}m(h){let i=this.C[h];for(;h>0;){let e=h-1>>1,r=this.C[e];if(this.v(r,i)<=0)break;this.C[h]=r,h=e}this.C[h]=i}k(h,i){let e=this.C[h];for(;h<i;){let r=h<<1|1,t=r+1,n=this.C[r];if(t<this.i&&this.v(n,this.C[t])>0&&(r=t,n=this.C[t]),this.v(n,e)>=0)break;this.C[h]=n,h=r}this.C[h]=e}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],i=this.C.pop();return this.i-=1,this.i&&(this.C[0]=i,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let i=this.C.indexOf(h);return i<0?!1:(i===0?this.pop():i===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(i,1,this.C.pop()),this.i-=1,this.m(i),this.k(i,this.i>>1)),!0)}updateItem(h){let i=this.C.indexOf(h);return i<0?!1:(this.m(i),this.k(i,this.i>>1),!0)}toArray(){return[...this.C]}},u=o;s.default=u}),Ki=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ht(),o=class extends f.Container{},u=o;s.default=u}),ct=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.throwIteratorAccessError=f;function f(){throw new RangeError("Iterator access denied!")}}),mo=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.RandomIterator=void 0;var f=ht(),o=ct(),u=class extends f.ContainerIterator{constructor(h,i){super(i),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};s.RandomIterator=u}),oa=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=u(Ki()),o=mo();function u(r){return r&&r.t?r:{default:r}}var h=class yo extends o.RandomIterator{constructor(t,n,l){super(t,l),this.container=n}copy(){return new yo(this.o,this.container,this.iteratorType)}},i=class extends f.default{constructor(r=[],t=!0){if(super(),Array.isArray(r))this.J=t?[...r]:r,this.i=r.length;else{this.J=[];let n=this;r.forEach(function(l){n.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J[r]}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J.splice(r,1),this.i-=1,this.i}eraseElementByValue(r){let t=0;for(let n=0;n<this.i;++n)this.J[n]!==r&&(this.J[t++]=this.J[n]);return this.i=this.J.length=t,this.i}eraseElementByIterator(r){let t=r.o;return r=r.next(),this.eraseElementByPos(t),r}pushBack(r){return this.J.push(r),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(r,t){if(r<0||r>this.i-1)throw new RangeError;this.J[r]=t}insert(r,t,n=1){if(r<0||r>this.i)throw new RangeError;return this.J.splice(r,0,...new Array(n).fill(t)),this.i+=n,this.i}find(r){for(let t=0;t<this.i;++t)if(this.J[t]===r)return new h(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let r=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[r++]=this.J[t]);return this.i=this.J.length=r,this.i}sort(r){this.J.sort(r)}forEach(r){for(let t=0;t<this.i;++t)r(this.J[t],t,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},e=i;s.default=e}),sa=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=h(Ki()),o=ht(),u=ct();function h(t){return t&&t.t?t:{default:t}}var i=class wo extends o.ContainerIterator{constructor(n,l,c,d){super(d),this.o=n,this.h=l,this.container=c,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o.l}set pointer(n){this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o.l=n}copy(){return new wo(this.o,this.h,this.container,this.iteratorType)}},e=class extends f.default{constructor(t=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let n=this;t.forEach(function(l){n.pushBack(l)})}V(t){let{L:n,B:l}=t;n.B=l,l.L=n,t===this.p&&(this.p=l),t===this._&&(this._=n),this.i-=1}G(t,n){let l=n.B,c={l:t,L:n,B:l};n.B=c,l.L=c,n===this.h&&(this.p=c),l===this.h&&(this._=c),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return n.l}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return this.V(n),this.i}eraseElementByValue(t){let n=this.p;for(;n!==this.h;)n.l===t&&this.V(n),n=n.B;return this.i}eraseElementByIterator(t){let n=t.o;return n===this.h&&(0,u.throwIteratorAccessError)(),t=t.next(),this.V(n),t}pushBack(t){return this.G(t,this._),this.i}popBack(){if(this.i===0)return;let t=this._.l;return this.V(this._),t}pushFront(t){return this.G(t,this.h),this.i}popFront(){if(this.i===0)return;let t=this.p.l;return this.V(this.p),t}setElementByPos(t,n){if(t<0||t>this.i-1)throw new RangeError;let l=this.p;for(;t--;)l=l.B;l.l=n}insert(t,n,l=1){if(t<0||t>this.i)throw new RangeError;if(l<=0)return this.i;if(t===0)for(;l--;)this.pushFront(n);else if(t===this.i)for(;l--;)this.pushBack(n);else{let c=this.p;for(let p=1;p<t;++p)c=c.B;let d=c.B;for(this.i+=l;l--;)c.B={l:n,L:c},c.B.L=c,c=c.B;c.B=d,d.L=c}return this.i}find(t){let n=this.p;for(;n!==this.h;){if(n.l===t)return new i(n,this.h,this);n=n.B}return this.end()}reverse(){if(this.i<=1)return;let t=this.p,n=this._,l=0;for(;l<<1<this.i;){let c=t.l;t.l=n.l,n.l=c,t=t.B,n=n.L,l+=1}}unique(){if(this.i<=1)return this.i;let t=this.p;for(;t!==this.h;){let n=t;for(;n.B!==this.h&&n.l===n.B.l;)n=n.B,this.i-=1;t.B=n.B,t.B.L=t,t=t.B}return this.i}sort(t){if(this.i<=1)return;let n=[];this.forEach(function(c){n.push(c)}),n.sort(t);let l=this.p;n.forEach(function(c){l.l=c,l=l.B})}merge(t){let n=this;if(this.i===0)t.forEach(function(l){n.pushBack(l)});else{let l=this.p;t.forEach(function(c){for(;l!==n.h&&l.l<=c;)l=l.B;n.G(c,l.L)})}return this.i}forEach(t){let n=this.p,l=0;for(;n!==this.h;)t(n.l,l++,this),n=n.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let t=this.p;for(;t!==this.h;)yield t.l,t=t.B}.bind(this)()}},r=e;s.default=r}),aa=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=u(Ki()),o=mo();function u(r){return r&&r.t?r:{default:r}}var h=class _o extends o.RandomIterator{constructor(t,n,l){super(t,l),this.container=n}copy(){return new _o(this.o,this.container,this.iteratorType)}},i=class extends f.default{constructor(r=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let n=(()=>{if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size;if(typeof r.size=="function")return r.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(n/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let l=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(l>>1),this.D=this.N=this.F-n%this.F>>1;let c=this;r.forEach(function(d){c.pushBack(d)})}T(){let r=[],t=Math.max(this.P>>1,1);for(let n=0;n<t;++n)r[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)r[r.length]=this.A[n];for(let n=0;n<this.R;++n)r[r.length]=this.A[n];r[r.length]=[...this.A[this.R]],this.j=t,this.R=r.length-1;for(let n=0;n<t;++n)r[r.length]=new Array(this.F);this.A=r,this.P=r.length}O(r){let t=this.D+r+1,n=t%this.F,l=n-1,c=this.j+(t-n)/this.F;return n===0&&(c-=1),c%=this.P,l<0&&(l+=this.F),{curNodeBucketIndex:c,curNodePointerIndex:l}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(r){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=r,this.i}popBack(){if(this.i===0)return;let r=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,r}pushFront(r){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=r,this.i}popFront(){if(this.i===0)return;let r=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,r}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(r);return this.A[t][n]}setElementByPos(r,t){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:l}=this.O(r);this.A[n][l]=t}insert(r,t,n=1){if(r<0||r>this.i)throw new RangeError;if(r===0)for(;n--;)this.pushFront(t);else if(r===this.i)for(;n--;)this.pushBack(t);else{let l=[];for(let c=r;c<this.i;++c)l.push(this.getElementByPos(c));this.cut(r-1);for(let c=0;c<n;++c)this.pushBack(t);for(let c=0;c<l.length;++c)this.pushBack(l[c])}return this.i}cut(r){if(r<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(r);return this.R=t,this.N=n,this.i=r+1,this.i}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;if(r===0)this.popFront();else if(r===this.i-1)this.popBack();else{let t=[];for(let l=r+1;l<this.i;++l)t.push(this.getElementByPos(l));this.cut(r),this.popBack();let n=this;t.forEach(function(l){n.pushBack(l)})}return this.i}eraseElementByValue(r){if(this.i===0)return 0;let t=[];for(let l=0;l<this.i;++l){let c=this.getElementByPos(l);c!==r&&t.push(c)}let n=t.length;for(let l=0;l<n;++l)this.setElementByPos(l,t[l]);return this.cut(n-1)}eraseElementByIterator(r){let t=r.o;return this.eraseElementByPos(t),r=r.next(),r}find(r){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===r)return new h(t,this);return this.end()}reverse(){let r=0,t=this.i-1;for(;r<t;){let n=this.getElementByPos(r);this.setElementByPos(r,this.getElementByPos(t)),this.setElementByPos(t,n),r+=1,t-=1}}unique(){if(this.i<=1)return this.i;let r=1,t=this.getElementByPos(0);for(let n=1;n<this.i;++n){let l=this.getElementByPos(n);l!==t&&(t=l,this.setElementByPos(r++,l))}for(;this.i>r;)this.popBack();return this.i}sort(r){let t=[];for(let n=0;n<this.i;++n)t.push(this.getElementByPos(n));t.sort(r);for(let n=0;n<this.i;++n)this.setElementByPos(n,t[n])}shrinkToFit(){if(this.i===0)return;let r=[];this.forEach(function(t){r.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<r.length;++t)this.pushBack(r[t])}forEach(r){for(let t=0;t<this.i;++t)r(this.getElementByPos(t),t,this)}[Symbol.iterator](){return function*(){for(let r=0;r<this.i;++r)yield this.getElementByPos(r)}.bind(this)()}},e=i;s.default=e}),la=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.TreeNodeEnableIndex=s.TreeNode=void 0;var f=class{constructor(u,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=u,this.l=h}L(){let u=this;if(u.ee===1&&u.tt.tt===u)u=u.W;else if(u.U)for(u=u.U;u.W;)u=u.W;else{let h=u.tt;for(;h.U===u;)u=h,h=u.tt;u=h}return u}B(){let u=this;if(u.W){for(u=u.W;u.U;)u=u.U;return u}else{let h=u.tt;for(;h.W===u;)u=h,h=u.tt;return u.W!==h?h:u}}te(){let u=this.tt,h=this.W,i=h.U;return u.tt===this?u.tt=h:u.U===this?u.U=h:u.W=h,h.tt=u,h.U=this,this.tt=h,this.W=i,i&&(i.tt=this),h}se(){let u=this.tt,h=this.U,i=h.W;return u.tt===this?u.tt=h:u.U===this?u.U=h:u.W=h,h.tt=u,h.W=this,this.tt=h,this.U=i,i&&(i.tt=this),h}};s.TreeNode=f;var o=class extends f{constructor(){super(...arguments),this.rt=1}te(){let u=super.te();return this.ie(),u.ie(),u}se(){let u=super.se();return this.ie(),u.ie(),u}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};s.TreeNodeEnableIndex=o}),vo=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=la(),o=ht(),u=ct(),h=class extends o.Container{constructor(e=function(t,n){return t<n?-1:t>n?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=f.TreeNodeEnableIndex,this.M=function(t,n,l){let c=this.ne(t,n,l);if(c){let d=c.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let p=this.he(c);if(p){let{parentNode:w,grandParent:g,curNode:y}=p;w.ie(),g.ie(),y.ie()}}return this.i},this.V=function(t){let n=this.fe(t);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=f.TreeNode,this.M=function(t,n,l){let c=this.ne(t,n,l);return c&&this.he(c),this.i},this.V=this.fe),this.h=new this.re}X(e,r){let t=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)e=e.W;else if(n>0)t=e,e=e.U;else return e}return t}Z(e,r){let t=this.h;for(;e;)this.v(e.u,r)<=0?e=e.W:(t=e,e=e.U);return t}$(e,r){let t=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)t=e,e=e.W;else if(n>0)e=e.U;else return e}return t}rr(e,r){let t=this.h;for(;e;)this.v(e.u,r)<0?(t=e,e=e.W):e=e.U;return t}ue(e){for(;;){let r=e.tt;if(r===this.h)return;if(e.ee===1){e.ee=0;return}if(e===r.U){let t=r.W;if(t.ee===1)t.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(t.W&&t.W.ee===1){t.ee=r.ee,r.ee=0,t.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else t.U&&t.U.ee===1?(t.ee=1,t.U.ee=0,t.se()):(t.ee=1,e=r)}else{let t=r.U;if(t.ee===1)t.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(t.U&&t.U.ee===1){t.ee=r.ee,r.ee=0,t.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else t.W&&t.W.ee===1?(t.ee=1,t.W.ee=0,t.te()):(t.ee=1,e=r)}}}fe(e){if(this.i===1)return this.clear(),this.h;let r=e;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[e.u,r.u]=[r.u,e.u],[e.l,r.l]=[r.l,e.l],e=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let t=r.tt;return r===t.U?t.U=void 0:t.W=void 0,this.i-=1,this.Y.ee=0,t}oe(e,r){return e===void 0?!1:this.oe(e.U,r)||r(e)?!0:this.oe(e.W,r)}he(e){for(;;){let r=e.tt;if(r.ee===0)return;let t=r.tt;if(r===t.U){let n=t.W;if(n&&n.ee===1){if(n.ee=r.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===r.W){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,t===this.Y)this.Y=e,this.h.tt=e;else{let l=t.tt;l.U===t?l.U=e:l.W=e}return e.tt=t.tt,r.tt=e,t.tt=e,t.ee=1,{parentNode:r,grandParent:t,curNode:e}}else r.ee=0,t===this.Y?this.Y=t.se():t.se(),t.ee=1}else{let n=t.U;if(n&&n.ee===1){if(n.ee=r.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===r.U){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,t===this.Y)this.Y=e,this.h.tt=e;else{let l=t.tt;l.U===t?l.U=e:l.W=e}return e.tt=t.tt,r.tt=e,t.tt=e,t.ee=1,{parentNode:r,grandParent:t,curNode:e}}else r.ee=0,t===this.Y?this.Y=t.te():t.te(),t.ee=1}return}}ne(e,r,t){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n,l=this.h.U,c=this.v(l.u,e);if(c===0){l.l=r;return}else if(c>0)l.U=new this.re(e,r),l.U.tt=l,n=l.U,this.h.U=n;else{let d=this.h.W,p=this.v(d.u,e);if(p===0){d.l=r;return}else if(p<0)d.W=new this.re(e,r),d.W.tt=d,n=d.W,this.h.W=n;else{if(t!==void 0){let w=t.o;if(w!==this.h){let g=this.v(w.u,e);if(g===0){w.l=r;return}else if(g>0){let y=w.L(),E=this.v(y.u,e);if(E===0){y.l=r;return}else E<0&&(n=new this.re(e,r),y.W===void 0?(y.W=n,n.tt=y):(w.U=n,n.tt=w))}}}if(n===void 0)for(n=this.Y;;){let w=this.v(n.u,e);if(w>0){if(n.U===void 0){n.U=new this.re(e,r),n.U.tt=n,n=n.U;break}n=n.U}else if(w<0){if(n.W===void 0){n.W=new this.re(e,r),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=r;return}}}}return this.i+=1,n}I(e,r){for(;e;){let t=this.v(e.u,r);if(t<0)e=e.W;else if(t>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,r){let t=e.o;if(t===this.h&&(0,u.throwIteratorAccessError)(),this.i===1)return t.u=r,!0;if(t===this.h.U)return this.v(t.B().u,r)>0?(t.u=r,!0):!1;if(t===this.h.W)return this.v(t.L().u,r)<0?(t.u=r,!0):!1;let n=t.L().u;if(this.v(n,r)>=0)return!1;let l=t.B().u;return this.v(l,r)<=0?!1:(t.u=r,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=0,t=this;return this.oe(this.Y,function(n){return e===r?(t.V(n),!0):(r+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let r=this.I(this.Y,e);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(e){let r=e.o;r===this.h&&(0,u.throwIteratorAccessError)();let t=r.W===void 0;return e.iteratorType===0?t&&e.next():(!t||r.U===void 0)&&e.next(),this.V(r),e}forEach(e){let r=0;for(let t of this)e(t,r++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r,t=0;for(let n of this){if(t===e){r=n;break}t+=1}return r}getHeight(){if(this.i===0)return 0;let e=function(r){return r?Math.max(e(r.U),e(r.W))+1:0};return e(this.Y)}},i=h;s.default=i}),Eo=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ht(),o=ct(),u=class extends f.ContainerIterator{constructor(i,e,r){super(r),this.o=i,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let i=this.o,e=this.h.tt;if(i===this.h)return e?e.rt-1:0;let r=0;for(i.U&&(r+=i.U.rt);i!==e;){let t=i.tt;i===t.W&&(r+=1,t.U&&(r+=t.U.rt)),i=t}return r}},h=u;s.default=h}),ua=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=h(vo()),o=h(Eo()),u=ct();function h(t){return t&&t.t?t:{default:t}}var i=class So extends o.default{constructor(n,l,c,d){super(n,l,d),this.container=c}get pointer(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o.u}copy(){return new So(this.o,this.h,this.container,this.iteratorType)}},e=class extends f.default{constructor(t=[],n,l){super(n,l);let c=this;t.forEach(function(d){c.insert(d)})}*K(t){t!==void 0&&(yield*this.K(t.U),yield t.u,yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(t,n){return this.M(t,void 0,n)}find(t){let n=this.I(this.Y,t);return new i(n,this.h,this)}lowerBound(t){let n=this.X(this.Y,t);return new i(n,this.h,this)}upperBound(t){let n=this.Z(this.Y,t);return new i(n,this.h,this)}reverseLowerBound(t){let n=this.$(this.Y,t);return new i(n,this.h,this)}reverseUpperBound(t){let n=this.rr(this.Y,t);return new i(n,this.h,this)}union(t){let n=this;return t.forEach(function(l){n.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=e;s.default=r}),ha=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=h(vo()),o=h(Eo()),u=ct();function h(t){return t&&t.t?t:{default:t}}var i=class Ao extends o.default{constructor(n,l,c,d){super(n,l,d),this.container=c}get pointer(){this.o===this.h&&(0,u.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,c){if(c==="0")return n.o.u;if(c==="1")return n.o.l},set(l,c,d){if(c!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new Ao(this.o,this.h,this.container,this.iteratorType)}},e=class extends f.default{constructor(t=[],n,l){super(n,l);let c=this;t.forEach(function(d){c.setElement(d[0],d[1])})}*K(t){t!==void 0&&(yield*this.K(t.U),yield[t.u,t.l],yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i===0)return;let t=this.h.U;return[t.u,t.l]}back(){if(this.i===0)return;let t=this.h.W;return[t.u,t.l]}lowerBound(t){let n=this.X(this.Y,t);return new i(n,this.h,this)}upperBound(t){let n=this.Z(this.Y,t);return new i(n,this.h,this)}reverseLowerBound(t){let n=this.$(this.Y,t);return new i(n,this.h,this)}reverseUpperBound(t){let n=this.rr(this.Y,t);return new i(n,this.h,this)}setElement(t,n,l){return this.M(t,n,l)}find(t){let n=this.I(this.Y,t);return new i(n,this.h,this)}getElementByKey(t){return this.I(this.Y,t).l}union(t){let n=this;return t.forEach(function(l){n.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=e;s.default=r}),Io=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=f;function f(o){let u=typeof o;return u==="object"&&o!==null||u==="function"}}),ko=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.HashContainerIterator=s.HashContainer=void 0;var f=ht(),o=h(Io()),u=ct();function h(r){return r&&r.t?r:{default:r}}var i=class extends f.ContainerIterator{constructor(r,t,n){super(n),this.o=r,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,u.throwIteratorAccessError)(),this.o=this.o.L,this})}};s.HashContainerIterator=i;var e=class extends f.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(r){let{L:t,B:n}=r;t.B=n,n.L=t,r===this.p&&(this.p=n),r===this._&&(this._=t),this.i-=1}M(r,t,n){n===void 0&&(n=(0,o.default)(r));let l;if(n){let c=r[this.HASH_TAG];if(c!==void 0)return this.H[c].l=t,this.i;Object.defineProperty(r,this.HASH_TAG,{value:this.H.length,configurable:!0}),l={u:r,l:t,L:this._,B:this.h},this.H.push(l)}else{let c=this.g[r];if(c)return c.l=t,this.i;l={u:r,l:t,L:this._,B:this.h},this.g[r]=l}return this.i===0?(this.p=l,this.h.B=l):this._.B=l,this._=l,this.h.L=l,++this.i}I(r,t){if(t===void 0&&(t=(0,o.default)(r)),t){let n=r[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[r]||this.h}clear(){let r=this.HASH_TAG;this.H.forEach(function(t){delete t.u[r]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(r,t){let n;if(t===void 0&&(t=(0,o.default)(r)),t){let l=r[this.HASH_TAG];if(l===void 0)return!1;delete r[this.HASH_TAG],n=this.H[l],delete this.H[l]}else{if(n=this.g[r],n===void 0)return!1;delete this.g[r]}return this.V(n),!0}eraseElementByIterator(r){let t=r.o;return t===this.h&&(0,u.throwIteratorAccessError)(),this.V(t),r.next()}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let t=this.p;for(;r--;)t=t.B;return this.V(t),this.i}};s.HashContainer=e}),ca=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ko(),o=ct(),u=class To extends f.HashContainerIterator{constructor(r,t,n,l){super(r,t,l),this.container=n}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new To(this.o,this.h,this.container,this.iteratorType)}},h=class extends f.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(t){r.insert(t)})}begin(){return new u(this.p,this.h,this)}end(){return new u(this.h,this.h,this)}rBegin(){return new u(this._,this.h,this,1)}rEnd(){return new u(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,r){return this.M(e,void 0,r)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.u}find(e,r){let t=this.I(e,r);return new u(t,this.h,this)}forEach(e){let r=0,t=this.p;for(;t!==this.h;)e(t.u,r++,this),t=t.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}},i=h;s.default=i}),fa=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var f=ko(),o=h(Io()),u=ct();function h(t){return t&&t.t?t:{default:t}}var i=class Oo extends f.HashContainerIterator{constructor(n,l,c,d){super(n,l,d),this.container=c}get pointer(){this.o===this.h&&(0,u.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,c){if(c==="0")return n.o.u;if(c==="1")return n.o.l},set(l,c,d){if(c!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new Oo(this.o,this.h,this.container,this.iteratorType)}},e=class extends f.HashContainer{constructor(t=[]){super();let n=this;t.forEach(function(l){n.setElement(l[0],l[1])})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(t,n,l){return this.M(t,n,l)}getElementByKey(t,n){if(n===void 0&&(n=(0,o.default)(t)),n){let c=t[this.HASH_TAG];return c!==void 0?this.H[c].l:void 0}let l=this.g[t];return l?l.l:void 0}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return[n.u,n.l]}find(t,n){let l=this.I(t,n);return new i(l,this.h,this)}forEach(t){let n=0,l=this.p;for(;l!==this.h;)t([l.u,l.l],n++,this),l=l.B}[Symbol.iterator](){return function*(){let t=this.p;for(;t!==this.h;)yield[t.u,t.l],t=t.B}.bind(this)()}},r=e;s.default=r}),da=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"t",{value:!0}),Object.defineProperty(s,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(s,"HashMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"HashSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"LinkList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"OrderedMap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(s,"OrderedSet",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"PriorityQueue",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"Stack",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(s,"Vector",{enumerable:!0,get:function(){return h.default}});var f=c(ra()),o=c(ia()),u=c(na()),h=c(oa()),i=c(sa()),e=c(aa()),r=c(ua()),t=c(ha()),n=c(ca()),l=c(fa());function c(d){return d&&d.t?d:{default:d}}}),pa=de((s,f)=>{"use strict";oe(),ae(),se();var o=da().OrderedSet,u=lt()("number-allocator:trace"),h=lt()("number-allocator:error");function i(r,t){this.low=r,this.high=t}i.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},i.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0};function e(r,t){if(!(this instanceof e))return new e(r,t);this.min=r,this.max=t,this.ss=new o([],(n,l)=>n.compare(l)),u("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return u("alloc():empty"),null;let r=this.ss.begin(),t=r.pointer.low,n=r.pointer.high,l=t;return l+1<=n?this.ss.updateKeyByIterator(r,new i(t+1,n)):this.ss.eraseElementByPos(0),u("alloc():"+l),l},e.prototype.use=function(r){let t=new i(r,r),n=this.ss.lowerBound(t);if(!n.equals(this.ss.end())){let l=n.pointer.low,c=n.pointer.high;return n.pointer.equals(t)?(this.ss.eraseElementByIterator(n),u("use():"+r),!0):l>r?!1:l===r?(this.ss.updateKeyByIterator(n,new i(l+1,c)),u("use():"+r),!0):c===r?(this.ss.updateKeyByIterator(n,new i(l,c-1)),u("use():"+r),!0):(this.ss.updateKeyByIterator(n,new i(r+1,c)),this.ss.insert(new i(l,r-1)),u("use():"+r),!0)}return u("use():failed"),!1},e.prototype.free=function(r){if(r<this.min||r>this.max){h("free():"+r+" is out of range");return}let t=new i(r,r),n=this.ss.upperBound(t);if(n.equals(this.ss.end())){if(n.equals(this.ss.begin())){this.ss.insert(t);return}n.pre();let l=n.pointer.high;n.pointer.high+1===r?this.ss.updateKeyByIterator(n,new i(l,r)):this.ss.insert(t)}else if(n.equals(this.ss.begin()))if(r+1===n.pointer.low){let l=n.pointer.high;this.ss.updateKeyByIterator(n,new i(r,l))}else this.ss.insert(t);else{let l=n.pointer.low,c=n.pointer.high;n.pre();let d=n.pointer.low;n.pointer.high+1===r?r+1===l?(this.ss.eraseElementByIterator(n),this.ss.updateKeyByIterator(n,new i(d,c))):this.ss.updateKeyByIterator(n,new i(d,r)):r+1===l?(this.ss.eraseElementByIterator(n.next()),this.ss.insert(new i(r,c))):this.ss.insert(t)}u("free():"+r)},e.prototype.clear=function(){u("clear()"),this.ss.clear(),this.ss.insert(new i(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let r of this.ss)console.log(r)},f.exports=e}),Po=de((s,f)=>{oe(),ae(),se();var o=pa();f.exports.NumberAllocator=o}),ga=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=ta(),o=Po(),u=class{constructor(h){h>0&&(this.aliasToTopic=new f.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,i){if(i===0||i>this.max)return!1;let e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,h),this.topicToAlias[h]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let i=this.topicToAlias[h];return typeof i<"u"&&this.aliasToTopic.get(i),i}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};s.default=u}),ba=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=lr(),u=f(ga()),h=Ut(),i=(e,r)=>{e.log("_handleConnack");let{options:t}=e,n=t.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}r.properties.topicAliasMaximum>0&&(e.topicAliasSend=new u.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=r.properties.serverKeepAlive),r.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(n===0)e.reconnecting=!1,e._onConnect(r);else if(n>0){let l=new h.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[n]}`,n);e.emit("error",l),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};s.default=i}),ma=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=(o,u,h)=>{o.log("handling pubrel packet");let i=typeof h<"u"?h:o.noop,{messageId:e}=u,r={cmd:"pubcomp",messageId:e};o.incomingStore.get(u,(t,n)=>{t?o._sendPacket(r,i):(o.emit("message",n.topic,n.payload,n),o.handleMessage(n,l=>{if(l)return i(l);o.incomingStore.del(n,o.noop),o._sendPacket(r,i)}))})};s.default=f}),ya=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var o=f(Xs()),u=f(ea()),h=f(ba()),i=f(lr()),e=f(ma()),r=(t,n,l)=>{let{options:c}=t;if(c.protocolVersion===5&&c.properties&&c.properties.maximumPacketSize&&c.properties.maximumPacketSize<n.length)return t.emit("error",new Error(`exceeding packets size ${n.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",n),n.cmd){case"publish":(0,o.default)(t,n,l);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,i.default)(t,n),l();break;case"pubrel":t.reschedulePing(),(0,e.default)(t,n,l);break;case"connack":(0,h.default)(t,n),l();break;case"auth":t.reschedulePing(),(0,u.default)(t,n),l();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),l();break;case"disconnect":t.emit("disconnect",n),l();break;default:t.log("_handlePacket :: unknown command"),l();break}};s.default=r}),wa=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0}),s.TypedEventEmitter=void 0;var o=f((Tt(),Re(pt))),u=Ut(),h=class{};s.TypedEventEmitter=h,(0,u.applyMixin)(h,o.default)}),ur=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.isReactNativeBrowser=s.isWebWorker=void 0;var f=()=>{var i;return typeof window<"u"?typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.toLowerCase().indexOf(" electron/"))>-1&&Ie!=null&&Ie.versions?!Object.prototype.hasOwnProperty.call(Ie.versions,"electron"):typeof window.document<"u":!1},o=()=>{var i,e;return!!(typeof self=="object"&&!((e=(i=self?.constructor)===null||i===void 0?void 0:i.name)===null||e===void 0)&&e.includes("WorkerGlobalScope"))},u=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h=f()||o()||u();s.isWebWorker=o(),s.isReactNativeBrowser=u(),s.default=h}),_a=de((s,f)=>{oe(),ae(),se(),function(o,u){typeof s=="object"&&typeof f<"u"?u(s):typeof define=="function"&&define.amd?define(["exports"],u):(o=typeof globalThis<"u"?globalThis:o||self,u(o.fastUniqueNumbers={}))}(s,function(o){"use strict";var u=function(p){return function(w){var g=p(w);return w.add(g),g}},h=function(p){return function(w,g){return p.set(w,g),g}},i=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,r=e*2,t=function(p,w){return function(g){var y=w.get(g),E=y===void 0?g.size:y<r?y+1:0;if(!g.has(E))return p(g,E);if(g.size<e){for(;g.has(E);)E=Math.floor(Math.random()*r);return p(g,E)}if(g.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;g.has(E);)E=Math.floor(Math.random()*i);return p(g,E)}},n=new WeakMap,l=h(n),c=t(l,n),d=u(c);o.addUniqueNumber=d,o.generateUniqueNumber=c})}),va=de((s,f)=>{oe(),ae(),se(),function(o,u){typeof s=="object"&&typeof f<"u"?u(s,_a()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],u):(o=typeof globalThis<"u"?globalThis:o||self,u(o.workerTimersBroker={},o.fastUniqueNumbers))}(s,function(o,u){"use strict";var h=function(r){return r.method!==void 0&&r.method==="call"},i=function(r){return r.error===null&&typeof r.id=="number"},e=function(r){var t=new Map([[0,function(){}]]),n=new Map([[0,function(){}]]),l=new Map,c=new Worker(r);c.addEventListener("message",function(y){var E=y.data;if(h(E)){var b=E.params,_=b.timerId,k=b.timerType;if(k==="interval"){var T=t.get(_);if(typeof T=="number"){var S=l.get(T);if(S===void 0||S.timerId!==_||S.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T();else throw new Error("The timer is in an undefined state.")}else if(k==="timeout"){var I=n.get(_);if(typeof I=="number"){var C=l.get(I);if(C===void 0||C.timerId!==_||C.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof I<"u")I(),n.delete(_);else throw new Error("The timer is in an undefined state.")}}else if(i(E)){var W=E.id,K=l.get(W);if(K===void 0)throw new Error("The timer is in an undefined state.");var le=K.timerId,U=K.timerType;l.delete(W),U==="interval"?t.delete(le):n.delete(le)}else{var V=E.error.message;throw new Error(V)}});var d=function(y){var E=u.generateUniqueNumber(l);l.set(E,{timerId:y,timerType:"interval"}),t.set(y,E),c.postMessage({id:E,method:"clear",params:{timerId:y,timerType:"interval"}})},p=function(y){var E=u.generateUniqueNumber(l);l.set(E,{timerId:y,timerType:"timeout"}),n.set(y,E),c.postMessage({id:E,method:"clear",params:{timerId:y,timerType:"timeout"}})},w=function(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=u.generateUniqueNumber(t);return t.set(b,function(){y(),typeof t.get(b)=="function"&&c.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"interval"}})}),c.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"interval"}}),b},g=function(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=u.generateUniqueNumber(n);return n.set(b,y),c.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"timeout"}}),b};return{clearInterval:d,clearTimeout:p,setInterval:w,setTimeout:g}};o.load=e})}),Ea=de((s,f)=>{oe(),ae(),se(),function(o,u){typeof s=="object"&&typeof f<"u"?u(s,va()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],u):(o=typeof globalThis<"u"?globalThis:o||self,u(o.workerTimers={},o.workerTimersBroker))}(s,function(o,u){"use strict";var h=function(c,d){var p=null;return function(){if(p!==null)return p;var w=new Blob([d],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(w);return p=c(g),setTimeout(function(){return URL.revokeObjectURL(g)}),p}},i=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=h(u.load,i),r=function(c){return e().clearInterval(c)},t=function(c){return e().clearTimeout(c)},n=function(){var c;return(c=e()).setInterval.apply(c,arguments)},l=function(){var c;return(c=e()).setTimeout.apply(c,arguments)};o.clearInterval=r,o.clearTimeout=t,o.setInterval=n,o.setTimeout=l})}),Sa=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__createBinding||(Object.create?function(n,l,c,d){d===void 0&&(d=c);var p=Object.getOwnPropertyDescriptor(l,c);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(n,d,p)}:function(n,l,c,d){d===void 0&&(d=c),n[d]=l[c]}),o=s&&s.__setModuleDefault||(Object.create?function(n,l){Object.defineProperty(n,"default",{enumerable:!0,value:l})}:function(n,l){n.default=l}),u=s&&s.__importStar||function(){var n=function(l){return n=Object.getOwnPropertyNames||function(c){var d=[];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(d[d.length]=p);return d},n(l)};return function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var d=n(l),p=0;p<d.length;p++)d[p]!=="default"&&f(c,l,d[p]);return o(c,l),c}}();Object.defineProperty(s,"__esModule",{value:!0});var h=u(ur()),i=Ea(),e={set:i.setInterval,clear:i.clearInterval},r={set:(n,l)=>setInterval(n,l),clear:n=>clearInterval(n)},t=n=>{switch(n){case"native":return r;case"worker":return e;case"auto":default:return h.default&&!h.isWebWorker&&!h.isReactNativeBrowser?e:r}};s.default=t}),Ro=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0});var o=f(Sa()),u=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(h,i){this.destroyed=!1,this.client=h,this.timer=typeof i=="object"&&"set"in i&&"clear"in i?i:(0,o.default)(i),this.setKeepalive(h.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(h){if(h*=1e3,isNaN(h)||h<=0||h>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${h}`);this._keepalive=h,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${h}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let h=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+h,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};s.default=u}),Bi=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__createBinding||(Object.create?function(T,S,I,C){C===void 0&&(C=I);var W=Object.getOwnPropertyDescriptor(S,I);(!W||("get"in W?!S.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return S[I]}}),Object.defineProperty(T,C,W)}:function(T,S,I,C){C===void 0&&(C=I),T[C]=S[I]}),o=s&&s.__setModuleDefault||(Object.create?function(T,S){Object.defineProperty(T,"default",{enumerable:!0,value:S})}:function(T,S){T.default=S}),u=s&&s.__importStar||function(){var T=function(S){return T=Object.getOwnPropertyNames||function(I){var C=[];for(var W in I)Object.prototype.hasOwnProperty.call(I,W)&&(C[C.length]=W);return C},T(S)};return function(S){if(S&&S.__esModule)return S;var I={};if(S!=null)for(var C=T(S),W=0;W<C.length;W++)C[W]!=="default"&&f(I,S,C[W]);return o(I,S),I}}(),h=s&&s.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(s,"__esModule",{value:!0});var i=h(Cs()),e=h(Ks()),r=h(co()),t=Pt(),n=h(Gs()),l=u(Js()),c=h(lt()),d=h(fo()),p=h(ya()),w=Ut(),g=wa(),y=h(Ro()),E=u(ur()),b=globalThis.setImmediate||((...T)=>{let S=T.shift();(0,w.nextTick)(()=>{S(...T)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},k=class Mi extends g.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,I){super(),this.options=I||{};for(let C in _)typeof this.options[C]>"u"?this.options[C]=_[C]:this.options[C]=I[C];this.log=this.options.log||(0,c.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Mi.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",I.protocol),this.log("MqttClient :: options.protocolVersion",I.protocolVersion),this.log("MqttClient :: options.username",I.username),this.log("MqttClient :: options.keepalive",I.keepalive),this.log("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",I.properties?I.properties.topicAliasMaximum:void 0),this.options.clientId=typeof I.clientId=="string"?I.clientId:Mi.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:(...C)=>{C[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new r.default:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new d.default,this.incomingStore=I.incomingStore||new d.default,this.queueQoSZero=I.queueQoSZero===void 0?!0:I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.properties&&I.properties.topicAliasMaximum>0&&(I.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new i.default(I.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:C}=this,W=()=>{let K=C.shift();this.log("deliver :: entry %o",K);let le=null;if(!K){this._resubscribe();return}le=K.packet,this.log("deliver :: call _sendPacket for %o",le);let U=!0;le.messageId&&le.messageId!==0&&(this.messageIdProvider.register(le.messageId)||(U=!1)),U?this._sendPacket(le,V=>{K.cb&&K.cb(V),W()}):(this.log("messageId: %d has already used. The message is skipped and removed.",le.messageId),W())};this.log("connect :: sending queued packets"),W()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,I){I()}handleMessage(S,I){I()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let I=new t.Writable,C=e.default.parser(this.options),W=null,K=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),C.on("packet",L=>{this.log("parser :: on packet push to packets array."),K.push(L)});let le=()=>{this.log("work :: getting next packet in queue");let L=K.shift();if(L)this.log("work :: packet pulled from queue"),(0,p.default)(this,L,U);else{this.log("work :: no packets in queue");let pe=W;W=null,this.log("work :: done flag is %s",!!pe),pe&&pe()}},U=()=>{if(K.length)(0,w.nextTick)(le);else{let L=W;W=null,L()}};I._write=(L,pe,ce)=>{W=ce,this.log("writable stream :: parsing buffer"),C.parse(L),le()};let V=L=>{this.log("streamErrorHandler :: error",L.message),L.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",L)):this.noop(L)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Q={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Q.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&(Q.properties||(Q.properties={}),this.topicAliasRecv&&(Q.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Q),C.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let L=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(L)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,I,C,W){this.log("publish :: message `%s` to topic `%s`",I,S);let{options:K}=this;typeof C=="function"&&(W=C,C=null),C=C||{},C=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),C);let{qos:le,retain:U,dup:V,properties:Q,cbStorePut:L}=C;if(this._checkDisconnecting(W))return this;let pe=()=>{let ce=0;if((le===1||le===2)&&(ce=this._nextId(),ce===null))return this.log("No messageId left"),!1;let fe={cmd:"publish",topic:S,payload:I,qos:le,retain:U,messageId:ce,dup:V};switch(K.protocolVersion===5&&(fe.properties=Q),this.log("publish :: qos",le),le){case 1:case 2:this.outgoing[fe.messageId]={volatile:!1,cb:W||this.noop},this.log("MqttClient:publish: packet cmd: %s",fe.cmd),this._sendPacket(fe,void 0,L);break;default:this.log("MqttClient:publish: packet cmd: %s",fe.cmd),this._sendPacket(fe,W,L);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!pe())&&this._storeProcessingQueue.push({invoke:pe,cbStorePut:C.cbStorePut,callback:W}),this}publishAsync(S,I,C){return new Promise((W,K)=>{this.publish(S,I,C,(le,U)=>{le?K(le):W(U)})})}subscribe(S,I,C){let W=this.options.protocolVersion;typeof I=="function"&&(C=I),C=C||this.noop;let K=!1,le=[];typeof S=="string"?(S=[S],le=S):Array.isArray(S)?le=S:typeof S=="object"&&(K=S.resubscribe,delete S.resubscribe,le=Object.keys(S));let U=l.validateTopics(le);if(U!==null)return b(C,new Error(`Invalid topic ${U}`)),this;if(this._checkDisconnecting(C))return this.log("subscribe: discconecting true"),this;let V={qos:0};W===5&&(V.nl=!1,V.rap=!1,V.rh=0),I=Object.assign(Object.assign({},V),I);let Q=I.properties,L=[],pe=(me,q)=>{if(q=q||I,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,me)||this._resubscribeTopics[me].qos<q.qos||K){let he={topic:me,qos:q.qos};W===5&&(he.nl=q.nl,he.rap=q.rap,he.rh=q.rh,he.properties=Q),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",he.topic,he.qos),L.push(he)}};if(Array.isArray(S)?S.forEach(me=>{this.log("subscribe: array topic %s",me),pe(me)}):Object.keys(S).forEach(me=>{this.log("subscribe: object topic %s, %o",me,S[me]),pe(me,S[me])}),!L.length)return C(null,[]),this;let ce=(me,q)=>{let he={cmd:"subscribe",subscriptions:me,messageId:q};if(Q&&(he.properties=Q),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ue=[];me.forEach(we=>{if(this.options.reconnectPeriod>0){let G={qos:we.qos};W===5&&(G.nl=we.nl||!1,G.rap=we.rap||!1,G.rh=we.rh||0,G.properties=we.properties),this._resubscribeTopics[we.topic]=G,ue.push(we.topic)}}),this.messageIdToTopic[he.messageId]=ue}let P=new Promise((ue,we)=>{this.outgoing[he.messageId]={volatile:!0,cb(G,ve){if(!G){let{granted:$}=ve;for(let x=0;x<$.length;x+=1)me[x].qos=$[x]}G?we(new w.ErrorWithSubackPacket(G.message,ve)):ue(ve)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(he),P},fe=()=>{var me;let q=(me=this.options.subscribeBatchSize)!==null&&me!==void 0?me:L.length,he=[];for(let P=0;P<L.length;P+=q){let ue=L.slice(P,P+q),we=this._nextId();if(we===null)return this.log("No messageId left"),!1;he.push(ce(ue,we))}return Promise.all(he).then(P=>{C(null,L,P.at(-1))}).catch(P=>{C(P,L,P.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!fe())&&this._storeProcessingQueue.push({invoke:fe,callback:C}),this}subscribeAsync(S,I){return new Promise((C,W)=>{this.subscribe(S,I,(K,le)=>{K?W(K):C(le)})})}unsubscribe(S,I,C){typeof S=="string"&&(S=[S]),typeof I=="function"&&(C=I),C=C||this.noop;let W=l.validateTopics(S);if(W!==null)return b(C,new Error(`Invalid topic ${W}`)),this;if(this._checkDisconnecting(C))return this;let K=()=>{let le=this._nextId();if(le===null)return this.log("No messageId left"),!1;let U={cmd:"unsubscribe",messageId:le,unsubscriptions:[]};return typeof S=="string"?U.unsubscriptions=[S]:Array.isArray(S)&&(U.unsubscriptions=S),this.options.resubscribe&&U.unsubscriptions.forEach(V=>{delete this._resubscribeTopics[V]}),typeof I=="object"&&I.properties&&(U.properties=I.properties),this.outgoing[U.messageId]={volatile:!0,cb:C},this.log("unsubscribe: call _sendPacket"),this._sendPacket(U),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:C}),this}unsubscribeAsync(S,I){return new Promise((C,W)=>{this.unsubscribe(S,I,(K,le)=>{K?W(K):C(le)})})}end(S,I,C){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(C=C||I,I=S,S=!1),typeof I!="object"&&(C=C||I,I=null),this.log("end :: cb? %s",!!C),(!C||typeof C!="function")&&(C=this.noop);let W=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(le=>{this.outgoingStore.close(U=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),C){let V=le||U;this.log("end :: closeStores: invoking callback with args"),C(V)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},K=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,w.nextTick)(W)},I)};return this.disconnecting?(C(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,K,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),K()),this)}endAsync(S,I){return new Promise((C,W)=>{this.end(S,I,K=>{K?W(K):C()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:I}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{I(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let I=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=I:I(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let I;S.properties&&(I=S.properties.topicAlias);let C=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",I,C),C.length===0){if(typeof I>"u")return new Error("Unregistered Topic Alias");if(C=this.topicAliasSend.getTopicByAlias(I),typeof C>"u")return new Error("Unregistered Topic Alias");S.topic=C}I&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,I,C={}){if(I&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let W=Object.assign({cmd:"disconnect"},C);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(W,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),b(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),I&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())}_storeAndSend(S,I,C){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let W=S,K;if(W.cmd==="publish"&&(W=(0,n.default)(S),K=this._removeTopicAliasAndRecoverTopicName(W),K))return I&&I(K);this.outgoingStore.put(W,le=>{if(le)return I&&I(le);C(),this._writePacket(S,I)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let I;S.properties&&(I=S.properties.topicAlias);let C=S.topic.toString();if(this.topicAliasSend)if(I){if(C.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",C,I),!this.topicAliasSend.put(C,I)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,I),new Error("Sending Topic Alias out of range")}else C.length!==0&&(this.options.autoAssignTopicAlias?(I=this.topicAliasSend.getAliasByTopic(C),I?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",C,I)):(I=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(C,I),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",C,I))):this.options.autoUseTopicAlias&&(I=this.topicAliasSend.getAliasByTopic(C),I&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",C,I))));else if(I)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,I),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,I){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let C=e.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",C),!C&&I&&I!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",I)):I&&(this.log("_writePacket :: invoking cb"),I())}_sendPacket(S,I,C,W){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),C=C||this.noop,I=I||this.noop;let K=this._applyTopicAlias(S);if(K){I(K);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,I);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,I,C);return}if(W){this._writePacket(S,I);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,I,C);return;default:this._writePacket(S,I);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,I,C);break;case 0:default:this._writePacket(S,I);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,I,C){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!I),C=C||this.noop;let W=S;if(W.cmd==="publish"){W=(0,n.default)(S);let le=this._removeTopicAliasAndRecoverTopicName(W);if(le)return I&&I(le)}let K=W.qos||0;K===0&&this.queueQoSZero||W.cmd!=="publish"?this.queue.push({packet:W,cb:I}):K>0?(I=this.outgoing[W.messageId]?this.outgoing[W.messageId].cb:null,this.outgoingStore.put(W,le=>{if(le)return I&&I(le);C()})):I&&I(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new y.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let I=0;I<S.length;I++){let C={};C[S[I]]=this._resubscribeTopics[S[I]],C.resubscribe=!0,this.subscribe(C,{properties:C[S[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let I=()=>{let C=this.outgoingStore.createStream(),W=()=>{C.destroy(),C=null,this._flushStoreProcessingQueue(),K()},K=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",W),C.on("error",U=>{K(),this._flushStoreProcessingQueue(),this.removeListener("close",W),this.emit("error",U)});let le=()=>{if(!C)return;let U=C.read(1),V;if(!U){C.once("readable",le);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[U.messageId]){le();return}!this.disconnecting&&!this.reconnectTimer?(V=this.outgoing[U.messageId]?this.outgoing[U.messageId].cb:null,this.outgoing[U.messageId]={volatile:!1,cb(Q,L){V&&V(Q,L),le()}},this._packetIdsDuringStoreProcessing[U.messageId]=!0,this.messageIdProvider.register(U.messageId)?this._sendPacket(U,void 0,void 0,!0):this.log("messageId: %d has already used.",U.messageId)):C.destroy&&C.destroy()};C.on("end",()=>{let U=!0;for(let V in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[V]){U=!1;break}this.removeListener("close",W),U?(K(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):I()}),le()};I()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,I){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(C,W)=>{I(C,W),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};k.VERSION=w.MQTTJS_VERSION,s.default=k}),Aa=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=Po(),o=class{constructor(){this.numberAllocator=new f.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(u){return this.numberAllocator.use(u)}deallocate(u){this.numberAllocator.free(u)}clear(){this.numberAllocator.clear()}};s.default=o});function wt(s){throw new RangeError(xo[s])}function dn(s,f){let o=s.split("@"),u="";o.length>1&&(u=o[0]+"@",s=o[1]);let h=function(i,e){let r=[],t=i.length;for(;t--;)r[t]=e(i[t]);return r}((s=s.replace(Co,".")).split("."),f).join(".");return u+h}function pn(s){let f=[],o=0,u=s.length;for(;o<u;){let h=s.charCodeAt(o++);if(h>=55296&&h<=56319&&o<u){let i=s.charCodeAt(o++);(64512&i)==56320?f.push(((1023&h)<<10)+(1023&i)+65536):(f.push(h),o--)}else f.push(h)}return f}var gn,bn,Co,xo,Ye,Vt,wr,_r,vr,Er,dt,Ia=qe(()=>{oe(),ae(),se(),gn=/^xn--/,bn=/[^\0-\x7E]/,Co=/[\x2E\u3002\uFF0E\uFF61]/g,xo={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ye=Math.floor,Vt=String.fromCharCode,wr=function(s,f){return s+22+75*(s<26)-((f!=0)<<5)},_r=function(s,f,o){let u=0;for(s=o?Ye(s/700):s>>1,s+=Ye(s/f);s>455;u+=36)s=Ye(s/35);return Ye(u+36*s/(s+38))},vr=function(s){let f=[],o=s.length,u=0,h=128,i=72,e=s.lastIndexOf("-");e<0&&(e=0);for(let t=0;t<e;++t)s.charCodeAt(t)>=128&&wt("not-basic"),f.push(s.charCodeAt(t));for(let t=e>0?e+1:0;t<o;){let n=u;for(let c=1,d=36;;d+=36){t>=o&&wt("invalid-input");let p=(r=s.charCodeAt(t++))-48<10?r-22:r-65<26?r-65:r-97<26?r-97:36;(p>=36||p>Ye((2147483647-u)/c))&&wt("overflow"),u+=p*c;let w=d<=i?1:d>=i+26?26:d-i;if(p<w)break;let g=36-w;c>Ye(2147483647/g)&&wt("overflow"),c*=g}let l=f.length+1;i=_r(u-n,l,n==0),Ye(u/l)>2147483647-h&&wt("overflow"),h+=Ye(u/l),u%=l,f.splice(u++,0,h)}var r;return String.fromCodePoint(...f)},Er=function(s){let f=[],o=(s=pn(s)).length,u=128,h=0,i=72;for(let t of s)t<128&&f.push(Vt(t));let e=f.length,r=e;for(e&&f.push("-");r<o;){let t=2147483647;for(let l of s)l>=u&&l<t&&(t=l);let n=r+1;t-u>Ye((2147483647-h)/n)&&wt("overflow"),h+=(t-u)*n,u=t;for(let l of s)if(l<u&&++h>2147483647&&wt("overflow"),l==u){let c=h;for(let d=36;;d+=36){let p=d<=i?1:d>=i+26?26:d-i;if(c<p)break;let w=c-p,g=36-p;f.push(Vt(wr(p+w%g,0))),c=Ye(w/g)}f.push(Vt(wr(c,0))),i=_r(h,n,r==e),h=0,++r}++h,++u}return f.join("")},dt={version:"2.1.0",ucs2:{decode:pn,encode:s=>String.fromCodePoint(...s)},decode:vr,encode:Er,toASCII:function(s){return dn(s,function(f){return bn.test(f)?"xn--"+Er(f):f})},toUnicode:function(s){return dn(s,function(f){return gn.test(f)?vr(f.slice(4).toLowerCase()):f})}},dt.decode,dt.encode,dt.toASCII,dt.toUnicode,dt.ucs2,dt.version});function ka(s,f){return Object.prototype.hasOwnProperty.call(s,f)}var mn,Ct,yn,Je,Ta=qe(()=>{oe(),ae(),se(),mn=function(s,f,o,u){f=f||"&",o=o||"=";var h={};if(typeof s!="string"||s.length===0)return h;var i=/\+/g;s=s.split(f);var e=1e3;u&&typeof u.maxKeys=="number"&&(e=u.maxKeys);var r=s.length;e>0&&r>e&&(r=e);for(var t=0;t<r;++t){var n,l,c,d,p=s[t].replace(i,"%20"),w=p.indexOf(o);w>=0?(n=p.substr(0,w),l=p.substr(w+1)):(n=p,l=""),c=decodeURIComponent(n),d=decodeURIComponent(l),ka(h,c)?Array.isArray(h[c])?h[c].push(d):h[c]=[h[c],d]:h[c]=d}return h},Ct=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},yn=function(s,f,o,u){return f=f||"&",o=o||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(h){var i=encodeURIComponent(Ct(h))+o;return Array.isArray(s[h])?s[h].map(function(e){return i+encodeURIComponent(Ct(e))}).join(f):i+encodeURIComponent(Ct(s[h]))}).join(f):u?encodeURIComponent(Ct(u))+o+encodeURIComponent(Ct(s)):""},Je={},Je.decode=Je.parse=mn,Je.encode=Je.stringify=yn,Je.decode,Je.encode,Je.parse,Je.stringify});function Ui(){throw new Error("setTimeout has not been defined")}function ji(){throw new Error("clearTimeout has not been defined")}function Bo(s){if(nt===setTimeout)return setTimeout(s,0);if((nt===Ui||!nt)&&setTimeout)return nt=setTimeout,setTimeout(s,0);try{return nt(s,0)}catch{try{return nt.call(null,s,0)}catch{return nt.call(this||It,s,0)}}}function Oa(){kt&&St&&(kt=!1,St.length?Ze=St.concat(Ze):$t=-1,Ze.length&&Mo())}function Mo(){if(!kt){var s=Bo(Oa);kt=!0;for(var f=Ze.length;f;){for(St=Ze,Ze=[];++$t<f;)St&&St[$t].run();$t=-1,f=Ze.length}St=null,kt=!1,function(o){if(ot===clearTimeout)return clearTimeout(o);if((ot===ji||!ot)&&clearTimeout)return ot=clearTimeout,clearTimeout(o);try{ot(o)}catch{try{return ot.call(null,o)}catch{return ot.call(this||It,o)}}}(s)}}function wn(s,f){(this||It).fun=s,(this||It).array=f}function tt(){}var _n,nt,ot,It,Le,St,Ze,kt,$t,Me,Pa=qe(()=>{oe(),ae(),se(),It=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Le=_n={},function(){try{nt=typeof setTimeout=="function"?setTimeout:Ui}catch{nt=Ui}try{ot=typeof clearTimeout=="function"?clearTimeout:ji}catch{ot=ji}}(),Ze=[],kt=!1,$t=-1,Le.nextTick=function(s){var f=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)f[o-1]=arguments[o];Ze.push(new wn(s,f)),Ze.length!==1||kt||Bo(Mo)},wn.prototype.run=function(){(this||It).fun.apply(null,(this||It).array)},Le.title="browser",Le.browser=!0,Le.env={},Le.argv=[],Le.version="",Le.versions={},Le.on=tt,Le.addListener=tt,Le.once=tt,Le.off=tt,Le.removeListener=tt,Le.removeAllListeners=tt,Le.emit=tt,Le.prependListener=tt,Le.prependOnceListener=tt,Le.listeners=function(s){return[]},Le.binding=function(s){throw new Error("process.binding is not supported")},Le.cwd=function(){return"/"},Le.chdir=function(s){throw new Error("process.chdir is not supported")},Le.umask=function(){return 0},Me=_n,Me.addListener,Me.argv,Me.binding,Me.browser,Me.chdir,Me.cwd,Me.emit,Me.env,Me.listeners,Me.nextTick,Me.off,Me.on,Me.once,Me.prependListener,Me.prependOnceListener,Me.removeAllListeners,Me.removeListener,Me.title,Me.umask,Me.version,Me.versions});function Ra(){if(Li)return Zt;Li=!0;var s=Zt={},f,o;function u(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?f=setTimeout:f=u}catch{f=u}try{typeof clearTimeout=="function"?o=clearTimeout:o=h}catch{o=h}})();function i(g){if(f===setTimeout)return setTimeout(g,0);if((f===u||!f)&&setTimeout)return f=setTimeout,setTimeout(g,0);try{return f(g,0)}catch{try{return f.call(null,g,0)}catch{return f.call(this||vt,g,0)}}}function e(g){if(o===clearTimeout)return clearTimeout(g);if((o===h||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(g);try{return o(g)}catch{try{return o.call(null,g)}catch{return o.call(this||vt,g)}}}var r=[],t=!1,n,l=-1;function c(){!t||!n||(t=!1,n.length?r=n.concat(r):l=-1,r.length&&d())}function d(){if(!t){var g=i(c);t=!0;for(var y=r.length;y;){for(n=r,r=[];++l<y;)n&&n[l].run();l=-1,y=r.length}n=null,t=!1,e(g)}}s.nextTick=function(g){var y=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)y[E-1]=arguments[E];r.push(new p(g,y)),r.length===1&&!t&&i(d)};function p(g,y){(this||vt).fun=g,(this||vt).array=y}p.prototype.run=function(){(this||vt).fun.apply(null,(this||vt).array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function w(){}return s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(g){return[]},s.binding=function(g){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(g){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},Zt}var Zt,Li,vt,xe,Uo=qe(()=>{oe(),ae(),se(),Zt={},Li=!1,vt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,xe=Ra(),xe.platform="browser",xe.addListener,xe.argv,xe.binding,xe.browser,xe.chdir,xe.cwd,xe.emit,xe.env,xe.listeners,xe.nextTick,xe.off,xe.on,xe.once,xe.prependListener,xe.prependOnceListener,xe.removeAllListeners,xe.removeListener,xe.title,xe.umask,xe.version,xe.versions});function Ca(){if(Ni)return er;Ni=!0;var s=xe;function f(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var r="",t=0,n=-1,l=0,c,d=0;d<=i.length;++d){if(d<i.length)c=i.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var p=r.lastIndexOf("/");if(p!==r.length-1){p===-1?(r="",t=0):(r=r.slice(0,p),t=r.length-1-r.lastIndexOf("/")),n=d,l=0;continue}}else if(r.length===2||r.length===1){r="",t=0,n=d,l=0;continue}}e&&(r.length>0?r+="/..":r="..",t=2)}else r.length>0?r+="/"+i.slice(n+1,d):r=i.slice(n+1,d),t=d-n-1;n=d,l=0}else c===46&&l!==-1?++l:l=-1}return r}function u(i,e){var r=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+t:r+i+t:t}var h={resolve:function(){for(var i="",e=!1,r,t=arguments.length-1;t>=-1&&!e;t--){var n;t>=0?n=arguments[t]:(r===void 0&&(r=s.cwd()),n=r),f(n),n.length!==0&&(i=n+"/"+i,e=n.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(f(i),i.length===0)return".";var e=i.charCodeAt(0)===47,r=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&r&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return f(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var r=arguments[e];f(r),r.length>0&&(i===void 0?i=r:i+="/"+r)}return i===void 0?".":h.normalize(i)},relative:function(i,e){if(f(i),f(e),i===e||(i=h.resolve(i),e=h.resolve(e),i===e))return"";for(var r=1;r<i.length&&i.charCodeAt(r)===47;++r);for(var t=i.length,n=t-r,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var c=e.length,d=c-l,p=n<d?n:d,w=-1,g=0;g<=p;++g){if(g===p){if(d>p){if(e.charCodeAt(l+g)===47)return e.slice(l+g+1);if(g===0)return e.slice(l+g)}else n>p&&(i.charCodeAt(r+g)===47?w=g:g===0&&(w=0));break}var y=i.charCodeAt(r+g),E=e.charCodeAt(l+g);if(y!==E)break;y===47&&(w=g)}var b="";for(g=r+w+1;g<=t;++g)(g===t||i.charCodeAt(g)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(l+w):(l+=w,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(i){return i},dirname:function(i){if(f(i),i.length===0)return".";for(var e=i.charCodeAt(0),r=e===47,t=-1,n=!0,l=i.length-1;l>=1;--l)if(e=i.charCodeAt(l),e===47){if(!n){t=l;break}}else n=!1;return t===-1?r?"/":".":r&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');f(i);var r=0,t=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var c=e.length-1,d=-1;for(l=i.length-1;l>=0;--l){var p=i.charCodeAt(l);if(p===47){if(!n){r=l+1;break}}else d===-1&&(n=!1,d=l+1),c>=0&&(p===e.charCodeAt(c)?--c===-1&&(t=l):(c=-1,t=d))}return r===t?t=d:t===-1&&(t=i.length),i.slice(r,t)}else{for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!n){r=l+1;break}}else t===-1&&(n=!1,t=l+1);return t===-1?"":i.slice(r,t)}},extname:function(i){f(i);for(var e=-1,r=0,t=-1,n=!0,l=0,c=i.length-1;c>=0;--c){var d=i.charCodeAt(c);if(d===47){if(!n){r=c+1;break}continue}t===-1&&(n=!1,t=c+1),d===46?e===-1?e=c:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||t===-1||l===0||l===1&&e===t-1&&e===r+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return u("/",i)},parse:function(i){f(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var r=i.charCodeAt(0),t=r===47,n;t?(e.root="/",n=1):n=0;for(var l=-1,c=0,d=-1,p=!0,w=i.length-1,g=0;w>=n;--w){if(r=i.charCodeAt(w),r===47){if(!p){c=w+1;break}continue}d===-1&&(p=!1,d=w+1),r===46?l===-1?l=w:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||d===-1||g===0||g===1&&l===d-1&&l===c+1?d!==-1&&(c===0&&t?e.base=e.name=i.slice(1,d):e.base=e.name=i.slice(c,d)):(c===0&&t?(e.name=i.slice(1,l),e.base=i.slice(1,d)):(e.name=i.slice(c,l),e.base=i.slice(c,d)),e.ext=i.slice(l,d)),c>0?e.dir=i.slice(0,c-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,er=h,er}var er,Ni,Di,xa=qe(()=>{oe(),ae(),se(),Uo(),er={},Ni=!1,Di=Ca()}),jo={};Bt(jo,{URL:()=>es,Url:()=>Yo,default:()=>Oe,fileURLToPath:()=>Lo,format:()=>Go,parse:()=>Zo,pathToFileURL:()=>No,resolve:()=>Jo,resolveObject:()=>Xo});function Ke(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Lt(s,f,o){if(s&&Ge.isObject(s)&&s instanceof Ke)return s;var u=new Ke;return u.parse(s,f,o),u}function Ba(){if(Fi)return tr;Fi=!0;var s=Me;function f(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var r="",t=0,n=-1,l=0,c,d=0;d<=i.length;++d){if(d<i.length)c=i.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var p=r.lastIndexOf("/");if(p!==r.length-1){p===-1?(r="",t=0):(r=r.slice(0,p),t=r.length-1-r.lastIndexOf("/")),n=d,l=0;continue}}else if(r.length===2||r.length===1){r="",t=0,n=d,l=0;continue}}e&&(r.length>0?r+="/..":r="..",t=2)}else r.length>0?r+="/"+i.slice(n+1,d):r=i.slice(n+1,d),t=d-n-1;n=d,l=0}else c===46&&l!==-1?++l:l=-1}return r}function u(i,e){var r=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+t:r+i+t:t}var h={resolve:function(){for(var i="",e=!1,r,t=arguments.length-1;t>=-1&&!e;t--){var n;t>=0?n=arguments[t]:(r===void 0&&(r=s.cwd()),n=r),f(n),n.length!==0&&(i=n+"/"+i,e=n.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(f(i),i.length===0)return".";var e=i.charCodeAt(0)===47,r=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&r&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return f(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var r=arguments[e];f(r),r.length>0&&(i===void 0?i=r:i+="/"+r)}return i===void 0?".":h.normalize(i)},relative:function(i,e){if(f(i),f(e),i===e||(i=h.resolve(i),e=h.resolve(e),i===e))return"";for(var r=1;r<i.length&&i.charCodeAt(r)===47;++r);for(var t=i.length,n=t-r,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var c=e.length,d=c-l,p=n<d?n:d,w=-1,g=0;g<=p;++g){if(g===p){if(d>p){if(e.charCodeAt(l+g)===47)return e.slice(l+g+1);if(g===0)return e.slice(l+g)}else n>p&&(i.charCodeAt(r+g)===47?w=g:g===0&&(w=0));break}var y=i.charCodeAt(r+g),E=e.charCodeAt(l+g);if(y!==E)break;y===47&&(w=g)}var b="";for(g=r+w+1;g<=t;++g)(g===t||i.charCodeAt(g)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(l+w):(l+=w,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(i){return i},dirname:function(i){if(f(i),i.length===0)return".";for(var e=i.charCodeAt(0),r=e===47,t=-1,n=!0,l=i.length-1;l>=1;--l)if(e=i.charCodeAt(l),e===47){if(!n){t=l;break}}else n=!1;return t===-1?r?"/":".":r&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');f(i);var r=0,t=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var c=e.length-1,d=-1;for(l=i.length-1;l>=0;--l){var p=i.charCodeAt(l);if(p===47){if(!n){r=l+1;break}}else d===-1&&(n=!1,d=l+1),c>=0&&(p===e.charCodeAt(c)?--c===-1&&(t=l):(c=-1,t=d))}return r===t?t=d:t===-1&&(t=i.length),i.slice(r,t)}else{for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!n){r=l+1;break}}else t===-1&&(n=!1,t=l+1);return t===-1?"":i.slice(r,t)}},extname:function(i){f(i);for(var e=-1,r=0,t=-1,n=!0,l=0,c=i.length-1;c>=0;--c){var d=i.charCodeAt(c);if(d===47){if(!n){r=c+1;break}continue}t===-1&&(n=!1,t=c+1),d===46?e===-1?e=c:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||t===-1||l===0||l===1&&e===t-1&&e===r+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return u("/",i)},parse:function(i){f(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var r=i.charCodeAt(0),t=r===47,n;t?(e.root="/",n=1):n=0;for(var l=-1,c=0,d=-1,p=!0,w=i.length-1,g=0;w>=n;--w){if(r=i.charCodeAt(w),r===47){if(!p){c=w+1;break}continue}d===-1&&(p=!1,d=w+1),r===46?l===-1?l=w:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||d===-1||g===0||g===1&&l===d-1&&l===c+1?d!==-1&&(c===0&&t?e.base=e.name=i.slice(1,d):e.base=e.name=i.slice(c,d)):(c===0&&t?(e.name=i.slice(1,l),e.base=i.slice(1,d)):(e.name=i.slice(c,l),e.base=i.slice(c,d)),e.ext=i.slice(l,d)),c>0?e.dir=i.slice(0,c-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,tr=h,tr}function Ma(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return ir?Ua(s):ja(s)}function Ua(s){let f=s.hostname,o=s.pathname;for(let u=0;u<o.length;u++)if(o[u]==="%"){let h=o.codePointAt(u+2)||32;if(o[u+1]==="2"&&h===102||o[u+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(qo,"\\"),o=decodeURIComponent(o),f!=="")return`\\\\${f}${o}`;{let u=o.codePointAt(1)|32,h=o[2];if(u<Wo||u>$o||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function ja(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let f=s.pathname;for(let o=0;o<f.length;o++)if(f[o]==="%"){let u=f.codePointAt(o+2)||32;if(f[o+1]==="2"&&u===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(f)}function La(s){let f=Wi.resolve(s),o=s.charCodeAt(s.length-1);(o===Fo||ir&&o===Do)&&f[f.length-1]!==Wi.sep&&(f+="/");let u=new URL("file://");return f.includes("%")&&(f=f.replace(Ho,"%25")),!ir&&f.includes("\\")&&(f=f.replace(Vo,"%5C")),f.includes(`
`)&&(f=f.replace(zo,"%0A")),f.includes("\r")&&(f=f.replace(Qo,"%0D")),f.includes("	")&&(f=f.replace(Ko,"%09")),u.pathname=f,u}function Lo(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return nr?Na(s):Da(s)}function Na(s){let f=s.hostname,o=s.pathname;for(let u=0;u<o.length;u++)if(o[u]==="%"){let h=o.codePointAt(u+2)||32;if(o[u+1]==="2"&&h===102||o[u+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(os,"\\"),o=decodeURIComponent(o),f!=="")return`\\\\${f}${o}`;{let u=o.codePointAt(1)|32,h=o[2];if(u<is||u>ns||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Da(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let f=s.pathname;for(let o=0;o<f.length;o++)if(f[o]==="%"){let u=f.codePointAt(o+2)||32;if(f[o+1]==="2"&&u===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(f)}function No(s){let f=Di.resolve(s),o=s.charCodeAt(s.length-1);(o===rs||nr&&o===ts)&&f[f.length-1]!==Di.sep&&(f+="/");let u=new URL("file://");return f.includes("%")&&(f=f.replace(ss,"%25")),!nr&&f.includes("\\")&&(f=f.replace(as,"%5C")),f.includes(`
`)&&(f=f.replace(ls,"%0A")),f.includes("\r")&&(f=f.replace(us,"%0D")),f.includes("	")&&(f=f.replace(hs,"%09")),u.pathname=f,u}var Oe,vn,Ge,En,Sn,An,In,zt,Sr,Ar,Ir,kn,Tn,Qt,_t,Kt,tr,Fi,Wi,On,Do,Fo,Wo,$o,ir,qo,Ho,Vo,zo,Qo,Ko,Pn,Yo,Go,Jo,Xo,Zo,es,ts,rs,is,ns,nr,os,ss,as,ls,us,hs,Fa=qe(()=>{oe(),ae(),se(),Ia(),Ta(),Pa(),xa(),Uo(),Oe={},vn=dt,Ge={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},Oe.parse=Lt,Oe.resolve=function(s,f){return Lt(s,!1,!0).resolve(f)},Oe.resolveObject=function(s,f){return s?Lt(s,!1,!0).resolveObject(f):f},Oe.format=function(s){return Ge.isString(s)&&(s=Lt(s)),s instanceof Ke?s.format():Ke.prototype.format.call(s)},Oe.Url=Ke,En=/^([a-z0-9.+-]+:)/i,Sn=/:[0-9]*$/,An=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,In=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),zt=["'"].concat(In),Sr=["%","/","?",";","#"].concat(zt),Ar=["/","?","#"],Ir=/^[+a-z0-9A-Z_-]{0,63}$/,kn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tn={javascript:!0,"javascript:":!0},Qt={javascript:!0,"javascript:":!0},_t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Kt=Je,Ke.prototype.parse=function(s,f,o){if(!Ge.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var u=s.indexOf("?"),h=u!==-1&&u<s.indexOf("#")?"?":"#",i=s.split(h);i[0]=i[0].replace(/\\/g,"/");var e=s=i.join(h);if(e=e.trim(),!o&&s.split("#").length===1){var r=An.exec(e);if(r)return this.path=e,this.href=e,this.pathname=r[1],r[2]?(this.search=r[2],this.query=f?Kt.parse(this.search.substr(1)):this.search.substr(1)):f&&(this.search="",this.query={}),this}var t=En.exec(e);if(t){var n=(t=t[0]).toLowerCase();this.protocol=n,e=e.substr(t.length)}if(o||t||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=e.substr(0,2)==="//";!l||t&&Qt[t]||(e=e.substr(2),this.slashes=!0)}if(!Qt[t]&&(l||t&&!_t[t])){for(var c,d,p=-1,w=0;w<Ar.length;w++)(g=e.indexOf(Ar[w]))!==-1&&(p===-1||g<p)&&(p=g);for((d=p===-1?e.lastIndexOf("@"):e.lastIndexOf("@",p))!==-1&&(c=e.slice(0,d),e=e.slice(d+1),this.auth=decodeURIComponent(c)),p=-1,w=0;w<Sr.length;w++){var g;(g=e.indexOf(Sr[w]))!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=e.length),this.host=e.slice(0,p),e=e.slice(p),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var E=this.hostname.split(/\./),b=(w=0,E.length);w<b;w++){var _=E[w];if(_&&!_.match(Ir)){for(var k="",T=0,S=_.length;T<S;T++)_.charCodeAt(T)>127?k+="x":k+=_[T];if(!k.match(Ir)){var I=E.slice(0,w),C=E.slice(w+1),W=_.match(kn);W&&(I.push(W[1]),C.unshift(W[2])),C.length&&(e="/"+C.join(".")+e),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=vn.toASCII(this.hostname));var K=this.port?":"+this.port:"",le=this.hostname||"";this.host=le+K,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!Tn[n])for(w=0,b=zt.length;w<b;w++){var U=zt[w];if(e.indexOf(U)!==-1){var V=encodeURIComponent(U);V===U&&(V=escape(U)),e=e.split(U).join(V)}}var Q=e.indexOf("#");Q!==-1&&(this.hash=e.substr(Q),e=e.slice(0,Q));var L=e.indexOf("?");if(L!==-1?(this.search=e.substr(L),this.query=e.substr(L+1),f&&(this.query=Kt.parse(this.query)),e=e.slice(0,L)):f&&(this.search="",this.query={}),e&&(this.pathname=e),_t[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){K=this.pathname||"";var pe=this.search||"";this.path=K+pe}return this.href=this.format(),this},Ke.prototype.format=function(){var s=this.auth||"";s&&(s=(s=encodeURIComponent(s)).replace(/%3A/i,":"),s+="@");var f=this.protocol||"",o=this.pathname||"",u=this.hash||"",h=!1,i="";this.host?h=s+this.host:this.hostname&&(h=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&Ge.isObject(this.query)&&Object.keys(this.query).length&&(i=Kt.stringify(this.query));var e=this.search||i&&"?"+i||"";return f&&f.substr(-1)!==":"&&(f+=":"),this.slashes||(!f||_t[f])&&h!==!1?(h="//"+(h||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):h||(h=""),u&&u.charAt(0)!=="#"&&(u="#"+u),e&&e.charAt(0)!=="?"&&(e="?"+e),f+h+(o=o.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(e=e.replace("#","%23"))+u},Ke.prototype.resolve=function(s){return this.resolveObject(Lt(s,!1,!0)).format()},Ke.prototype.resolveObject=function(s){if(Ge.isString(s)){var f=new Ke;f.parse(s,!1,!0),s=f}for(var o=new Ke,u=Object.keys(this),h=0;h<u.length;h++){var i=u[h];o[i]=this[i]}if(o.hash=s.hash,s.href==="")return o.href=o.format(),o;if(s.slashes&&!s.protocol){for(var e=Object.keys(s),r=0;r<e.length;r++){var t=e[r];t!=="protocol"&&(o[t]=s[t])}return _t[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(s.protocol&&s.protocol!==o.protocol){if(!_t[s.protocol]){for(var n=Object.keys(s),l=0;l<n.length;l++){var c=n[l];o[c]=s[c]}return o.href=o.format(),o}if(o.protocol=s.protocol,s.host||Qt[s.protocol])o.pathname=s.pathname;else{for(var d=(s.pathname||"").split("/");d.length&&!(s.host=d.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),o.pathname=d.join("/")}if(o.search=s.search,o.query=s.query,o.host=s.host||"",o.auth=s.auth,o.hostname=s.hostname||s.host,o.port=s.port,o.pathname||o.search){var p=o.pathname||"",w=o.search||"";o.path=p+w}return o.slashes=o.slashes||s.slashes,o.href=o.format(),o}var g=o.pathname&&o.pathname.charAt(0)==="/",y=s.host||s.pathname&&s.pathname.charAt(0)==="/",E=y||g||o.host&&s.pathname,b=E,_=o.pathname&&o.pathname.split("/")||[],k=(d=s.pathname&&s.pathname.split("/")||[],o.protocol&&!_t[o.protocol]);if(k&&(o.hostname="",o.port=null,o.host&&(_[0]===""?_[0]=o.host:_.unshift(o.host)),o.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(d[0]===""?d[0]=s.host:d.unshift(s.host)),s.host=null),E=E&&(d[0]===""||_[0]==="")),y)o.host=s.host||s.host===""?s.host:o.host,o.hostname=s.hostname||s.hostname===""?s.hostname:o.hostname,o.search=s.search,o.query=s.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),o.search=s.search,o.query=s.query;else if(!Ge.isNullOrUndefined(s.search))return k&&(o.hostname=o.host=_.shift(),(W=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=W.shift(),o.host=o.hostname=W.shift())),o.search=s.search,o.query=s.query,Ge.isNull(o.pathname)&&Ge.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!_.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var T=_.slice(-1)[0],S=(o.host||s.host||_.length>1)&&(T==="."||T==="..")||T==="",I=0,C=_.length;C>=0;C--)(T=_[C])==="."?_.splice(C,1):T===".."?(_.splice(C,1),I++):I&&(_.splice(C,1),I--);if(!E&&!b)for(;I--;I)_.unshift("..");!E||_[0]===""||_[0]&&_[0].charAt(0)==="/"||_.unshift(""),S&&_.join("/").substr(-1)!=="/"&&_.push("");var W,K=_[0]===""||_[0]&&_[0].charAt(0)==="/";return k&&(o.hostname=o.host=K?"":_.length?_.shift():"",(W=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=W.shift(),o.host=o.hostname=W.shift())),(E=E||o.host&&_.length)&&!K&&_.unshift(""),_.length?o.pathname=_.join("/"):(o.pathname=null,o.path=null),Ge.isNull(o.pathname)&&Ge.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=s.auth||o.auth,o.slashes=o.slashes||s.slashes,o.href=o.format(),o},Ke.prototype.parseHost=function(){var s=this.host,f=Sn.exec(s);f&&((f=f[0])!==":"&&(this.port=f.substr(1)),s=s.substr(0,s.length-f.length)),s&&(this.hostname=s)},Oe.Url,Oe.format,Oe.resolve,Oe.resolveObject,tr={},Fi=!1,Wi=Ba(),On=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Oe.URL=typeof URL<"u"?URL:null,Oe.pathToFileURL=La,Oe.fileURLToPath=Ma,Oe.Url,Oe.format,Oe.resolve,Oe.resolveObject,Oe.URL,Do=92,Fo=47,Wo=97,$o=122,ir=On==="win32",qo=/\//g,Ho=/%/g,Vo=/\\/g,zo=/\n/g,Qo=/\r/g,Ko=/\t/g,Pn=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Oe.URL=typeof URL<"u"?URL:null,Oe.pathToFileURL=No,Oe.fileURLToPath=Lo,Yo=Oe.Url,Go=Oe.format,Jo=Oe.resolve,Xo=Oe.resolveObject,Zo=Oe.parse,es=Oe.URL,ts=92,rs=47,is=97,ns=122,nr=Pn==="win32",os=/\//g,ss=/%/g,as=/\\/g,ls=/\n/g,us=/\r/g,hs=/\t/g}),Wa=de((s,f)=>{"use strict";oe(),ae(),se(),f.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Yi=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferedDuplex=void 0,s.writev=u;var f=Pt(),o=(De(),Re(Ne));function u(i,e){let r=new Array(i.length);for(let t=0;t<i.length;t++)typeof i[t].chunk=="string"?r[t]=o.Buffer.from(i[t].chunk,"utf8"):r[t]=i[t].chunk;this._write(o.Buffer.concat(r),"binary",e)}var h=class extends f.Duplex{constructor(i,e,r){super({objectMode:!0}),this.proxy=e,this.socket=r,this.writeQueue=[],i.objectMode||(this._writev=u.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",t=>{!this.destroyed&&this.readable&&this.push(t)})}_read(i){this.proxy.read(i)}_write(i,e,r){this.isSocketOpen?this.writeToProxy(i,e,r):this.writeQueue.push({chunk:i,encoding:e,cb:r})}_final(i){this.writeQueue=[],this.proxy.end(i)}_destroy(i,e){this.writeQueue=[],this.proxy.destroy(),e(i)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(i,e,r){this.proxy.write(i,e)===!1?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:i,encoding:e,cb:r}=this.writeQueue.shift();this.writeToProxy(i,e,r)}}};s.BufferedDuplex=h}),Yt=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(s,"__esModule",{value:!0}),s.streamBuilder=s.browserStreamBuilder=void 0;var o=(De(),Re(Ne)),u=f(Wa()),h=f(lt()),i=Pt(),e=f(ur()),r=Yi(),t=(0,h.default)("mqttjs:ws"),n=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function l(E,b){let _=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(_=E.transformWsUrl(_,E,b)),_}function c(E){let b=E;return E.port||(E.protocol==="wss"?b.port=443:b.port=80),E.path||(b.path="/"),E.wsOptions||(b.wsOptions={}),!e.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&n.forEach(_=>{Object.prototype.hasOwnProperty.call(E,_)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,_)&&(b.wsOptions[_]=E[_])}),b}function d(E){let b=c(E);if(b.hostname||(b.hostname=b.host),!b.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);b.hostname=_.hostname,b.port||(b.port=Number(_.port))}return b.objectMode===void 0&&(b.objectMode=!(b.binary===!0||b.binary===void 0)),b}function p(E,b,_){t("createWebSocket"),t(`protocol: ${_.protocolId} ${_.protocolVersion}`);let k=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";t(`creating new Websocket for url: ${b} and protocol: ${k}`);let T;return _.createWebsocket?T=_.createWebsocket(b,[k],_):T=new u.default(b,[k],_.wsOptions),T}function w(E,b){let _=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt",k=l(b,E),T;return b.createWebsocket?T=b.createWebsocket(k,[_],b):T=new WebSocket(k,[_]),T.binaryType="arraybuffer",T}var g=(E,b)=>{t("streamBuilder");let _=c(b);_.hostname=_.hostname||_.host||"localhost";let k=l(_,E),T=p(E,k,_),S=u.default.createWebSocketStream(T,_.wsOptions);return S.url=k,T.on("close",()=>{S.destroy()}),S};s.streamBuilder=g;var y=(E,b)=>{t("browserStreamBuilder");let _,k=d(b).browserBufferSize||1024*512,T=b.browserBufferTimeout||1e3,S=!b.objectMode,I=w(E,b),C=K(b,L,pe);b.objectMode||(C._writev=r.writev.bind(C)),C.on("close",()=>{I.close()});let W=typeof I.addEventListener<"u";I.readyState===I.OPEN?(_=C,_.socket=I):(_=new r.BufferedDuplex(b,C,I),W?I.addEventListener("open",le):I.onopen=le),W?(I.addEventListener("close",U),I.addEventListener("error",V),I.addEventListener("message",Q)):(I.onclose=U,I.onerror=V,I.onmessage=Q);function K(ce,fe,me){let q=new i.Transform({objectMode:ce.objectMode});return q._write=fe,q._flush=me,q}function le(){t("WebSocket onOpen"),_ instanceof r.BufferedDuplex&&_.socketReady()}function U(ce){t("WebSocket onClose",ce),_.end(),_.destroy()}function V(ce){t("WebSocket onError",ce);let fe=new Error("WebSocket error");fe.event=ce,_.destroy(fe)}async function Q(ce){if(!C||C.destroyed||!C.readable)return;let{data:fe}=ce;fe instanceof ArrayBuffer?fe=o.Buffer.from(fe):fe instanceof Blob?fe=o.Buffer.from(await new Response(fe).arrayBuffer()):fe=o.Buffer.from(fe,"utf8"),C.push(fe)}function L(ce,fe,me){if(I.bufferedAmount>k){setTimeout(L,T,ce,fe,me);return}S&&typeof ce=="string"&&(ce=o.Buffer.from(ce,"utf8"));try{I.send(ce)}catch(q){return me(q)}me()}function pe(ce){I.close(),ce()}return _};s.browserStreamBuilder=y}),Gi={};Bt(Gi,{Server:()=>Be,Socket:()=>Be,Stream:()=>Be,_createServerHandle:()=>Be,_normalizeArgs:()=>Be,_setSimultaneousAccepts:()=>Be,connect:()=>Be,createConnection:()=>Be,createServer:()=>Be,default:()=>cs,isIP:()=>Be,isIPv4:()=>Be,isIPv6:()=>Be});function Be(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var cs,fs=qe(()=>{oe(),ae(),se(),cs={_createServerHandle:Be,_normalizeArgs:Be,_setSimultaneousAccepts:Be,connect:Be,createConnection:Be,createServer:Be,isIP:Be,isIPv4:Be,isIPv6:Be,Server:Be,Socket:Be,Stream:Be}}),ds=de((s,f)=>{oe(),ae(),se(),f.exports={}}),Rn=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0});var o=f((fs(),Re(Gi))),u=f(lt()),h=f(ds()),i=(0,u.default)("mqttjs:tcp"),e=(r,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,h.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:n,path:l}=t,c=t.hostname;return i("port %d and host %s",n,c),o.default.createConnection({port:n,host:c,path:l})};s.default=e}),ps={};Bt(ps,{default:()=>gs});var gs,$a=qe(()=>{oe(),ae(),se(),gs={}}),Cn=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__rest||function(l,c){var d={};for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&c.indexOf(p)<0&&(d[p]=l[p]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(l);w<p.length;w++)c.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(l,p[w])&&(d[p[w]]=l[p[w]]);return d},o=s&&s.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(s,"__esModule",{value:!0});var u=o(($a(),Re(ps))),h=o((fs(),Re(Gi))),i=o(lt()),e=o(ds()),r=(0,i.default)("mqttjs:tls");function t(l){let{host:c,port:d,socksProxy:p}=l,w=f(l,["host","port","socksProxy"]);return u.default.connect(p?Object.assign(Object.assign({},w),{socket:(0,e.default)(c,d,p,{timeout:l.socksTimeout})}):l)}var n=(l,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",h.default.isIP(c.host)===0&&(c.servername=c.host),c.rejectUnauthorized=c.rejectUnauthorized!==!1,delete c.path,r("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let d=t(c);d.on("secureConnect",()=>{c.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(w){c.rejectUnauthorized&&l.emit("error",w),d.end()}return d.on("error",p),d};s.default=n}),xn=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=(De(),Re(Ne)),o=Pt(),u=Yi(),h,i,e;function r(){let d=new o.Transform;return d._write=(p,w,g)=>{h.send({data:p.buffer,success(){g()},fail(y){g(new Error(y))}})},d._flush=p=>{h.close({success(){p()}})},d}function t(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function n(d,p){let w=d.protocol==="wxs"?"wss":"ws",g=`${w}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(g=`${w}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(g=d.transformWsUrl(g,d,p)),g}function l(){h.onOpen(()=>{e.socketReady()}),h.onMessage(d=>{let{data:p}=d;p instanceof ArrayBuffer?p=f.Buffer.from(p):p=f.Buffer.from(p,"utf8"),i.push(p)}),h.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),h.onError(d=>{let p=new Error(d.errMsg);e.destroy(p)})}var c=(d,p)=>{if(p.hostname=p.hostname||p.host,!p.hostname)throw new Error("Could not determine host. Specify host manually.");let w=p.protocolId==="MQIsdp"&&p.protocolVersion===3?"mqttv3.1":"mqtt";t(p);let g=n(p,d);h=wx.connectSocket({url:g,protocols:[w]}),i=r(),e=new u.BufferedDuplex(p,i,h),e._destroy=(E,b)=>{h.close({success(){b&&b(E)}})};let y=e.destroy;return e.destroy=(E,b)=>(e.destroy=y,setTimeout(()=>{h.close({fail(){e._destroy(E,b)}})},0),e),l(),e};s.default=c}),Bn=de(s=>{"use strict";oe(),ae(),se(),Object.defineProperty(s,"__esModule",{value:!0});var f=(De(),Re(Ne)),o=Pt(),u=Yi(),h,i,e,r=!1;function t(){let p=new o.Transform;return p._write=(w,g,y)=>{h.sendSocketMessage({data:w.buffer,success(){y()},fail(){y(new Error)}})},p._flush=w=>{h.closeSocket({success(){w()}})},p}function n(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function l(p,w){let g=p.protocol==="alis"?"wss":"ws",y=`${g}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(y=`${g}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(y=p.transformWsUrl(y,p,w)),y}function c(){r||(r=!0,h.onSocketOpen(()=>{e.socketReady()}),h.onSocketMessage(p=>{if(typeof p.data=="string"){let w=f.Buffer.from(p.data,"base64");i.push(w)}else{let w=new FileReader;w.addEventListener("load",()=>{let g=w.result;g instanceof ArrayBuffer?g=f.Buffer.from(g):g=f.Buffer.from(g,"utf8"),i.push(g)}),w.readAsArrayBuffer(p.data)}}),h.onSocketClose(()=>{e.end(),e.destroy()}),h.onSocketError(p=>{e.destroy(p)}))}var d=(p,w)=>{if(w.hostname=w.hostname||w.host,!w.hostname)throw new Error("Could not determine host. Specify host manually.");let g=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";n(w);let y=l(w,p);return h=w.my,h.connectSocket({url:y,protocols:g}),i=t(),e=new u.BufferedDuplex(w,i,h),c(),e};s.default=d}),qa=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0}),s.connectAsync=l;var o=f(lt()),u=f((Fa(),Re(jo))),h=f(Bi()),i=f(ur());typeof Ie?.nextTick!="function"&&(Ie.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),r=null;function t(c){let d;c.auth&&(d=c.auth.match(/^(.+):(.+)$/),d?(c.username=d[1],c.password=d[2]):c.username=c.auth)}function n(c,d){var p,w,g;if(e("connecting to an MQTT broker..."),typeof c=="object"&&!d&&(d=c,c=""),d=d||{},c&&typeof c=="string"){let b=u.default.parse(c,!0),_={};if(b.port!=null&&(_.port=Number(b.port)),_.host=b.hostname,_.query=b.query,_.auth=b.auth,_.protocol=b.protocol,_.path=b.path,d=Object.assign(Object.assign({},_),d),!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||((p=d.protocol)===null||p===void 0?void 0:p.includes("+unix")),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!(!((w=d.protocol)===null||w===void 0)&&w.startsWith("ws"))&&!(!((g=d.protocol)===null||g===void 0)&&g.startsWith("wx"))&&delete d.path,t(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),i.default||d.unixSocket?d.socksProxy=void 0:d.socksProxy===void 0&&typeof Ie<"u"&&(d.socksProxy=Ie.env.MQTTJS_SOCKS_PROXY),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(r||(r={},!i.default&&!d.forceNativeWebSocket?(r.ws=Yt().streamBuilder,r.wss=Yt().streamBuilder,r.mqtt=Rn().default,r.tcp=Rn().default,r.ssl=Cn().default,r.tls=r.ssl,r.mqtts=Cn().default):(r.ws=Yt().browserStreamBuilder,r.wss=Yt().browserStreamBuilder,r.wx=xn().default,r.wxs=xn().default,r.ali=Bn().default,r.alis=Bn().default)),!r[d.protocol]){let b=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((_,k)=>b&&k%2===0?!1:typeof r[_]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function y(b){return d.servers&&((!b._reconnectCount||b._reconnectCount===d.servers.length)&&(b._reconnectCount=0),d.host=d.servers[b._reconnectCount].host,d.port=d.servers[b._reconnectCount].port,d.protocol=d.servers[b._reconnectCount].protocol?d.servers[b._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,b._reconnectCount++),e("calling streambuilder for",d.protocol),r[d.protocol](b,d)}let E=new h.default(y,d);return E.on("error",()=>{}),E}function l(c,d,p=!0){return new Promise((w,g)=>{let y=n(c,d),E={connect:_=>{b(),w(y)},end:()=>{b(),w(y)},error:_=>{b(),y.end(),g(_)}};p===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function b(){Object.keys(E).forEach(_=>{y.off(_,E[_])})}Object.keys(E).forEach(_=>{y.on(_,E[_])})})}s.default=n}),Mn=de(s=>{"use strict";oe(),ae(),se();var f=s&&s.__createBinding||(Object.create?function(p,w,g,y){y===void 0&&(y=g);var E=Object.getOwnPropertyDescriptor(w,g);(!E||("get"in E?!w.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return w[g]}}),Object.defineProperty(p,y,E)}:function(p,w,g,y){y===void 0&&(y=g),p[y]=w[g]}),o=s&&s.__setModuleDefault||(Object.create?function(p,w){Object.defineProperty(p,"default",{enumerable:!0,value:w})}:function(p,w){p.default=w}),u=s&&s.__importStar||function(){var p=function(w){return p=Object.getOwnPropertyNames||function(g){var y=[];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(y[y.length]=E);return y},p(w)};return function(w){if(w&&w.__esModule)return w;var g={};if(w!=null)for(var y=p(w),E=0;E<y.length;E++)y[E]!=="default"&&f(g,w,y[E]);return o(g,w),g}}(),h=s&&s.__exportStar||function(p,w){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(w,g)&&f(w,p,g)},i=s&&s.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=s.KeepaliveManager=s.UniqueMessageIdProvider=s.DefaultMessageIdProvider=s.Store=s.MqttClient=s.connectAsync=s.connect=s.Client=void 0;var e=i(Bi());s.MqttClient=e.default;var r=i(co());s.DefaultMessageIdProvider=r.default;var t=i(Aa());s.UniqueMessageIdProvider=t.default;var n=i(fo());s.Store=n.default;var l=u(qa());s.connect=l.default,Object.defineProperty(s,"connectAsync",{enumerable:!0,get:function(){return l.connectAsync}});var c=i(Ro());s.KeepaliveManager=c.default,s.Client=e.default,h(Bi(),s),h(Ut(),s);var d=lr();Object.defineProperty(s,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),Ha=de(s=>{oe(),ae(),se();var f=s&&s.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var l=Object.getOwnPropertyDescriptor(r,t);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,l)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),o=s&&s.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),u=s&&s.__importStar||function(){var e=function(r){return e=Object.getOwnPropertyNames||function(t){var n=[];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(n[n.length]=l);return n},e(r)};return function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n=e(r),l=0;l<n.length;l++)n[l]!=="default"&&f(t,r,n[l]);return o(t,r),t}}(),h=s&&s.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&f(r,e,t)};Object.defineProperty(s,"__esModule",{value:!0});var i=u(Mn());s.default=i,h(Mn(),s)}),Va=Ha();export{Va as default};
