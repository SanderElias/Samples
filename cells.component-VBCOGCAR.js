import{Aa as h,Ac as u,Bc as B,Fb as C,Hb as v,Ib as y,Kb as D,Lb as _,Lc as x,Nc as b,Qb as S,Tb as z,fa as r,hb as p,ka as f,kc as M,la as g,lc as k,mc as w,pb as m,ta as d}from"./chunk-2IJT2MYE.js";import"./chunk-DAQOROHW.js";var $=(t,l)=>Math.round(Math.random()*(l-t))+t,I=(()=>{class t{constructor(){this.cellData=x.required(),this.elm=r(h).nativeElement,this.zone=r(m),this.aliveColor=`oklch(${$(55,95)}% 75% 173`,this.deadColor=`oklch(${$(10,55)}% 50% 280`,this.id=u(()=>this.cellData().id),this.alive=u(()=>this.cellData().alive),this.setBg=()=>this.zone.runOutsideAngular(()=>this.elm.style.setProperty("--cellBg",this.alive()?this.aliveColor:this.deadColor)),this.dummy=B(()=>this.setBg())}ngOnInit(){this.setBg()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["se-cell"]],inputs:{cellData:[1,"cellData"]},outputs:{cellData:"cellDataChange"},decls:0,vars:0,template:function(e,s){},styles:["[_nghost-%COMP%]{display:flex;width:var(--cellSize);aspect-ratio:1;align-items:center;justify-content:center;background-color:var(--cellBg);border-radius:.25rem;padding:0rem;overflow:none;text-overflow:ellipsis}"]})}}return t})();function E(t,l){if(t&1){let i=S();D(0,"se-cell",1),w("cellDataChange",function(s){let a=f(i).$implicit;return k(a,s),g(s)}),_()}if(t&2){let i=l.$implicit;M("cellData",i)}}var P=(t,l)=>Math.round(Math.random()*(l-t))+t,Z=(()=>{class t{constructor(){this.elm=r(h).nativeElement,this.zone=r(m),this.cdr=r(b),this.isAlive=d(!1),this.gridSize=d(100),this.cells=d(Array.from({length:200},(i,e)=>d({id:e,alive:Math.random()<.06}))),this.growList=async()=>{let i=this.gridSize()*this.gridSize();for(;this.cells().length<i;){let e=this.cells().length,s=250,a=e+s>i?i-e:s,c=[];for(let o=0;o<a;o+=1)c.push(d({id:e+o,alive:Math.random()<.06}));this.cells.update(o=>o.concat(c)),await new Promise(o=>setTimeout(o,5))}console.log(`Done, created ${i} in a ${this.gridSize()} x ${this.gridSize()} grid.`)},this.repopulate=()=>this.cells().forEach(i=>i.update(({id:e})=>({id:e,alive:Math.random()<.06}))),this.calcGrid=()=>{if(typeof window>"u")return;let e=window.getComputedStyle(this.elm).getPropertyValue("grid-template-columns").split(" ").length;this.gridSize.set(e)},this.aliveColor=`oklch(${P(55,95)}% 75% 173`,this.deadColor=`oklch(${P(10,55)}% 50% 280`,this.cycle=async()=>{let i=this.cells(),e=this.gridSize();for(let s of i){let{id:a,alive:c}=s(),o=O(a,e).reduce((n,T)=>n+=i[T]?.().alive?1:0,0);if(c&&!(o===2||o===3)){s.set({id:a,alive:!1});continue}!c&&o===3&&s.set({id:a,alive:!0})}this.isAlive()&&await new Promise(s=>setTimeout(()=>this.cycle(),100))},this.onClick=i=>{this.zone.runOutsideAngular(()=>{this.started?(clearInterval(this.started),this.repopulate(),this.started=void 0):this.started=setInterval(this.cycle,100)})}}async ngOnInit(){this.calcGrid(),await this.growList(),this.isAlive.set(!0),this.cycle()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["se-cells"]],hostBindings:function(e,s){e&1&&z("click",function(){return s.onClick()})},decls:2,vars:0,consts:[[3,"cellData"],[3,"cellDataChange","cellData"]],template:function(e,s){e&1&&v(0,E,1,1,"se-cell",0,C),e&2&&y(s.cells())},dependencies:[I],styles:['@property --cellBg{syntax: "<color>"; inherits: true; initial-value: black;}@property --cellSize{syntax: "<length> | <percentage>"; inherits: true; initial-value: 1.25rem;}[_nghost-%COMP%]{--cellBg: oklch(.5 .5 150);--cellSize: 15px;display:grid;height:95vh;aspect-ratio:1;grid-template-columns:repeat(auto-fit,var(--cellSize));grid-template-rows:repeat(auto-fit,var(--cellSize));gap:.15rem}'],changeDetection:0})}}return t})();function O(t,l){let i=n=>n<l?n-l+l*l:n-l,e=n=>n+l>l*l-1?n+l-l*l:n+l,s=n=>n%l===0?n+l-1:n-1,a=n=>n+1%l===0?n-l+1:n+1,c=i(t),o=e(t);return[s(c),c,a(c),s(t),a(t),s(o),o,a(o)]}export{Z as CellsComponent};
