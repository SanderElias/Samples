import{a as et}from"./chunk-PUMJTBDU.js";import{g as Z,h as tt,l as j}from"./chunk-ELRT2GQ7.js";import{m as U,n as X,q as Y}from"./chunk-WA577VHR.js";import{$a as Q,B as R,Eb as W,Fb as B,Ib as q,Lb as z,Mb as G,Oa as T,Ob as K,R as x,Ta as w,V as H,Va as N,X as d,Za as O,aa as h,ab as m,bb as p,cb as V,db as F,eb as J,f as k,gb as P,ha as g,ia as v,kb as $,lb as I,o as f,oa as S,p as D,pa as _,qb as l,rb as A,w as L}from"./chunk-MHRY5PTC.js";import{a as b,b as M}from"./chunk-G5KKTNWD.js";var c=class{constructor(){}ngOnInit(){}},y=c;(()=>{c.\u0275fac=function(t){return new(t||c)}})(),(()=>{c.\u0275cmp=g({type:c,selectors:[["app-local-state"]],decls:1,vars:0,template:function(t,o){t&1&&V(0,"router-outlet")},dependencies:[tt],encapsulation:2})})();var nt=["b"];function rt(a,e){if(a&1){let t=P();F(0),m(1,"button",1,2),$("click",function(){S(t);let i=I();return _(i.updateCounterWith(-1))}),l(3,"-1"),p(),m(4,"span"),l(5),p(),m(6,"button",1,2),$("click",function(){S(t);let i=I();return _(i.updateCounterWith(1))}),l(8,"+1"),p(),J()}if(a&2){let t=e.ngIf;w(5),A(t.count)}}var s=class{constructor(e){this.route=e,this.localState$=new k({count:0}),this.id$=this.route.params.pipe(x("id"),f(t=>+t)),this.clicks$=this.localState$.pipe(x("buttons"),R(t=>t instanceof q),f(t=>t.toArray().map(o=>o.nativeElement)),d(t=>t.forEach(o=>console.log(o))),H(t=>L(t,"click")),d(t=>console.log({cl:t}))).subscribe(console.log),this.vm$=D({id:this.id$,state:this.localState$}).pipe(f(t=>({id:t.id,count:t.state.count||0})),d(console.log))}ngOnInit(){}updateCounterWith(e){this.localState$.next(M(b({},this.localState$.value),{count:this.localState$.value.count+e}))}},u=s;(()=>{s.\u0275fac=function(t){return new(t||s)(N(Z))}})(),(()=>{s.\u0275cmp=g({type:s,selectors:[["app-ls-home"]],viewQuery:function(t,o){if(t&1&&G(nt,5,T),t&2){let i;z(i=K())&&(o.buttons=i)}},decls:4,vars:3,consts:[[4,"ngIf"],[3,"click"],["b",""]],template:function(t,o){t&1&&(m(0,"h2"),l(1," test some state"),p(),O(2,rt,9,1,"ng-container",0),W(3,"async")),t&2&&(w(2),Q("ngIf",B(3,1,o.vm$)))},dependencies:[U,X],encapsulation:2})})();et([ct("localState$")],u.prototype,"buttons",void 0);var vt=Symbol("subjectProp");function ct(a){return(e,t)=>{Object.defineProperty(e,t,{set:function(o){let i=this[a];o&&i.next(M(b({},i.value),{[t]:o}))},get:function(){throw new Error(`Don't read the "${t}" directly, instead take it from the "${a}" behaviourSubject`)},configurable:!1,enumerable:!0})}}var at=[{path:"",component:y,children:[{path:":id",component:u},{path:"",redirectTo:"./1",pathMatch:"full"}]}],n=class{},C=n;(()=>{n.\u0275fac=function(t){return new(t||n)}})(),(()=>{n.\u0275mod=v({type:n})})(),(()=>{n.\u0275inj=h({imports:[j.forChild(at),j]})})();var r=class{},ot=r;(()=>{r.\u0275fac=function(t){return new(t||r)}})(),(()=>{r.\u0275mod=v({type:r})})(),(()=>{r.\u0275inj=h({imports:[Y,C]})})();export{ot as LocalStateModule};
