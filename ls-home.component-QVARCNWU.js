import{b as A}from"./chunk-HCFXSMS6.js";import"./chunk-DDXGVWNK.js";import"./chunk-JLLLHPNP.js";import{g as O}from"./chunk-3UA6KPKX.js";import"./chunk-6QC3C6AT.js";import{Aa as L,Bb as H,Bc as V,C as k,Db as T,Hc as I,Jb as s,Kb as c,Pb as j,R as g,Sb as r,Tb as _,Ua as p,W as w,Xb as M,Yb as W,Zb as D,ea as $,ec as l,fc as b,g as v,gb as h,j as S,ja as d,ka as f,q as m,r as y,sc as P,tc as Q,y as x,za as E}from"./chunk-3AXU7JV2.js";import{a,b as u}from"./chunk-DAQOROHW.js";var B=["b"];function F(o,e){if(o&1){let t=j();s(0,"button",1,0),r("click",function(){d(t);let n=_();return f(n.updateCounterWith(-1))}),l(2,"-1"),c(),s(3,"span"),l(4),c(),s(5,"button",1,0),r("click",function(){d(t);let n=_();return f(n.updateCounterWith(1))}),l(7,"+1"),c()}o&2&&(p(4),b(e.count))}var tt=(()=>{class o{constructor(){this.id=I(0,{transform:t=>+t}),this.localState=V(()=>({count:this.id()||0,message:"Hello"})),this.updateCounterWith=t=>{this.localState.update(i=>{let n=i.count+t;return u(a({},i),{count:n})})}}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=h({type:o,selectors:[["app-ls-home"]],inputs:{id:[1,"id"]},decls:9,vars:1,consts:[[3,"click"]],template:function(i,n){i&1&&(s(0,"h2"),l(1,"test some state"),c(),s(2,"section")(3,"button",0),r("click",function(){return n.updateCounterWith(-1)}),l(4,"-1"),c(),s(5,"span"),l(6),c(),s(7,"button",0),r("click",function(){return n.updateCounterWith(1)}),l(8,"+1"),c()()),i&2&&(p(6),b(n.localState().count))},styles:["section[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}"]})}}return o})(),C=class o{constructor(){this.route=$(A),this.localState$=new v({count:0}),this.id$=this.route.params.pipe(m(({id:e})=>+e)),this.clicks$=this.localState$.pipe(g("buttons"),k(e=>e instanceof L),m(e=>e.toArray().map(t=>t.nativeElement)),w(e=>x(e,"click"))).subscribe(console.log),this.vm$=y({id:this.id$,state:this.localState$}).pipe(m(e=>({id:e.id,count:e.state.count||0})))}ngOnInit(){}updateCounterWith(e){this.localState$.next(u(a({},this.localState$.value),{count:this.localState$.value.count??0+e}))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=h({type:o,selectors:[["app-ls-home"]],viewQuery:function(t,i){if(t&1&&M(B,5,E),t&2){let n;W(n=D())&&(i.buttons=n)}},decls:4,vars:3,consts:[["b",""],[3,"click"]],template:function(t,i){if(t&1&&(s(0,"h2"),l(1,"test some state"),c(),H(2,F,8,1),P(3,"async")),t&2){let n;p(2),T((n=Q(3,1,i.vm$))?2:-1,n)}},dependencies:[O],encapsulation:2})}};S([q("localState$")],C.prototype,"buttons",void 0);var et=Symbol("subjectProp");function q(o){return(e,t)=>{Object.defineProperty(e,t,{set:function(i){let n=this[o];i&&n.next(u(a({},n.value),{[t]:i}))},get:function(){throw new Error(`Don't read the "${t}" directly, instead take it from the "${o}" behaviourSubject`)},configurable:!1,enumerable:!0})}}export{tt as LsHomeComponent,q as ObservableInput};
