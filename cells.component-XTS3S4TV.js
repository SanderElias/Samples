import{Bc as z,Cc as b,Da as m,Dc as k,Qc as u,Rb as v,Tb as C,Ub as y,Wb as D,Xb as _,_c as w,ad as B,dc as M,ea as r,gd as x,hc as S,ja as g,ka as f,rb as p,sa as h,va as d}from"./chunk-KIBRB3UE.js";import"./chunk-C6Q5SG76.js";var N=(t,l)=>Math.round(Math.random()*(l-t))+t,$=(()=>{class t{constructor(){this.cellData=w.required(),this.elm=r(m).nativeElement,this.zone=r(h),this.aliveColor=`oklch(${N(55,95)}% 75% 173`,this.deadColor=`oklch(${N(10,55)}% 50% 280`,this.id=u(()=>this.cellData().id),this.alive=u(()=>this.cellData().alive),this.setBg=()=>this.zone.runOutsideAngular(()=>this.elm.style.setProperty("--cellBg",this.alive()?this.aliveColor:this.deadColor)),this._=x(()=>this.setBg())}ngOnInit(){this.setBg()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["se-cell"]],inputs:{cellData:[1,"cellData"]},outputs:{cellData:"cellDataChange"},decls:0,vars:0,template:function(e,s){},styles:["[_nghost-%COMP%]{display:flex;width:var(--cellSize);aspect-ratio:1;align-items:center;justify-content:center;background-color:var(--cellBg);border-radius:.25rem;padding:0rem;overflow:none;text-overflow:ellipsis}"]})}}return t})();function P(t,l){if(t&1){let i=M();D(0,"se-cell",1),k("cellDataChange",function(s){let a=g(i).$implicit;return b(a,s),f(s)}),_()}if(t&2){let i=l.$implicit;z("cellData",i)}}var A=(t,l)=>Math.round(Math.random()*(l-t))+t,Z=(()=>{class t{constructor(){this.elm=r(m).nativeElement,this.zone=r(h),this.cdr=r(B),this.isAlive=d(!1),this.gridSize=d(100),this.cells=d(Array.from({length:200},(i,e)=>d({id:e,alive:Math.random()<.06}))),this.growList=async()=>{let i=this.gridSize()*this.gridSize();for(;this.cells().length<i;){let e=this.cells().length,s=250,a=e+s>i?i-e:s,c=[];for(let o=0;o<a;o+=1)c.push(d({id:e+o,alive:Math.random()<.06}));this.cells.update(o=>o.concat(c)),await new Promise(o=>setTimeout(o,5))}console.log(`Done, created ${i} in a ${this.gridSize()} x ${this.gridSize()} grid.`)},this.repopulate=()=>this.cells().forEach(i=>i.update(({id:e})=>({id:e,alive:Math.random()<.06}))),this.calcGrid=()=>{if(typeof window>"u")return;let e=window.getComputedStyle(this.elm).getPropertyValue("grid-template-columns").split(" ").length;this.gridSize.set(e)},this.aliveColor=`oklch(${A(55,95)}% 75% 173`,this.deadColor=`oklch(${A(10,55)}% 50% 280`,this.cycle=async()=>{let i=this.cells(),e=this.gridSize();for(let s of i){let{id:a,alive:c}=s(),o=T(a,e).reduce((n,E)=>n+=i[E]?.().alive?1:0,0);if(c&&!(o===2||o===3)){s.set({id:a,alive:!1});continue}!c&&o===3&&s.set({id:a,alive:!0})}this.isAlive()&&await new Promise(s=>setTimeout(()=>this.cycle(),100))},this.onClick=i=>{this.zone.runOutsideAngular(()=>{this.started?(clearInterval(this.started),this.repopulate(),this.started=void 0):this.started=setInterval(this.cycle,100)})}}async ngOnInit(){this.calcGrid(),await this.growList(),this.isAlive.set(!0),this.cycle()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["se-cells"]],hostBindings:function(e,s){e&1&&S("click",function(){return s.onClick()})},decls:2,vars:0,consts:[[3,"cellData"],[3,"cellDataChange","cellData"]],template:function(e,s){e&1&&C(0,P,1,1,"se-cell",0,v),e&2&&y(s.cells())},dependencies:[$],styles:['@property --cellBg{syntax: "<color>"; inherits: true; initial-value: black;}@property --cellSize{syntax: "<length> | <percentage>"; inherits: true; initial-value: 1.25rem;}[_nghost-%COMP%]{--cellBg: oklch(.5 .5 150);--cellSize: 15px;display:grid;height:95vh;aspect-ratio:1;grid-template-columns:repeat(auto-fit,var(--cellSize));grid-template-rows:repeat(auto-fit,var(--cellSize));gap:.15rem}'],changeDetection:0})}}return t})();function T(t,l){let i=n=>n<l?n-l+l*l:n-l,e=n=>n+l>l*l-1?n+l-l*l:n+l,s=n=>n%l===0?n+l-1:n-1,a=n=>n+1%l===0?n-l+1:n+1,c=i(t),o=e(t);return[s(c),c,a(c),s(t),a(t),s(o),o,a(o)]}export{Z as CellsComponent};
