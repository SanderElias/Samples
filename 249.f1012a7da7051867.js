"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[249],{5557:(U,v,t)=>{t.d(v,{t:()=>f});var c=t(8023),m=t(2069);class f extends c.x{constructor(l=1/0,n=1/0,s=m.l){super(),this._bufferSize=l,this._windowTime=n,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,n)}next(l){const{isStopped:n,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:a,_windowTime:i}=this;n||(s.push(l),!u&&s.push(a.now()+i)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(l),{_infiniteTimeWindow:s,_buffer:u}=this,a=u.slice();for(let i=0;i<a.length&&!l.closed;i+=s?1:2)l.next(a[i]);return this._checkFinalizedStatuses(l),n}_trimBuffer(){const{_bufferSize:l,_timestampProvider:n,_buffer:s,_infiniteTimeWindow:u}=this,a=(u?1:2)*l;if(l<1/0&&a<s.length&&s.splice(0,s.length-a),!u){const i=n.now();let o=0;for(let e=1;e<s.length&&s[e]<=i;e+=2)o=e;o&&s.splice(0,o+1)}}}},1995:(U,v,t)=>{t.d(v,{H:()=>l});var c=t(818),m=t(2844),f=t(1830);function l(n=0,s,u=m.P){let a=-1;return null!=s&&((0,f.K)(s)?u=s:a=s),new c.y(i=>{let o=function d(n){return n instanceof Date&&!isNaN(n)}(n)?+n-u.now():n;o<0&&(o=0);let e=0;return u.schedule(function(){i.closed||(i.next(e++),0<=a?this.schedule(void 0,a):i.complete())},o)})}},2147:(U,v,t)=>{t.d(v,{x:()=>d});var c=t(8330),m=t(2085),f=t(8499);function d(n,s=c.y){return n=null!=n?n:l,(0,m.e)((u,a)=>{let i,o=!0;u.subscribe((0,f.x)(a,e=>{const r=s(e);(o||!n(i,r))&&(o=!1,i=r,a.next(e))}))})}function l(n,s){return n===s}},2993:(U,v,t)=>{t.d(v,{j:()=>m});var c=t(7969);function m(...f){const d=f.length;if(0===d)throw new Error("list of properties cannot be empty.");return(0,c.U)(l=>{let n=l;for(let s=0;s<d;s++){const u=null==n?void 0:n[f[s]];if(void 0===u)return;n=u}return n})}},6466:(U,v,t)=>{t.d(v,{d:()=>f});var c=t(5557),m=t(815);function f(d,l,n){let s,u=!1;return d&&"object"==typeof d?({bufferSize:s=1/0,windowTime:l=1/0,refCount:u=!1,scheduler:n}=d):s=null!=d?d:1/0,(0,m.B)({connector:()=>new c.t(s,l,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}},2844:(U,v,t)=>{t.d(v,{P:()=>i,z:()=>a});var c=t(4813);class m extends c.w0{constructor(e,r){super()}schedule(e,r=0){return this}}const f={setInterval(o,e,...r){const{delegate:h}=f;return(null==h?void 0:h.setInterval)?h.setInterval(o,e,...r):setInterval(o,e,...r)},clearInterval(o){const{delegate:e}=f;return((null==e?void 0:e.clearInterval)||clearInterval)(o)},delegate:void 0};var d=t(8308),n=t(2069);class s{constructor(e,r=s.now){this.schedulerActionCtor=e,this.now=r}schedule(e,r=0,h){return new this.schedulerActionCtor(this,e).schedule(h,r)}}s.now=n.l.now;const a=new class u extends s{constructor(e,r=s.now){super(e,r),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:r}=this;if(this._active)return void r.push(e);let h;this._active=!0;do{if(h=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,h){for(;e=r.shift();)e.unsubscribe();throw h}}}(class l extends m{constructor(e,r){super(e,r),this.scheduler=e,this.work=r,this.pending=!1}schedule(e,r=0){if(this.closed)return this;this.state=e;const h=this.id,O=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(O,h,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(O,this.id,r),this}requestAsyncId(e,r,h=0){return f.setInterval(e.flush.bind(e,this),h)}recycleAsyncId(e,r,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return r;f.clearInterval(r)}execute(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(e,r);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,r){let O,h=!1;try{this.work(e)}catch(A){h=!0,O=A||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),O}unsubscribe(){if(!this.closed){const{id:e,scheduler:r}=this,{actions:h}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,d.P)(h,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,super.unsubscribe()}}}),i=a},2069:(U,v,t)=>{t.d(v,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},97:(U,v,t)=>{t.d(v,{b:()=>f});var c=t(818),m=t(5975);function f(d){return!!d&&(d instanceof c.y||(0,m.m)(d.lift)&&(0,m.m)(d.subscribe))}},9550:(U,v,t)=>{t.d(v,{H:()=>_});var c=t(4553),m=t(7472),f=t(4021),l=t(8023),n=t(5619),s=t(1927),u=t(6466),a=t(7969),i=t(5598),o=t(9676),e=t(1995),r=t(8168),h=t(9724);const O=t.e(935).then(t.t.bind(t,5935,23)).then(y=>y).then(({default:y})=>new y);let _=(()=>{class y{constructor(){this.flush$=new l.x,this.updatedUsers$=new l.x,this.allUsers$=this.flush$.pipe((0,n.z)(()=>this.updatedUsers$),(0,s.O)([]),(0,u.d)({bufferSize:1,refCount:!1})),this.admins$=this.allUsers$.pipe((0,a.U)(p=>p.filter(E=>E.isAdmin))),this.users$=this.allUsers$.pipe((0,a.U)(p=>p.filter(E=>!E.isAdmin))),this.flushCache()}addUsers(p){var E=this;return(0,c.Z)(function*(){const P=yield function d(y,b){const p="object"==typeof b;return new Promise((E,P)=>{const x=new f.Hp({next:I=>{E(I),x.unsubscribe()},error:P,complete:()=>{p?E(b.defaultValue):P(new m.K)}});y.subscribe(x)})}(E.allUsers$),x=P.length,I=yield Promise.all(Array.from({length:p}).map(function(){var M=(0,c.Z)(function*(w,D){return Object.assign({id:x+D},yield function S(){return g.apply(this,arguments)}())});return function(w,D){return M.apply(this,arguments)}}()));E.updatedUsers$.next(P.concat(I))})()}saveUser(p){var E=this;return(0,c.Z)(function*(){const P=yield E.allUsers$.pipe((0,i.q)(1)).toPromise(),x=P.findIndex(I=>I.id===p.id);if(x>-1)Object.assign(P[x],p);else{let I;for(;!I||P.findIndex(M=>M.id===I)>-1;)I=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);P.unshift(Object.assign(Object.assign({},p),{id:I}))}E.updatedUsers$.next(P)})()}deleteUser(p){var E=this;return(0,c.Z)(function*(){const P=(yield E.allUsers$.pipe((0,o.P)()).toPromise()).filter(x=>x.id!==p.id);E.updatedUsers$.next(P)})()}flushCache(){var p=this;return(0,c.Z)(function*(){const E=yield O;yield new Promise(P=>setTimeout(P)),p.flush$.next(),(0,e.H)(0,250).pipe((0,r.b)(()=>p.addUsers(E.integer({min:100,max:400}))),(0,i.q)(20)).subscribe()})()}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275prov=h.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function g(){return(g=(0,c.Z)(function*(){const y=yield O;return{userState:y.integer({min:0,max:3}),username:y.name(),isAdmin:y.bool(),isActive:y.bool(),email:y.email()}})).apply(this,arguments)}},9959:(U,v,t)=>{t.d(v,{Hv:()=>s});var c=t(7969),m=t(97),f=t(4945),d=t(5696);function s(u){const a=Object.values(u).map(i=>(0,m.b)(i)?i:(0,f.of)(i));return(0,d.a)(a).pipe((0,c.U)(i=>Object.keys(u).reduce((o,e,r)=>(o[e]=i[r],o),{})))}},4553:(U,v,t)=>{function c(f,d,l,n,s,u,a){try{var i=f[u](a),o=i.value}catch(e){return void l(e)}i.done?d(o):Promise.resolve(o).then(n,s)}function m(f){return function(){var d=this,l=arguments;return new Promise(function(n,s){var u=f.apply(d,l);function a(o){c(u,n,s,a,i,"next",o)}function i(o){c(u,n,s,a,i,"throw",o)}a(void 0)})}}t.d(v,{Z:()=>m})}}]);