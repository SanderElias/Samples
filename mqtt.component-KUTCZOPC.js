import{b as q}from"./chunk-2TH22MIA.js";import{i as j}from"./chunk-3UA6KPKX.js";import"./chunk-6QC3C6AT.js";import{$ as g,C as v,Jb as a,Kb as c,T as d,Ua as y,Y as o,c as f,ea as x,ec as u,f as p,fc as I,gb as S,q as h,sa as b,sc as O,tc as C,zc as l}from"./chunk-3AXU7JV2.js";import{c as m}from"./chunk-DAQOROHW.js";var tt=(()=>{class t{constructor(){this.mqtt=x(D),this.state=b({}),this.cleanState=l(()=>w(this.state())),this.deviceList=l(()=>{let n=this.devices();return console.log(n),n.map(r=>r.friendly_name||r.ieee_address).sort()}),this.msgs$=this.mqtt.messages$,this.devices=q(this.mqtt.listenFor("bridge/devices")),this.msgs$.subscribe({next:n=>{let{topic:r,message:e}=n,i=r.split("/")}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=S({type:t,selectors:[["se-mqtt"]],decls:6,vars:3,template:function(r,e){r&1&&(a(0,"p"),u(1,"mqtt works!"),c(),a(2,"pre")(3,"code"),u(4),O(5,"json"),c()()),r&2&&(y(4),I(C(5,1,e.deviceList())))},dependencies:[j],styles:["[_nghost-%COMP%]{display:block;max-height:99vh;overflow-x:auto}"]})}}return t})(),w=(t,Q="")=>{let e=t,{value:n}=e,r=m(e,["value"]);return Object.keys(r).length===0?n:Object.fromEntries(Object.entries(t).map(([i,s])=>[i,typeof s=="object"?w(s):s]))},D=(()=>{class t{constructor(){this.mqtt=import("./mqtt.esm-6I4VX64K.js"),this.client=this.mqtt.then(n=>n.default.connectAsync("ws://10.0.0.100:1884")),this.bt="zigbee2mqtt",this.messages$=new f(n=>{let r=(e,i)=>{try{n.next({topic:e,message:JSON.parse(i.toString())})}catch{n.next({topic:e,message:i.toString()})}};return this.client.then(e=>{console.log("start listening for MQTT messages"),e.on("message",r)}),()=>{console.log("stop listening for MQTT messages"),this.client.then(e=>e.off("message",r))}}).pipe(d({connector:()=>new p,resetOnComplete:!0}))}listenFor(n){let r=this.client;return n=(Array.isArray(n)?n:[n]).map(e=>e.startsWith(this.bt)?e:`${this.bt}/${e}`),r.then(e=>{e.subscribe(n)}),this.messages$.pipe(v(({topic:e})=>Array.isArray(n)?n.includes(e):n===e),o({error(){r.then(e=>e.unsubscribe(n))},complete(){r.then(e=>e.unsubscribe(n))}}),o(e=>console.log({r:e})),h(({message:e})=>e))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),E=function(t){return t.Config="config",t.Diagnostic="diagnostic",t}(E||{}),A=function(t){return t.DeltaPerInterval20ByDefault="Delta per interval, 20 by default",t.IntervalDuration="Interval duration",t}(A||{}),U=function(t){return t.Delta="Delta",t.Interval="Interval",t}(U||{}),L=function(t){return t.Delta="delta",t.Interval="interval",t}(L||{}),M=function(t){return t.Binary="binary",t.Composite="composite",t.Enum="enum",t.Light="light",t.List="list",t.Numeric="numeric",t.Switch="switch",t}(M||{}),$=function(t){return t.UseMinimumPermittedValue="Use minimum permitted value",t.UsePreviousValue="Use previous value",t}($||{}),k=function(t){return t.Minimum="minimum",t.Previous="previous",t}(k||{}),z=function(t){return t.Off="OFF",t}(z||{}),B=function(t){return t.On="ON",t}(B||{}),T=function(t){return t.Toggle="TOGGLE",t}(T||{}),X=function(t){return t.Ikea="IKEA",t.Tuya="Tuya",t.Xiaomi="Xiaomi",t}(X||{}),_=function(t){return t.The0Xccccccfffe8A8966="0xccccccfffe8a8966",t.The0Xe0798Dfffebc6E5D="0xe0798dfffebc6e5d",t}(_||{}),G=function(t){return t.Endpoint="endpoint",t.Group="group",t}(G||{}),N=function(t){return t.Successful="SUCCESSFUL",t}(N||{}),P=function(t){return t.IKEAOfSweden="IKEA of Sweden",t.Lumi="LUMI",t.TZ3000Gjnozsaz="_TZ3000_gjnozsaz",t.TZE204Ntcy3Xu1="_TZE204_ntcy3xu1",t}(P||{}),K=function(t){return t.Battery="Battery",t.MainsSinglePhase="Mains (single phase)",t}(K||{}),J=function(t){return t.Coordinator="Coordinator",t.EndDevice="EndDevice",t.Router="Router",t}(J||{});export{E as Category,A as FeatureDescription,M as FeatureType,_ as IEEEAddress,N as InterviewState,U as Label,P as Manufacturer,tt as MqttComponent,D as MqttService,K as PowerSource,$ as PresetDescription,L as PropertyEnum,G as TargetType,k as ValueEnum,z as ValueOffEnum,B as ValueOnEnum,T as ValueToggle,X as Vendor,J as Z2MDeviceType};
