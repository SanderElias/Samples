import{a as E}from"./chunk-EXRDGSVY.js";import{$b as k,$c as b,Da as C,Db as f,Fb as M,Hb as T,Ib as d,Jc as _,Kb as p,Lb as g,Qb as s,Rb as l,Sb as w,Xb as h,Ya as i,ac as x,ga as y,lb as L,nc as u,pc as m}from"./chunk-UTYHTRAX.js";import"./chunk-DAQOROHW.js";function A(e,t){if(e&1&&w(0,"div",5),e&2){let n=t.$implicit;f("data-weight",n)}}function F(e,t){if(e&1&&p(0,A,1,1,"div",5,d),e&2){let n=x(2);g(n.puckList())}}function I(e,t){if(e&1&&(s(0,"div",0),M(1,F,2,0),l()),e&2){let n=t.$implicit;f("dropzone",n),i(),T(n===1?1:-1)}}function j(e,t){if(e&1&&(s(0,"div",1),u(1),l()),e&2){let n=t.$implicit;i(),m("Stack ",n)}}function B(e){return Array.from(e.children).find(t=>t.classList.contains("puck"))}function N(e,t){let n=e.children[0],o=+(t?.dataset?.weight||0),r=+(n?.dataset?.weight||0);return t?r===0?!0:r>o:!1}var c,G=(()=>{class e{constructor(){this.#e=y(C).nativeElement,this.pucks=E("toh-pucks",4),this.cols=E("toh-cols",3),this.puckList=_(()=>Array.from({length:this.pucks()},(n,o)=>o+1)),this.colNums=_(()=>Array.from({length:this.cols()},(n,o)=>o+1)),this._=b(()=>{let n=this.#e,o=Array.from(n.querySelectorAll(".stack")),r=Array.from(n.querySelectorAll("[draggable]"));if(o.length!==this.cols())throw new Error("Mismatch in number of stacks");if(r.length!==this.pucks())throw new Error("Mismatch in number of draggables");for(let a of r)a.removeEventListener("dragstart",D),a.removeEventListener("dragend",z),a.addEventListener("dragstart",D),a.addEventListener("dragend",z);for(let a of o)a.removeEventListener("dragover",S),a.removeEventListener("dragleave",P),a.removeEventListener("drop",O),a.addEventListener("dragover",S),a.addEventListener("dragleave",P),a.addEventListener("drop",O)}),this._1=b(()=>{this.#e.style.setProperty("--cols",this.cols().toString()),this.#e.style.setProperty("--pucks",this.pucks().toString())})}#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=L({type:e,selectors:[["ng-component"]],decls:12,vars:4,consts:[[1,"stack"],[1,"label"],[1,"row"],["type","range","min","3","max","10",3,"input","value"],["type","range","min","3","max","5",3,"input","value"],["draggable","true",1,"puck"]],template:function(o,r){o&1&&(p(0,I,2,2,"div",0,d),p(2,j,2,1,"div",1,d),s(4,"label",2)(5,"span"),u(6),l(),s(7,"input",3),k("input",function(v){return r.pucks.set(v.target.valueAsNumber)}),l()(),s(8,"label",2)(9,"span"),u(10),l(),s(11,"input",4),k("input",function(v){return r.cols.set(v.target.valueAsNumber)}),l()()),o&2&&(g(r.colNums()),i(2),g(r.colNums()),i(4),m("Number of pucks: ",r.pucks()),i(),h("value",r.pucks()),i(3),m("Number of stacks: ",r.cols()),i(),h("value",r.cols()))},styles:['@property --cols{syntax: "<integer>"; inherits: true; initial-value: 3;}@property --pucks{syntax: "<integer>"; inherits: true; initial-value: 2;}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(var(--cols),1fr);grid-template-rows:1fr 2rem 1.5rem;gap:.5rem;padding:.5rem;block-size:100%}.row[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;align-items:center;justify-content:center;display:flex;gap:var(--size-2)}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;background-color:var(--surface-2);align-items:center;gap:var(--size-1)}div.stack[_ngcontent-%COMP%]{justify-content:flex-end}.puck[_ngcontent-%COMP%]{--size: attr(data-weight type(<integer>));--_base: calc((100 / var(--pucks)));inline-size:calc(var(--_base) * var(--size) * 1%);color:var(--on-surface);font-size:var(--font-size-4);font-weight:700;padding-block:var(--size-1);block-size:var(--size-8);border-radius:var(--radius-2);cursor:move;background-color:var(--pink-0)}.puck[data-weight="1"][_ngcontent-%COMP%]{background-color:var(--yellow-4)}.puck[data-weight="2"][_ngcontent-%COMP%]{background-color:var(--pink-4)}.puck[data-weight="3"][_ngcontent-%COMP%]{background-color:var(--purple-4)}.puck[data-weight="4"][_ngcontent-%COMP%]{background-color:var(--blue-4)}.puck[data-weight="5"][_ngcontent-%COMP%]{background-color:var(--cyan-4)}.puck[data-weight="6"][_ngcontent-%COMP%]{background-color:var(--teal-4)}.puck[data-weight="7"][_ngcontent-%COMP%]{background-color:var(--green-4)}.puck[data-weight="8"][_ngcontent-%COMP%]{background-color:var(--lime-4)}.puck.placeholder[_ngcontent-%COMP%]{border:4px dashed var(--gray-6);background-color:transparent;box-sizing:border-box}.dragging[_ngcontent-%COMP%]{border:4px dashed var(--gray-6)}.dragover[_ngcontent-%COMP%]{background-color:var(--green-8)}.cantdrop[_ngcontent-%COMP%]{background-color:var(--red-12)}']})}}return e})();function P(e){let t=e.currentTarget;t.classList.remove("dragover"),t.classList.remove("cantdrop"),e.preventDefault()}var O=e=>{let t=e.currentTarget;e.preventDefault(),t.classList.remove("dragover"),t.classList.remove("cantdrop"),N(t,c)&&c&&(t.children.length>0?t.insertBefore(c,t.children[0]):t.appendChild(c),c=void 0)};function D(e){let t=e.currentTarget,n=B(t.parentElement);if(t!==n){e.preventDefault();return}t.classList.add("dragging"),c=t}function z(e){e.currentTarget.classList.remove("dragging")}function S(e){let t=e.currentTarget;c?.parentElement!==t&&(N(t,c)?t.classList.add("dragover"):t.classList.add("cantdrop"),e.preventDefault())}export{G as TohComponent,N as canDrop,B as getFirstDraggable};
