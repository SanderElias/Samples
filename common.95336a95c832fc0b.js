"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[592],{6495:(A,v,e)=>{e.d(v,{U2:()=>E,t8:()=>u});function l(n){return new Promise((t,s)=>{n.oncomplete=n.onsuccess=()=>t(n.result),n.onabort=n.onerror=()=>s(n.error)})}let o;function i(){return o||(o=function h(n,t){const s=function d(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t;return new Promise(s=>{const a=()=>indexedDB.databases().finally(s);t=setInterval(a,100),a()}).finally(()=>clearInterval(t))}().then(()=>{const a=indexedDB.open(n);return a.onupgradeneeded=()=>a.result.createObjectStore(t),l(a)});return(a,y)=>s.then(L=>y(L.transaction(t,a).objectStore(t)))}("keyval-store","keyval")),o}function E(n,t=i()){return t("readonly",s=>l(s.get(n)))}function u(n,t,s=i()){return s("readwrite",a=>(a.put(t,n),l(a.transaction)))}},4581:(A,v,e)=>{e.d(v,{R:()=>C});var d=e(5955),O=e(818),l=e(5619),h=e(6602),o=e(5975),i=e(2692);const E=["addListener","removeListener"],u=["addEventListener","removeEventListener"],f=["on","off"];function C(_,m,P,n){if((0,o.m)(P)&&(n=P,P=void 0),n)return C(_,m,P).pipe((0,i.Z)(n));const[t,s]=function M(_){return(0,o.m)(_.addEventListener)&&(0,o.m)(_.removeEventListener)}(_)?u.map(a=>y=>_[a](m,y,P)):function R(_){return(0,o.m)(_.addListener)&&(0,o.m)(_.removeListener)}(_)?E.map(b(_,m)):function I(_){return(0,o.m)(_.on)&&(0,o.m)(_.off)}(_)?f.map(b(_,m)):[];if(!t&&(0,h.z)(_))return(0,l.z)(a=>C(a,m,P))((0,d.Xf)(_));if(!t)throw new TypeError("Invalid event target");return new O.y(a=>{const y=(...L)=>a.next(1<L.length?L:L[0]);return t(y),()=>s(y)})}function b(_,m){return P=>n=>_[P](m,n)}},5490:(A,v,e)=>{e.d(v,{F:()=>l});var d=e(2844),O=e(1995);function l(h=0,o=d.z){return h<0&&(h=0),(0,O.H)(h,h,o)}},8982:(A,v,e)=>{e.d(v,{g:()=>I});var d=e(2844),O=e(6811),l=e(5598),h=e(2085),o=e(8499),i=e(408),u=e(7969),C=e(5619);function b(M,_){return _?m=>(0,O.z)(_.pipe((0,l.q)(1),function E(){return(0,h.e)((M,_)=>{M.subscribe((0,o.x)(_,i.Z))})}()),m.pipe(b(M))):(0,C.z)((m,P)=>M(m,P).pipe((0,l.q)(1),function f(M){return(0,u.U)(()=>M)}(m)))}var R=e(1995);function I(M,_=d.z){const m=(0,R.H)(M,_);return b(()=>m)}},1233:(A,v,e)=>{e.d(v,{j:()=>l});var d=e(2085),O=e(2728);function l(h,o=1/0,i){return o=(o||0)<1?1/0:o,(0,d.e)((E,u)=>(0,O.p)(E,u,h,o,void 0,!0,i))}},6252:(A,v,e)=>{e.d(v,{u:()=>l});var d=e(2049),O=e(2085);function l(h,o){return(0,O.e)((0,d.U)(h,o,arguments.length>=2,!1,!0))}},2474:(A,v,e)=>{e.d(v,{q:()=>h});var d=e(6252),O=e(2085);const l=(o,i)=>(o.push(i),o);function h(){return(0,O.e)((o,i)=>{(0,d.u)(l,[])(o).subscribe(i)})}},1578:(A,v,e)=>{e.d(v,{m:()=>h});var d=e(5598),O=e(7969),l=e(8168);function h(o){return function i(E,u){return o.pipe((0,d.q)(1),(0,O.U)(f=>{if("string"==typeof E)return Object.assign(Object.assign({},f),{[E]:u});if("object"==typeof E)return Object.assign(Object.assign({},f),E);throw new Error("Property needs to be a string or an object")}),(0,l.b)(f=>o.next(f))).toPromise()}}},4395:(A,v,e)=>{e.d(v,{g:()=>h,f:()=>o});var d=e(9724),O=e(97),l=e(8168);let h=(()=>{class i{constructor(u,f,C){this.templateRef=u,this.viewContainer=f,this.cdr=C,this.context={$implicit:void 0,seLet:void 0},this.assign=this.assign.bind(this)}set seLet(u){this.assign(u)}set seLetObserve(u){this.assign(u)}set seLetOn(u){this.assign(u)}assign(u){this.sub&&this.sub.unsubscribe(),(0,O.b)(u)?this.sub=u.pipe((0,l.b)(()=>this.cdr.markForCheck())).subscribe(f=>{this.context.$implicit=f,this.context.seLet=f}):(this.context.$implicit=u,this.context.seLet=u)}ngOnInit(){this.viewContainer.createEmbeddedView(this.templateRef,this.context)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return i.\u0275fac=function(u){return new(u||i)(d.Y36(d.Rgc),d.Y36(d.s_b),d.Y36(d.sBO))},i.\u0275dir=d.lG2({type:i,selectors:[["","seLet",""]],inputs:{seLet:"seLet",seLetObserve:"seLetObserve",seLetOn:"seLetOn"}}),i})(),o=(()=>{class i{}return i.\u0275fac=function(u){return new(u||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})()},2702:(A,v,e)=>{e.d(v,{cb:()=>b,C3:()=>R,$b:()=>C,m9:()=>P});var d=e(8023);const O=Symbol("_acc"),l=Symbol("_aci"),u=(Symbol("_avc"),Symbol("_avi"),Symbol("_dc"),Symbol("_oc"),Symbol("_oi")),f=Symbol("_od"),C=(n=class{})=>{var t,s;return s=class extends n{constructor(){super(...arguments),this[t]=new d.x,this.seOnDestroy$=this[f].asObservable()}ngOnDestroy(){super.ngOnDestroy&&super.ngOnDestroy(),this[f].next(),this[f].complete()}},t=f,s},b=(n=class{})=>{var t,s;return s=class extends n{constructor(){super(...arguments),this[t]=new d.x,this.seAfterContentChecked$=this[O].asObservable()}ngAfterContentChecked(){this[O].next(),super.ngAfterContentChecked&&super.ngAfterContentChecked()}ngOnDestroy(){this[O].complete(),super.ngOnDestroy&&super.ngOnDestroy()}},t=O,s},R=(n=class{})=>{var t,s;return s=class extends n{constructor(){super(...arguments),this[t]=new d.x,this.seAfterContentInit$=this[l].asObservable()}ngAfterContentInit(){Promise.resolve().then(()=>{this[l].next(),this[l].complete()}),super.ngAfterContentInit&&super.ngAfterContentInit()}},t=l,s},P=(n=class{})=>{var t,s;return s=class extends n{constructor(){super(...arguments),this[t]=new d.x,this.seOnInit$=this[u].asObservable()}ngOnInit(){Promise.resolve().then(()=>{this[u].next(),this[u].complete()}),super.ngOnInit&&super.ngOnInit()}},t=u,s}},9226:(A,v,e)=>{e.d(v,{qj:()=>T,se:()=>S,ss:()=>j,TK:()=>w,QS:()=>L});var d=e(4762),O=e(6495),l=e(9724),h=e(985),o=e(8168),i=e(6466),E=e(1233),u=e(9018),f=e(7969),C=e(6252),b=e(4970),R=e(5598),I=e(4551),M=e(5619),_=e(6811),m=e(2474),P=e(8831),n=e(4945),t=e(3568),s=e(1528);let a;const y="sample-cache";function L(){return(0,d.mG)(this,void 0,void 0,function*(){if(a)return a;const D=yield(0,O.U2)(y);return a=D?new Map([...D]):new Map,a})}function S(D,x){a.set(D,x),(0,O.t8)(y,a)}function j(D){return a.has(D)}function w(D){return a.get(D)}let T=(()=>{class D{constructor(){this.baseUrl="https://swapi.dev/api/",this.load=r=>(0,d.mG)(this,void 0,void 0,function*(){if(r=B(r),yield L(),!j(r)){const c=yield fetch(r).then(p=>p.json()).catch(p=>{});yield S(r,c)}return w(r)}),this.swapiRoot$=(0,h.D)(this.load(this.baseUrl)).pipe((0,o.b)(r=>this.swapiRoot=r),(0,i.d)(1)),this.swPeople$=(0,h.D)(this.load(`${this.baseUrl}people/`)).pipe((0,E.j)(r=>r.next?this.load(r.next):u.E),(0,f.U)(r=>r.results),(0,C.u)((r,c)=>r.concat(c),[]),(0,f.U)(r=>r.map(c=>Object.assign(Object.assign({},c),{date:K(),id:c.url}))),(0,i.d)(1)),this.findById=r=>this.swPeople$.pipe((0,f.U)(c=>c[r]),(0,b.h)(Boolean),(0,R.q)(1)),this.swFilms$=(0,h.D)(this.load(`${this.baseUrl}films/`)).pipe((0,i.d)(1)),this.findFilmByUrl=r=>this.get(r),this.getRandomPerson=(r=1)=>(0,h.D)(Array.from({length:r})).pipe((0,I.b)(()=>this.swPeople$.pipe((0,f.U)(c=>c[Math.floor(Math.random()*c.length)]),(0,M.z)(c=>(0,_.z)(...c.films.map(p=>this.findFilmByUrl(p))).pipe((0,m.q)(),(0,f.U)(p=>Object.assign(Object.assign({},c),{films:p}))))))),this.findIn=(r,c)=>this.getAllRows(r).pipe((0,f.U)(p=>p.find(g=>(g.name||g.title||"").toLowerCase().includes(c.toLowerCase().trim())))),this.findWithName=r=>this.findIn("people",r),this.loadData().subscribe()}getAllPagedData(r){return(0,h.D)(this.load(`${r}`)).pipe((0,E.j)(c=>c.next?this.load(c.next):u.E))}get(r){const c=Object.values(this.swapiRoot).find(p=>r.toLowerCase().includes(p.toLowerCase()));return c?this.getAllPagedData(c).pipe((0,C.u)((p,g)=>p.concat(g.results),[]),(0,f.U)(p=>p.find(g=>g.url===r))):(0,h.D)(this.load(r))}loadData(){return this.swapiRoot$.pipe((0,o.b)(r=>this.swapiRoot=r),(0,I.b)(r=>Object.values(r).map(c=>this.getAllPagedData(c))),(0,P.u)(),(0,m.q)(),(0,i.d)(1))}enrich(r){const c=p=>{const g=r[p];return Array.isArray(g)&&g.length>0?(0,h.D)(r[p]).pipe((0,I.b)(U=>this.get(U)),(0,m.q)(),(0,f.U)(U=>({[p]:U}))):"string"==typeof g?(this.detectSet(g)?this.get(g):(0,n.of)(g)).pipe((0,f.U)(W=>({[p]:W}))):(0,n.of)(g).pipe((0,f.U)(U=>({[p]:U})))};return this.swapiRoot$.pipe((0,I.b)(p=>Object.keys(r).map(c)),(0,P.u)(),(0,C.u)((p,g)=>Object.assign(Object.assign({},p),g),{}),(0,t.K)(p=>(console.warn(p),(0,n.of)({}))))}getAllRows(r){return this.swapiRoot$.pipe((0,s.w)(()=>this.getAllPagedData(B(this.swapiRoot[r]))),(0,f.U)(c=>c.results),(0,C.u)((c,p)=>c.concat(p),[]),(0,i.d)(1))}detectSet(r){if("string"==typeof r){const c=Object.entries(this.swapiRoot).find(([p,g])=>r.includes(g));return c&&c[0]}}}return D.\u0275fac=function(r){return new(r||D)},D.\u0275prov=l.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function K(){const D=Math.ceil(1e3*Math.random())+1e3,x=Math.floor(12*Math.random()),r=Math.ceil(27*Math.random());return new Date(D,x,r,12,0)}function B(D){return D.split("http:").join("https:")}}}]);