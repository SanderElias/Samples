import{a as q}from"./chunk-3NTL6VWE.js";import{b as R,d as H,e as G,g as z,j as J,k as K,y as U}from"./chunk-AQ2PI3XY.js";import{i as B,m as Q}from"./chunk-KJKGJ6N4.js";import{D as C,Db as u,Fb as S,Gb as k,Hb as j,Ib as m,Jb as l,Ob as O,Sb as h,W as w,Wb as P,X as b,Xb as T,Ya as p,Yb as V,Z as v,aa as x,ac as d,dc as I,fc as L,ga as c,gc as A,h as y,hc as N,kc as E,lb as $,lc as W,na as F,oa as M,q as g,r,rb as f,s as _,yb as D}from"./chunk-7PPZN5LC.js";import"./chunk-KAT7YFEL.js";var Y=(()=>{class t{constructor(){this.http=c(q),this.addresses$=this.http.get("assets/addresses.csv",{responseType:"text"}).pipe(r(e=>e.split("\r").map(n=>n.split(","))),r(([e,...n])=>n.map((i,o)=>i.reduce((s,Z,ee)=>(s[X(e[ee])]=X(Z),s),{id:o}))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function X(t){return t?.replace(/^"(.*)"$/,"$1")}var ne=["myForm"];function ie(t,a){t&1&&(m(0,"p"),d(1,"Do not change"),l())}function oe(t,a){if(t&1){let e=O();m(0,"label"),d(1),m(2,"div")(3,"input",4),N("ngModelChange",function(i){let o=F(e).$implicit,s=h();return A(s.person[o.name],i)||(s.person[o.name]=i),M(i)}),l(),f(4,ie,2,0,"p"),l()()}if(t&2){let e=a.$implicit,n=h();p(),I(" ",e.name," ",e.type," "),p(2),D("name",e.name)("type",e.type),L("ngModel",n.person[e.name]),p(),u(e.name==="id"?4:-1)}}function re(t,a){t&1&&(m(0,"dialog")(1,"form",1,0),k(3,oe,5,6,"label",null,S),m(5,"div",2)(6,"button",3),d(7,"Submit"),l()()()()),t&2&&(p(3),j(a.fields))}var ae=t=>{let a=(t.constructor.name||"unknown").toLowerCase();return t==null?"hidden":a==="string"?"text":a},be=(()=>{class t{constructor(){this.adr=c(Y),this.person$=new y({}),this.fieldData$=this.person$.pipe(r(e=>Object.entries(e).map(([n,i])=>({name:n,value:i,type:ae(i)}))),r(e=>e.filter(n=>n.type!=="Array"))),this.addresses$=this.adr.addresses$,this.vm$=_({person:this.person$,fields:this.fieldData$,addresses:this.addresses$}).pipe(r(({person:e,fields:n,addresses:i})=>({person:e,fields:n,addresses:i,names:Object.keys(i[0])})))}ngAfterViewInit(){this.formList.changes.pipe(w(void 0),r(()=>this.formList.first),C(e=>e!==void 0),b(e=>e.valueChanges),v(e=>console.log("form value changed",e))).subscribe(),this.adr.addresses$}async openWith(e){if(e){let n=document.querySelector("dialog"),o=(await g(this.addresses$)).find(s=>s.id===e);this.person$.next(o),n.showModal()}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=$({type:t,selectors:[["app-dyn-form"]],viewQuery:function(n,i){if(n&1&&P(ne,5),n&2){let o;T(o=V())&&(i.formList=o)}},decls:4,vars:3,consts:[["myForm","ngForm"],["method","dialog"],[1,"labelRow"],["type","submit"],[3,"ngModelChange","name","type","ngModel"]],template:function(n,i){if(n&1&&(m(0,"h1"),d(1,"Dynamic form sample"),l(),f(2,re,8,0,"dialog"),E(3,"async")),n&2){let o;p(2),u((o=W(3,1,i.vm$))?2:-1,o)}},dependencies:[Q,B,U,K,R,H,G,J,z],styles:["dialog[_ngcontent-%COMP%]::backdrop{background:#1e142373}.tableHolder[_ngcontent-%COMP%]{height:80vh;overflow:auto;width:100rem;border-collapse:collapse}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#2a2929}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{display:grid;grid-template-columns:7rem 1fr;align-items:center;gap:.4rem}input[_ngcontent-%COMP%]{margin-bottom:5px;width:20rem}"]})}}return t})();export{be as DynFormComponent};
