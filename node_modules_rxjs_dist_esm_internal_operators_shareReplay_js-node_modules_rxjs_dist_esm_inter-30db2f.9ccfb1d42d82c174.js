"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([["node_modules_rxjs_dist_esm_internal_operators_shareReplay_js-node_modules_rxjs_dist_esm_inter-30db2f"],{5557:(b,_,s)=>{s.d(_,{t:()=>x});var f=s(8023),C=s(2069);class x extends f.x{constructor(a=1/0,d=1/0,i=C.l){super(),this._bufferSize=a,this._windowTime=d,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=d===1/0,this._bufferSize=Math.max(1,a),this._windowTime=Math.max(1,d)}next(a){const{isStopped:d,_buffer:i,_infiniteTimeWindow:p,_timestampProvider:u,_windowTime:m}=this;d||(i.push(a),!p&&i.push(u.now()+m)),this._trimBuffer(),super.next(a)}_subscribe(a){this._throwIfClosed(),this._trimBuffer();const d=this._innerSubscribe(a),{_infiniteTimeWindow:i,_buffer:p}=this,u=p.slice();for(let m=0;m<u.length&&!a.closed;m+=i?1:2)a.next(u[m]);return this._checkFinalizedStatuses(a),d}_trimBuffer(){const{_bufferSize:a,_timestampProvider:d,_buffer:i,_infiniteTimeWindow:p}=this,u=(p?1:2)*a;if(a<1/0&&u<i.length&&i.splice(0,i.length-u),!p){const m=d.now();let v=0;for(let e=1;e<i.length&&i[e]<=m;e+=2)v=e;v&&i.splice(0,v+1)}}}},6466:(b,_,s)=>{s.d(_,{d:()=>x});var f=s(5557),C=s(815);function x(h,a,d){var i,p;let u,m=!1;return h&&"object"==typeof h?(u=null!==(i=h.bufferSize)&&void 0!==i?i:1/0,a=null!==(p=h.windowTime)&&void 0!==p?p:1/0,m=!!h.refCount,d=h.scheduler):u=null!=h?h:1/0,(0,C.B)({connector:()=>new f.t(u,a,d),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}},2844:(b,_,s)=>{s.d(_,{P:()=>m,z:()=>u});var f=s(4813);class C extends f.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const x={setInterval(...v){const{delegate:e}=x;return((null==e?void 0:e.setInterval)||setInterval)(...v)},clearInterval(v){const{delegate:e}=x;return((null==e?void 0:e.clearInterval)||clearInterval)(v)},delegate:void 0};var h=s(8308),d=s(2069);class i{constructor(e,t=i.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,l){return new this.schedulerActionCtor(this,e).schedule(l,t)}}i.now=d.l.now;const u=new class p extends i{constructor(e,t=i.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let l;this._active=!0;do{if(l=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,l){for(;e=t.shift();)e.unsubscribe();throw l}}}(class a extends C{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const l=this.id,A=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(A,l,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(A,this.id,t),this}requestAsyncId(e,t,l=0){return x.setInterval(e.flush.bind(e,this),l)}recycleAsyncId(e,t,l=0){if(null!=l&&this.delay===l&&!1===this.pending)return t;x.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(e,t);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let A,l=!1;try{this.work(e)}catch(P){l=!0,A=P||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),A}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:l}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,h.P)(l,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),m=u},2069:(b,_,s)=>{s.d(_,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},4027:(b,_,s)=>{s.r(_),s.d(_,{BigDataModule:()=>B});var f=s(1048),C=s(3290),x=s(9959),h=s(4121),a=s(5490),d=s(2993),i=s(2147),p=s(1528),u=s(7969),m=s(5598),v=s(8168),e=s(5619),t=s(9724),l=s(4841);function A(o,y){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&o){const n=y.$implicit;t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.email)}}function P(o,y){if(1&o){const n=t.EpF();t.TgZ(0,"section"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"label"),t._uU(4,"Search "),t.TgZ(5,"input",1),t.NdJ("input",function(r){return t.CHM(n),t.oxw().setProp("search",r)}),t.qZA()(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(r){return t.CHM(n),t.oxw().setProp("sort",r)}),t._uU(8,"none"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(r){return t.CHM(n),t.oxw().setProp("sort",r)}),t._uU(10,"username"),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(r){return t.CHM(n),t.oxw().setProp("sort",r)}),t._uU(12,"email"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(r){return t.CHM(n),t.oxw().setProp("sort",r)}),t._uU(14,"id"),t.qZA()(),t.TgZ(15,"div",7)(16,"input",8),t.NdJ("input",function(r){return t.CHM(n),t.oxw().setProp("position",r)}),t.qZA(),t.TgZ(17,"table")(18,"tbody"),t.YNc(19,A,7,3,"tr",9),t.qZA()()()()}if(2&o){const n=y.ngIf;t.xp6(1),t.AsE(" Available users:",n.users.length," (Loading done:",n.done,"%)"),t.xp6(15),t.Q6J("max",n.users.length/n.state.pageSize),t.xp6(3),t.Q6J("ngForOf",n.page)}}const M=[{path:"",component:(()=>{class o{constructor(n){this.user=n,this.state$=new h.X({pageSize:20,position:0,search:"",sort:""}),this.users$=this.state$.pipe((0,d.j)("sort"),(0,i.x)(),(0,p.w)(c=>this.user.allUsers$.pipe((0,u.U)(r=>""===c?r:r.sort((g,T)=>g[c]<T[c]?-1:1))))),this.doneLoadingPer$=(0,a.F)(100).pipe((0,m.q)(1e3),(0,v.b)(()=>this.user.addUsers(500)),(0,u.U)(c=>Math.ceil(c/1e3*100))),this.curPage$=this.state$.pipe((0,i.x)(),(0,e.z)(c=>this.users$.pipe((0,u.U)(r=>this.findFirst(r,c))))),this.vm$=(0,x.Hv)({users:this.users$,state:this.state$,page:this.curPage$,done:this.doneLoadingPer$})}findFirst(n,{position:c,pageSize:r,search:g}){if(!g)return n.slice(c*r,c*r+r);let T=0;const w=[];for(;T<n.length&&w.length<r;)n[T].username.toLowerCase().includes(g.toLowerCase())&&w.push(n[T]),T+=1;return w}setProp(n,c){const r=c.target,g=this.state$.value,T="number"==typeof g[n];this.state$.next(Object.assign(Object.assign({},g),{[n]:T?r.valueAsNumber:r.value}))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(l.H))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-big-data"]],decls:4,vars:3,consts:[[4,"ngIf"],[3,"input"],["id","buttons"],["value","",3,"click"],["value","username",3,"click"],["value","email",3,"click"],["value","id",3,"click"],["id","scroll"],["type","range",3,"max","input"],[4,"ngFor","ngForOf"]],template:function(n,c){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Big data and performance demo"),t.qZA(),t.YNc(2,P,20,4,"section",0),t.ALo(3,"async")),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,c.vm$)))},directives:[f.O5,f.sg],pipes:[f.Ov],styles:["#scroll[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 40px 1fr;\n      }\n      #buttons[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, 154px);\n      }\n      #scroll[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\n        transform: translateY(-100%) rotate(90deg); \n        transform-origin: left bottom;\n        width: 20rem; \n        height: 40px; \n      }"]}),o})()}];let D=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.Bz.forChild(M)],C.Bz]}),o})();var I=s(4395);let B=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,D,I.f]]}),o})()}}]);