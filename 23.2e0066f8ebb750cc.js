"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[23],{2844:(w,Z,r)=>{r.d(Z,{P:()=>f,z:()=>d});var g=r(4813);class B extends g.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const h={setInterval(a,e,...t){const{delegate:s}=h;return(null==s?void 0:s.setInterval)?s.setInterval(a,e,...t):setInterval(a,e,...t)},clearInterval(a){const{delegate:e}=h;return((null==e?void 0:e.clearInterval)||clearInterval)(a)},delegate:void 0};var y=r(8308),m=r(2069);class l{constructor(e,t=l.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}l.now=m.l.now;const d=new class v extends l{constructor(e,t=l.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}(class C extends B{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const s=this.id,A=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(A,s,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(A,this.id,t),this}requestAsyncId(e,t,s=0){return h.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;h.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let A,s=!1;try{this.work(e)}catch(T){s=!0,A=T||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),A}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),f=d},4027:(w,Z,r)=>{r.r(Z),r.d(Z,{BigDataModule:()=>M});var g=r(1048),B=r(5166),h=r(9959),y=r(4121),C=r(5490),m=r(2993),l=r(2147),v=r(1528),d=r(7969),f=r(5598),a=r(8168),e=r(5619),t=r(9724),s=r(4841);function A(i,p){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const n=p.$implicit;t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.email)}}function T(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"section"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"label"),t._uU(4,"Search "),t.TgZ(5,"input",1),t.NdJ("input",function(o){return t.CHM(n),t.oxw().setProp("search",o)}),t.qZA()(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(o){return t.CHM(n),t.oxw().setProp("sort",o)}),t._uU(8,"none"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(o){return t.CHM(n),t.oxw().setProp("sort",o)}),t._uU(10,"username"),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(o){return t.CHM(n),t.oxw().setProp("sort",o)}),t._uU(12,"email"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(o){return t.CHM(n),t.oxw().setProp("sort",o)}),t._uU(14,"id"),t.qZA()(),t.TgZ(15,"div",7)(16,"input",8),t.NdJ("input",function(o){return t.CHM(n),t.oxw().setProp("position",o)}),t.qZA(),t.TgZ(17,"table")(18,"tbody"),t.YNc(19,A,7,3,"tr",9),t.qZA()()()()}if(2&i){const n=p.ngIf;t.xp6(1),t.AsE(" Available users:",n.users.length," (Loading done:",n.done,"%)"),t.xp6(15),t.Q6J("max",n.users.length/n.state.pageSize),t.xp6(3),t.Q6J("ngForOf",n.page)}}const P=[{path:"",component:(()=>{class i{constructor(n){this.user=n,this.state$=new y.X({pageSize:20,position:0,search:"",sort:""}),this.users$=this.state$.pipe((0,m.j)("sort"),(0,l.x)(),(0,v.w)(c=>this.user.allUsers$.pipe((0,d.U)(o=>""===c?o:o.sort((u,x)=>u[c]<x[c]?-1:1))))),this.doneLoadingPer$=(0,C.F)(100).pipe((0,f.q)(1e3),(0,a.b)(()=>this.user.addUsers(500)),(0,d.U)(c=>Math.ceil(c/1e3*100))),this.curPage$=this.state$.pipe((0,l.x)(),(0,e.z)(c=>this.users$.pipe((0,d.U)(o=>this.findFirst(o,c))))),this.vm$=(0,h.Hv)({users:this.users$,state:this.state$,page:this.curPage$,done:this.doneLoadingPer$})}findFirst(n,{position:c,pageSize:o,search:u}){if(!u)return n.slice(c*o,c*o+o);let x=0;const b=[];for(;x<n.length&&b.length<o;)n[x].username.toLowerCase().includes(u.toLowerCase())&&b.push(n[x]),x+=1;return b}setProp(n,c){const o=c.target,u=this.state$.value,x="number"==typeof u[n];this.state$.next(Object.assign(Object.assign({},u),{[n]:x?o.valueAsNumber:o.value}))}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-big-data"]],decls:4,vars:3,consts:[[4,"ngIf"],[3,"input"],["id","buttons"],["value","",3,"click"],["value","username",3,"click"],["value","email",3,"click"],["value","id",3,"click"],["id","scroll"],["type","range",3,"max","input"],[4,"ngFor","ngForOf"]],template:function(n,c){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Big data and performance demo"),t.qZA(),t.YNc(2,T,20,4,"section",0),t.ALo(3,"async")),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,c.vm$)))},directives:[g.O5,g.sg],pipes:[g.Ov],styles:["#scroll[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 40px 1fr;\n      }\n      #buttons[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, 154px);\n      }\n      #scroll[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\n        transform: translateY(-100%) rotate(90deg); \n        transform-origin: left bottom;\n        width: 20rem; \n        height: 40px; \n      }"]}),i})()}];let _=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[B.Bz.forChild(P)],B.Bz]}),i})();var D=r(4395);let M=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,_,D.f]]}),i})()},4553:(w,Z,r)=>{function g(h,y,C,m,l,v,d){try{var f=h[v](d),a=f.value}catch(e){return void C(e)}f.done?y(a):Promise.resolve(a).then(m,l)}function B(h){return function(){var y=this,C=arguments;return new Promise(function(m,l){var v=h.apply(y,C);function d(a){g(v,m,l,d,f,"next",a)}function f(a){g(v,m,l,d,f,"throw",a)}d(void 0)})}}r.d(Z,{Z:()=>B})}}]);