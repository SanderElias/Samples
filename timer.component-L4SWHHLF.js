import{a as w,d as x}from"./chunk-CDND3NPW.js";import"./chunk-JY3VNBBJ.js";import{$ as E,Qc as i,Rc as y,Za as u,Zb as o,_b as r,ea as g,p as D,pa as M,rb as b,va as c,wc as a,yc as l}from"./chunk-BFNFKNMI.js";import"./chunk-C6Q5SG76.js";var m=({serverCall:n,actionType:d,actionSignal:e})=>{if(e().running)throw new Error("Another action is already running");return e.set({running:!0,actionType:d}),D(n).then(t=>{let s={success:!0,data:t};return e.set({running:!1,actionType:d,lastResult:s}),s}).catch(t=>{let s={success:!1,error:t};return e.set({running:!1,actionType:d,lastResult:s}),s})},h=n=>d=>(d.success&&n(d.data),d);var f=1e3,v=60*f,p=60*v,N=24*p,j=(()=>{class n{constructor(){this.des=g(M),this.downFrom=1*p,this.startTime=Date.now(),this.now=c(Date.now()),this.trueDuration=i(()=>+this.now()-+this.startTime-(this.downFrom||0)),this.duration=i(()=>Math.abs(this.trueDuration())),this.days=i(()=>Math.floor(this.duration()/N)),this.hours=i(()=>Math.floor(this.duration()%N/p)),this.minutes=i(()=>Math.floor(this.duration()%p/v)),this.seconds=i(()=>Math.floor(this.duration()%v/f)),this.milliseconds=i(()=>this.duration()%f),this.int=setInterval(()=>{let e=Date.now();this.now.set(e);let t=this.duration(),s=this.downFrom;console.log({durarion:t,now:e,down:s})},500),this._=this.des.onDestroy(()=>{clearInterval(this.int)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=b({type:n,selectors:[["se-timer"]],decls:15,vars:5,template:function(t,s){t&1&&(o(0,"h1"),a(1,"Timer Component"),r(),o(2,"p"),a(3,"Elapsed Time:"),r(),o(4,"ul")(5,"li"),a(6),r(),o(7,"li"),a(8),r(),o(9,"li"),a(10),r(),o(11,"li"),a(12),r(),o(13,"li"),a(14),r()()),t&2&&(u(6),l("",s.days()," days"),u(2),l("",s.hours()," hours"),u(2),l("",s.minutes()," minutes"),u(2),l("",s.seconds()," seconds"),u(2),l("",s.milliseconds()," milliseconds"))},styles:["[_nghost-%COMP%]{display:block}"]})}}return n})(),U=(()=>{class n{constructor(){this.#n=g(w),this.#e=e=>`https://api.example.com/users/${e}`,this.#s=c(c(void 0).asReadonly()),this.#t=y(()=>this.#s()()),this.#i=i(()=>{let e=this.#t();return e?this.#e(e):void 0}),this.userResource=x(this.#i),this.action=c({running:!1})}#n;#e;#s;#t;#i;link(e){return this.#s.set(e),this}create(e){return m({actionSignal:this.action,serverCall:this.#n.post(this.#e(e.id),e),actionType:"create"}).then(h(t=>{this.#t.set(t.id),this.userResource.value.set(t)}))}read(e){this.#t.set(e)}update(e){return m({serverCall:this.#n.put(this.#e(e.id),e),actionType:"update",actionSignal:this.action}).then(h(()=>this.userResource.value.set(e)))}delete(e){return m({serverCall:this.#n.delete(this.#e(e)),actionType:"delete",actionSignal:this.action}).then(h(()=>{this.#t.set(void 0),this.userResource.value.set(void 0)}))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=E({token:n,factory:n.\u0275fac})}}return n})();export{j as TimerComponent,U as UserService};
