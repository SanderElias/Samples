import{b as A}from"./chunk-WYZ4RNKB.js";import"./chunk-GHDGTY5K.js";import"./chunk-Q7HKI3MB.js";import{g as O}from"./chunk-NE3XWMKB.js";import"./chunk-QF5K4MHH.js";import{Ca as w,D as g,Da as $,Dc as P,Ec as Q,Hb as H,Jb as M,Mc as V,S as x,Sb as s,Sc as I,Tb as c,W as k,Xa as u,Yb as D,bc as r,cc as _,ea as L,f as E,gc as T,hc as j,ic as W,j as C,ja as p,ka as f,kb as h,pc as a,q as d,qc as b,r as S,y}from"./chunk-JMJSAENN.js";import{a as l,b as m}from"./chunk-DAQOROHW.js";var B=["b"];function F(i,e){if(i&1){let t=D();s(0,"button",1,0),r("click",function(){p(t);let n=_();return f(n.updateCounterWith(-1))}),a(2,"-1"),c(),s(3,"span"),a(4),c(),s(5,"button",1,0),r("click",function(){p(t);let n=_();return f(n.updateCounterWith(1))}),a(7,"+1"),c()}i&2&&(u(4),b(e.count))}var tt=(()=>{class i{constructor(){this.id=I(0,{transform:t=>+t}),this.localState=V(()=>({count:this.id()||0,message:"Hello"})),this.updateCounterWith=t=>{this.localState.update(o=>{let n=o.count+t;return m(l({},o),{count:n})})}}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-ls-home"]],inputs:{id:[1,"id"]},decls:9,vars:1,consts:[[3,"click"]],template:function(o,n){o&1&&(s(0,"h2"),a(1,"test some state"),c(),s(2,"section")(3,"button",0),r("click",function(){return n.updateCounterWith(-1)}),a(4,"-1"),c(),s(5,"span"),a(6),c(),s(7,"button",0),r("click",function(){return n.updateCounterWith(1)}),a(8,"+1"),c()()),o&2&&(u(6),b(n.localState().count))},styles:["section[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}"]})}}return i})(),v=class i{constructor(){this.route=L(A),this.localState$=new E({count:0}),this.id$=this.route.params.pipe(d(({id:e})=>+e)),this.clicks$=this.localState$.pipe(x("buttons"),g(e=>e instanceof $),d(e=>e.toArray().map(t=>t.nativeElement)),k(e=>y(e,"click"))).subscribe(console.log),this.vm$=S({id:this.id$,state:this.localState$}).pipe(d(e=>({id:e.id,count:e.state.count||0})))}ngOnInit(){}updateCounterWith(e){this.localState$.next(m(l({},this.localState$.value),{count:this.localState$.value.count??0+e}))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-ls-home"]],viewQuery:function(t,o){if(t&1&&T(B,5,w),t&2){let n;j(n=W())&&(o.buttons=n)}},decls:4,vars:3,consts:[["b",""],[3,"click"]],template:function(t,o){if(t&1&&(s(0,"h2"),a(1,"test some state"),c(),H(2,F,8,1),P(3,"async")),t&2){let n;u(2),M((n=Q(3,1,o.vm$))?2:-1,n)}},dependencies:[O],encapsulation:2})}};C([q("localState$")],v.prototype,"buttons",void 0);var et=Symbol("subjectProp");function q(i){return(e,t)=>{Object.defineProperty(e,t,{set:function(o){let n=this[i];o&&n.next(m(l({},n.value),{[t]:o}))},get:function(){throw new Error(`Don't read the "${t}" directly, instead take it from the "${i}" behaviourSubject`)},configurable:!1,enumerable:!0})}}export{tt as LsHomeComponent,q as ObservableInput};
