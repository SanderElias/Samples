"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[397],{3151:(C,y,i)=>{i.d(y,{b:()=>A});var m=i(2844),S=i(2085),f=i(8499);function A(T,v=m.z){return(0,S.e)((u,d)=>{let a=null,p=null,c=null;const t=()=>{if(a){a.unsubscribe(),a=null;const r=p;p=null,d.next(r)}};function s(){const r=c+T,e=v.now();if(e<r)return a=this.schedule(void 0,r-e),void d.add(a);t()}u.subscribe((0,f.x)(d,r=>{p=r,c=v.now(),a||(a=v.schedule(s,T),d.add(a))},()=>{t(),d.complete()},void 0,()=>{p=a=null}))})}},2844:(C,y,i)=>{i.d(y,{P:()=>p,z:()=>a});var m=i(4813);class S extends m.w0{constructor(t,s){super()}schedule(t,s=0){return this}}const f={setInterval(...c){const{delegate:t}=f;return((null==t?void 0:t.setInterval)||setInterval)(...c)},clearInterval(c){const{delegate:t}=f;return((null==t?void 0:t.clearInterval)||clearInterval)(c)},delegate:void 0};var A=i(8308),v=i(2069);class u{constructor(t,s=u.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,r){return new this.schedulerActionCtor(this,t).schedule(r,s)}}u.now=v.l.now;const a=new class d extends u{constructor(t,s=u.now){super(t,s),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,r){for(;t=s.shift();)t.unsubscribe();throw r}}}(class T extends S{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){if(this.closed)return this;this.state=t;const r=this.id,e=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(e,r,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(e,this.id,s),this}requestAsyncId(t,s,r=0){return f.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,s,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return s;f.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,s);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let e,r=!1;try{this.work(t)}catch(F){r=!0,e=F||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:r}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}}),p=a},9397:(C,y,i)=>{i.r(y),i.d(y,{TumblrModule:()=>L});var m=i(1048),S=i(3290),f=i(4121),A=i(9018),T=i(985),v=i(4581),u=i(4970),d=i(1528),a=i(3568),p=i(2993),c=i(7969),t=i(6466),s=i(3151),r=i(2147),e=i(9724),F=i(9725);function D(n,g){if(1&n){const o=e.EpF();e.TgZ(0,"article",3),e.NdJ("click",function(){const M=e.CHM(o).index;return e.oxw().switch(M)}),e._UZ(1,"img",4),e.qZA()}if(2&n){const o=g.$implicit,h=g.index,l=e.oxw();e.ekj("large",1===l.largePositions[h])("super",2===l.largePositions[h]),e.xp6(1),e.Q6J("src",null==o.images[0]?null:o.images[0].link,e.LSH)}}let I=(()=>{class n{constructor(o,h){this.http=o,this.ref=h,this.largePositions=Array.from({length:250},()=>Math.random()<.2?1:0),this.searchKey$=new f.X("kitten"),this.results$=this.searchKey$.pipe((0,u.h)(l=>!!l),(0,d.w)(l=>this.http.get(`https://api.imgur.com/3/gallery/t/${l}`,{headers:{Authorization:"Client-ID e972ca06cc4b961"}}).pipe((0,a.K)(M=>A.E))),(0,p.j)("data","items"),(0,u.h)(l=>!!l),(0,c.U)(l=>l.filter(M=>[P.ImageJPEG,P.ImagePNG].includes(M.images&&M.images[0].type))),(0,t.d)(1))}setSearch(o){console.log(o)}switch(o){this.largePositions[o]+=1,this.largePositions[o]>2&&(this.largePositions[o]=0)}ngOnInit(){const o=this.ref.nativeElement;if(o){const h=o.getElementsByTagName("input")[0];(0,T.D)(i.e(480).then(i.t.bind(i,1480,23))).pipe((0,c.U)(({wrapGrid:l})=>l(o.querySelector("#grid"))),(0,d.w)(()=>(0,v.R)(h,"input")),(0,c.U)(l=>l.target.value),(0,s.b)(400),(0,r.x)(),(0,u.h)(l=>l.length>0)).subscribe(this.searchKey$)}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(F.eN),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tumblr"]],decls:6,vars:6,consts:[["type","search",3,"value"],["id","grid"],[3,"large","super","click",4,"ngFor","ngForOf"],[3,"click"],["loading","lazy",3,"src"]],template:function(o,h){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",0),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,D,2,5,"article",2),e.ALo(5,"async"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("value",e.lcZ(2,2,h.searchKey$)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(5,4,h.results$)))},directives:[m.sg],pipes:[m.Ov],styles:["root[_ngcontent-%COMP%] {\n    --image-nth: 3;\n  }\n  [_nghost-%COMP%] {\n    display: block;\n    height: 100%;\n  }\n  #grid[_ngcontent-%COMP%] {\n    display: grid;\n    height: 87vh;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    grid-auto-rows: 150px;\n    grid-auto-flow: dense;\n    overflow-x: auto;\n    gap: 4px;\n  }\n\n  .large[_ngcontent-%COMP%] {\n    grid-column: span 2;\n    grid-row: span 2;\n  }\n  .super[_ngcontent-%COMP%] {\n    grid-column: span 4;\n    grid-row: span 4;\n  }\n\n  img[_ngcontent-%COMP%] {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }"]}),n})();var P=(()=>{return(n=P||(P={})).ImageGIF="image/gif",n.ImageJPEG="image/jpeg",n.ImagePNG="image/png",n.VideoMp4="video/mp4",P;var n})();const O=[{path:"",component:I}];let E=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[S.Bz.forChild(O)],S.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,E]]}),n})()}}]);