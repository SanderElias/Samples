"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[992],{9992:(b,h,s)=>{s.r(h),s.d(h,{ComplexAPIModule:()=>N});var m=s(1048),g=s(5166),f=s(4553),a=s(9508),C=s(5696),v=s(4945),x=s(7969),_=s(3151),w=s(2147),u=s(4970),A=s(1528),y=s(8168),S=s(4551),Z=s(3568),t=s(9724),T=s(9226);function I(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"details")(2,"summary"),t._uU(3),t.TgZ(4,"button",4),t.NdJ("click",function(){const l=t.CHM(e).ngIf,p=t.oxw(2).$implicit,r=t.oxw();return r.selected.emit([r.key(p),l.name||l.title])}),t._uU(5," Select "),t.qZA()(),t._UZ(6,"app-show-rec",5),t.qZA(),t.BQk()}if(2&n){const e=i.ngIf;t.xp6(3),t.hij("",e.name||e.title," "),t.xp6(3),t.Q6J("record",e)}}function U(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw(2).$implicit,o=t.oxw();t.hij(" ",o.val(e)," ")}}function O(n,i){if(1&n&&(t.ynx(0),t.YNc(1,I,7,2,"ng-container",1),t.YNc(2,U,1,1,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=t.MAs(3),o=t.oxw().$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngIf",c.isRecord(c.val(o)))("ngIfElse",e)}}function P(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"details")(1,"summary"),t._uU(2),t.TgZ(3,"button",4),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw(2).$implicit,r=t.oxw();return r.selected.emit([r.key(p),l.name||l.title])}),t._uU(4," Select "),t.qZA()(),t._UZ(5,"app-show-rec",5),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.hij("",e.name||e.title," "),t.xp6(3),t.Q6J("record",e)}}function R(n,i){if(1&n&&t.YNc(0,P,6,2,"details",0),2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("ngForOf",o.val(e))}}function J(n,i){if(1&n&&(t.TgZ(0,"dl")(1,"dt"),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t.YNc(4,O,4,2,"ng-container",1),t.YNc(5,R,1,1,"ng-template",null,2,t.W1O),t.qZA()()),2&n){const e=i.$implicit,o=t.MAs(6),c=t.oxw();t.xp6(2),t.Oqu(c.key(e)),t.xp6(2),t.Q6J("ngIf",!c.isRecArray(e))("ngIfElse",o)}}let M=(()=>{class n{constructor(){this.selected=new t.vpe,this.key=e=>e[0],this.val=e=>e[1]}set record(e){e&&(this.entries=Object.entries(e))}isRecArray(e){const o=e[1];if(Array.isArray(o)&&o.length>0){const c=o[0];return!Array.isArray(c)&&"object"==typeof c}return!1}isRecord(e){return e&&!Array.isArray(e)&&"object"==typeof e&&e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-show-rec"]],inputs:{record:"record"},outputs:{selected:"selected"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["handleArray",""],["handleRec",""],[3,"click"],[3,"record"]],template:function(e,o){1&e&&t.YNc(0,J,7,3,"dl",0),2&e&&t.Q6J("ngForOf",o.entries)},directives:[m.sg,m.O5,n],styles:["dl[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: 5em 1fr;\n  }\n  dt[_ngcontent-%COMP%] {\n    font-weight: initial;\n    max-width: 5em;\n    overflow: hidden;\n  }\n  dd[_ngcontent-%COMP%] {\n    font-weight: bolder;\n    margin-left: .5em;\n  }\n  summary[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    display: inline-block;\n    margin-left: 5px;\n    padding: 2px;\n  }"]}),n})();function $(n,i){if(1&n&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e)}}const F=[{path:"",component:(()=>{class n{constructor(e){this.sw=e,this.chosenSet=new a.NI(""),this.name=new a.NI(""),this.availableSets$=this.sw.swapiRoot$.pipe((0,x.U)(o=>Object.keys(o))),this.result$=(0,C.a)(this.chosenSet.valueChanges,this.name.valueChanges.pipe((0,_.b)(250),(0,w.x)(),(0,u.h)(Boolean))).pipe((0,A.w)(([o,c])=>this.sw.findIn(o,c)),(0,u.h)(Boolean),(0,y.b)(o=>this.rawData=o),(0,S.b)(o=>this.sw.enrich(o)),(0,Z.K)(o=>(console.error(o),(0,v.of)({"Not Found":"Your search string didn't return any results"}))))}ngAfterViewInit(){this.changeTo(["people","luke"])}changeTo(e){var o=this;return(0,f.Z)(function*(){const c=yield o.availableSets$.toPromise(),[l,p]=e;let r=l;if(!c.includes(l)){const d=o.rawData[l];r=o.sw.detectSet(Array.isArray(d)?d[0]:d)}console.log(r,p),o.chosenSet.setValue(r,{emitEvent:!0}),o.name.setValue(p,{emitEvent:!0})})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.qj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-apisample"]],decls:20,vars:8,consts:[["target","blank","href","https://github.com/SanderElias/Samples/blob/master/projects/se-ng/swapi/src/lib/swapi.service.ts"],["target","blank","href","https://swapi.dev"],[3,"formControl"],[4,"ngFor","ngForOf"],["type","text","autofocus","",3,"formControl"],[3,"record","selected"]],template:function(e,o){1&e&&(t.TgZ(0,"H3"),t._uU(1,"Complex api sample"),t.qZA(),t.TgZ(2,"h4"),t._uU(3,"(first load might take a while!)"),t.qZA(),t.TgZ(4,"p"),t._uU(5," The complexity is in the API, have an look at "),t.TgZ(6,"a",0),t._uU(7,"the swapi service"),t.qZA(),t._uU(8,"."),t._UZ(9,"br"),t._uU(10," This sample loads all of "),t.TgZ(11,"a",1),t._uU(12,"SWAPI"),t.qZA(),t._uU(13," and caches it to indexedDB. This is also the reason the first load takes longer.\n"),t.qZA(),t.TgZ(14,"select",2),t.YNc(15,$,2,1,"option",3),t.ALo(16,"async"),t.qZA(),t._UZ(17,"input",4),t.TgZ(18,"app-show-rec",5),t.NdJ("selected",function(l){return o.changeTo(l)}),t.ALo(19,"async"),t.qZA()),2&e&&(t.xp6(14),t.Q6J("formControl",o.chosenSet),t.xp6(1),t.Q6J("ngForOf",t.lcZ(16,4,o.availableSets$)),t.xp6(2),t.Q6J("formControl",o.name),t.xp6(1),t.Q6J("record",t.lcZ(19,6,o.result$)))},directives:[a.EJ,a.JJ,a.oH,m.sg,a.YN,a.Kr,a.Fj,M],pipes:[m.Ov],styles:["[_nghost-%COMP%] {\n    display: block;\n    max-height: 95vh;\n    max-width: 98vw;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }"]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,g.Bz.forChild(F),a.UX]]}),n})()}}]);