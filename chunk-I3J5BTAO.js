import{Lc as m,Mc as g,ea as r,na as l,wa as p}from"./chunk-JMJSAENN.js";var c,a,h,o;if(typeof indexedDB<"u"){let{createStore:e,get:d,set:u,update:s,del:n}=await import("./dist-XK3YZD4P.js"),i=e("mqtt","se-store");c=t=>d(t,i),a=(t,f)=>u(t,f,i),h=(t,f)=>s(t,f,i),o=t=>n(t,i)}else{let e=new Map;a=async(d,u)=>e.set(d,u),o=async d=>e.delete(d),h=async(d,u)=>e.set(d,u),c=async d=>{}}function v(e,d,u=r(l)){let s=p(d,{debugName:`Persisted ${e}`});return c(e).then(n=>{n!==void 0&&s.set(n)}).catch(()=>{}),m(async()=>{let n=s(),i=await c(e).catch(()=>{});n!==i&&(n!==void 0?a(e,n).catch(()=>{}):o(e).catch(()=>{}))},{injector:u,debugName:"PersistEffect"}),s}function x(e,d,u){let s=g({source:d,computation:(n,i)=>{let t=u(n,i);return t!==i?.value&&t!==void 0?a(e,t).catch(()=>{}):t===void 0&&o(e).catch(()=>{}),t}});return c(e).then(n=>{n!==void 0&&s.set(n)}),s}export{v as a,x as b};
