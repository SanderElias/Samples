import{a as U,d as y}from"./chunk-MEYNLC3L.js";import{e as ne}from"./chunk-GW4DIXBX.js";import"./chunk-XD26RAP7.js";import{b as te}from"./chunk-O3LUJ5SK.js";import"./chunk-OZD4UVZE.js";import"./chunk-BJIBN36K.js";import{Ab as h,Cc as K,Db as $,Dc as p,Ec as E,Fb as P,Hb as R,Ib as J,Ja as L,Ka as z,Kb as X,Kc as W,Lb as G,Lc as ee,Mb as o,Nb as r,Ob as g,Sb as b,Vb as d,Wb as T,Xa as V,Xb as u,Yb as _,Za as a,cc as S,da as m,dc as w,ec as Y,fc as s,gc as C,hc as I,ja as v,ka as x,la as F,lb as c,nc as Z,oa as N,qb as Q,sa as H,wb as q,wc as k,yb as A,za as O}from"./chunk-OGHAFDIF.js";import"./chunk-I4MTPUBM.js";async function ie(){let D=await import("./dist-2FXOYP5S.js");return te(D.faker)}var oe=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-spinner"]],decls:16,vars:0,consts:[["width","32","height","32","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],[1,"spinner_auJJ"],["cx","12","cy","3","r","1",1,"spinner_EUy1"],["cx","16.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_f6oS"],["cx","7.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_NTs9"],["cx","19.79","cy","7.50","r","1",1,"spinner_EUy1","spinner_g3nX"],["cx","4.21","cy","7.50","r","1",1,"spinner_EUy1","spinner_4vv9"],["cx","21.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_nvEs"],["cx","3.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_GOx1"],["cx","19.79","cy","16.50","r","1",1,"spinner_EUy1","spinner_MaNM"],["cx","4.21","cy","16.50","r","1",1,"spinner_EUy1","spinner_YaQo"],["cx","16.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_4nle"],["cx","7.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_HXuO"],["cx","12","cy","21","r","1",1,"spinner_EUy1","spinner_ZETM"]],template:function(e,n){e&1&&(F(),o(0,"svg",0)(1,"style"),s(2," .spinner_EUy1 { animation: spinner_grm3 1.2s infinite; } .spinner_f6oS { animation-delay: 0.1s; } .spinner_g3nX { animation-delay: 0.2s; } .spinner_nvEs { animation-delay: 0.3s; } .spinner_MaNM { animation-delay: 0.4s; } .spinner_4nle { animation-delay: 0.5s; } .spinner_ZETM { animation-delay: 0.6s; } .spinner_HXuO { animation-delay: 0.7s; } .spinner_YaQo { animation-delay: 0.8s; } .spinner_GOx1 { animation-delay: 0.9s; } .spinner_4vv9 { animation-delay: 1s; } .spinner_NTs9 { animation-delay: 1.1s; } .spinner_auJJ { transform-origin: center; animation: spinner_T3O6 6s linear infinite; } @keyframes spinner_grm3 { 0%, 50% { animation-timing-function: cubic-bezier(0.27, 0.42, 0.37, 0.99); r: 1px; } 25% { animation-timing-function: cubic-bezier(0.53, 0, 0.61, 0.73); r: 2px; } } @keyframes spinner_T3O6 { 0% { transform: rotate(360deg); } 100% { transform: rotate(0deg); } } "),r(),o(3,"g",1),g(4,"circle",2)(5,"circle",3)(6,"circle",4)(7,"circle",5)(8,"circle",6)(9,"circle",7)(10,"circle",8)(11,"circle",9)(12,"circle",10)(13,"circle",11)(14,"circle",12)(15,"circle",13),r()())},styles:["[_nghost-%COMP%]{display:inline-block;width:32px;height:32px;margin-inline-start:.3rem}svg[_ngcontent-%COMP%]{fill:#fff}"]})}}return i})();function pe(i,D){i&1&&g(0,"se-spinner")}var re=(()=>{class i{constructor(){this.relationsService=m(y),this.filter=this.relationsService.filter}async addRelation(){try{for(let t=0;t<10;t++){let e=await ie();await this.relationsService.create(e)}}catch(t){console.error(t)}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["crud-header"]],decls:6,vars:2,consts:[[3,"click"],["for","search"],["id","search","type","search","placeholder","Search...",3,"input","value"]],template:function(e,n){e&1&&(o(0,"button",0),d("click",function(){return n.addRelation()}),s(1,"Add relation"),r(),o(2,"label",1),s(3," Search: "),o(4,"input",2),d("input",function(f){return n.filter.set(f.target.value)}),r(),P(5,pe,1,0,"se-spinner"),r()),e&2&&(a(4),h("value",n.filter()),a(),R(n.relationsService.listIsLoading()?5:-1))},dependencies:[oe],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-block-end:.75rem}label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.2rem}"]})}}return i})();var fe=["highLight",""],he=["*"],B=(()=>{class i{constructor(){this.highLight=p()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["tbody","highLight",""]],inputs:{highLight:[1,"highLight"]},attrs:fe,ngContentSelectors:he,decls:1,vars:0,template:function(e,n){e&1&&(u(),_(0))},encapsulation:2,changeDetection:0})}}return i})();var ge=["dlg"],ue=["*"],se=(()=>{class i{constructor(){this.lightDismiss=p(!0),this.nds=m(U),this.dlg=E.required("dlg"),this._=ee(()=>{let t=this.dlg().nativeElement;this.nds.shown()?t.showModal():t.close()})}onClick(t){if(!this.lightDismiss())return;let e=t.target;console.log(e.tagName),e.tagName.toLowerCase()==="dialog"&&this.nds.close()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-notify-dialog"]],viewQuery:function(e,n){e&1&&S(n.dlg,ge,5),e&2&&w()},hostBindings:function(e,n){e&1&&d("click",function(f){return n.onClick(f)})},inputs:{lightDismiss:[1,"lightDismiss"]},ngContentSelectors:ue,decls:12,vars:3,consts:[["dlg",""],[3,"click"]],template:function(e,n){if(e&1){let l=b();u(),o(0,"dialog",null,0)(2,"div")(3,"header")(4,"h3"),s(5),r()(),o(6,"section"),s(7),r(),_(8),o(9,"footer")(10,"button",1),d("click",function(){return v(l),x(n.nds.close())}),s(11),r()()()()}e&2&&(a(5),C(n.nds.title()),a(2),I(" ",n.nds.message()," "),a(4),C(n.nds.dismissButtonText()))},styles:["[_nghost-%COMP%]{display:block}dialog[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-inline:2rem;padding-block:1rem}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{margin-block:.75rem}dialog[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;inline-size:100%;align-content:center;justify-content:center}"]})}}return i})();var _e=["sortOn",""],Ce=["*"];function ye(i,D){if(i&1&&s(0),i&2){let t=T();I(" ",t.order()==="asc"?"\u2193":"\u2191"," ")}}var ae=(()=>{class i{constructor(){this.relationsService=m(y),this.sort=this.relationsService.sort,this.order=this.relationsService.order,this.sortOn=p.required(),this.doSort=()=>{let t=this.sortOn();this.relationsService.sort()===t?this.relationsService.order.update(n=>n==="asc"?"desc":"asc"):(this.relationsService.sort.set(t),this.relationsService.order.set("asc"))}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["th","sortOn",""]],hostBindings:function(e,n){e&1&&d("click",function(){return n.doSort()})},inputs:{sortOn:[1,"sortOn"]},attrs:_e,ngContentSelectors:Ce,decls:2,vars:1,template:function(e,n){e&1&&(u(),_(0),P(1,ye,1,1)),e&2&&(a(),R(n.sort()===n.sortOn()?1:-1))},styles:["[_nghost-%COMP%]{display:table-cell}"]})}}return i})();var ve=["dialog"],xe=["*"],le=(()=>{class i{constructor(){this.confirmText=p("yes"),this.cancelText=p("no"),this.lightDismiss=p(!1,{transform:W}),this.dlg=E.required("dialog"),this.elm=m(O),this.parent=this.elm.nativeElement.parentElement,this.parentBox=H({top:0,left:0,width:0,height:0,zIndex:1},{equal:ne}),this.style=k(()=>`top: ${this.parentBox().top}px;
       left: ${this.parentBox().left}px;
       width: ${this.parentBox().width}px;
       height: ${this.parentBox().height}px;
       z-index: ${this.parentBox().zIndex};`),this._=L({read:()=>{let t=this.parent.getBoundingClientRect(),e=this.parent.computedStyleMap().get("z-index")?.value;this.parentBox.set({top:t.top,left:t.left,width:t.width,height:t.height,zIndex:e==="auto"?1:Number(e)+1})}}),this.close=t=>{let e=this.dlg().nativeElement;t&&this.parent.dispatchEvent(this.originalEvent),e.close()},this._1=z(()=>{this.elm.nativeElement.style.display="block"})}onClick(t){let e=t.target;if(t.preventDefault(),t.stopPropagation(),e!==this.elm.nativeElement)return;let n=this.dlg().nativeElement;this.originalEvent=t,this.lightDismiss()&&n.addEventListener("click",l=>{t.preventDefault(),l.target===n&&n.close()}),n.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["confirm-it"]],viewQuery:function(e,n){e&1&&S(n.dlg,ve,5),e&2&&w()},hostVars:2,hostBindings:function(e,n){e&1&&d("click",function(f){return n.onClick(f)}),e&2&&$(n.style())},inputs:{confirmText:[1,"confirmText"],cancelText:[1,"cancelText"],lightDismiss:[1,"lightDismiss"]},ngContentSelectors:xe,decls:8,vars:2,consts:[["dialog",""],["type","button",3,"click"]],template:function(e,n){if(e&1){let l=b();u(),o(0,"dialog",null,0),_(2),o(3,"footer")(4,"button",1),d("click",function(){return v(l),x(n.close(!1))}),s(5),r(),o(6,"button",1),d("click",function(){return v(l),x(n.close(!0))}),s(7),r()()()}e&2&&(a(5),C(n.cancelText()),a(2),C(n.confirmText()))},styles:["[_nghost-%COMP%]{display:none;position:fixed;background-color:#6ae26a00}dialog[_ngcontent-%COMP%]{padding-block:1rem;padding-inline:2rem}dialog[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-block-start:1rem;gap:1rem;padding:.5rem}dialog[_ngcontent-%COMP%]::backdrop{background-color:#08080880;backdrop-filter:blur(3px)}"]})}}return i})();var Se=["org"],we=["*"],ce=(()=>{class i{constructor(){if(this.tbody=m(B,{optional:!0,skipSelf:!0}),this.elm=m(O).nativeElement,this.fakeElm=m(N).createElement("span"),this.originalContent=E.required("org",{read:O}),this.highLight=()=>{let t=this.originalContent().nativeElement,e=this.fakeElm;this.highlightIsDone(t,e)||(t.hidden=!1,e.innerHTML="")},this.highlightIsDone=(t,e)=>{let n=t.innerHTML;if(!n||n.trim()===""||n.trim()==="--")return!1;let l=this.tbody?.highLight();if(!l)return!1;let f=new RegExp(l,"gi");if(!f.test(n))return!1;let j=n.replace(f,me=>`<mark>${me}</mark>`);return j!==e.innerHTML&&(e.innerHTML=j,t.hidden=!0),!0},!this.tbody)throw new Error('[HighLightTDComponent] could not find the required parent `<tbody [highLight]="someSignal<string>"`');this.elm.appendChild(this.fakeElm),L({read:this.highLight})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["td",3,"ignoreHl",""]],viewQuery:function(e,n){e&1&&S(n.originalContent,Se,5,O),e&2&&w()},ngContentSelectors:we,decls:3,vars:0,consts:[["org",""]],template:function(e,n){e&1&&(u(),o(0,"span",null,0),_(2),r())},encapsulation:2,changeDetection:0})}}return i})();var Ee=["userId",""],de=(()=>{class i{constructor(){this.rs=m(y),this.userId=p.required(),this.edit=K(),this.relRef=this.rs.read(this.userId),this.unStable=k(()=>{let t=this.relRef().isLoading(),e=this.rs.listIsLoading();return t||e||!this.relRef().value()}),this.rel=k(()=>{let t=this.relRef().value();return this.rs.listIsLoading()&&this.lastUser?this.lastUser:(this.lastUser=t,t??{})})}deleteRelation(t){this.rs.delete(t).catch(e=>{console.error(e)})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["tr","userId",""]],inputs:{userId:[1,"userId"]},outputs:{edit:"edit"},attrs:Ee,decls:17,vars:7,consts:[["ignoreHl",""],[3,"click","disabled"],["lightDismiss",""],["loading","eager","alt","User Avatar","width","42","height","42",3,"src"]],template:function(e,n){e&1&&(o(0,"td",0)(1,"button",1),d("click",function(){return n.deleteRelation(n.rel())}),s(2," \u{1F5D1}\uFE0F "),o(3,"confirm-it",2)(4,"h3"),s(5,"Sure?"),r(),s(6),r()(),o(7,"button",1),d("click",function(){return n.edit.emit(n.rel().id)}),s(8,"\u270F\uFE0F"),r()(),o(9,"td",0),g(10,"img",3),r(),o(11,"td"),s(12),r(),o(13,"td"),s(14),r(),o(15,"td"),s(16),r()),e&2&&(a(),h("disabled",n.unStable()),a(5),I(" Are you sure you want to delete ",n.rel().name," "),a(),h("disabled",n.unStable()),a(3),h("src",n.rel().avatar??"https://avatars.githubusercontent.com/u/96109922",V),a(2),C(n.rel().name??"--"),a(2),C(n.rel().username??"--"),a(2),C(n.rel().email??"--"))},dependencies:[le,ce],styles:["[_nghost-%COMP%]{display:table-row}[_nghost-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background-color:var(--surface-2)}td[_ngcontent-%COMP%]{--_width: calc((100vw - 12rem) / 3);inline-size:var(--_width);max-inline-size:var(--_width);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}td[_ngcontent-%COMP%]:has(img){justify-content:center;align-items:center;inline-size:3.5rem;max-inline-size:3.5rem}td[_ngcontent-%COMP%]:has(img)   img[_ngcontent-%COMP%]{aspect-ratio:1;inline-size:42px;border-radius:50%;object-fit:cover;object-position:center}td[_ngcontent-%COMP%]:has(button){display:flex;inline-size:7rem;max-inline-size:7rem;justify-content:center;align-items:center;gap:8px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]{border-radius:50%;aspect-ratio:1;padding-inline:9px;padding-block:4px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]:disabled{opacity:.5;margin-inline:var(--size-0)}"]})}}return i})();var Me=["dlg"],De=()=>[import("./relation-form.component-YWDWCWJU.js").then(i=>i.RelationForm)];function be(i,D){if(i&1){let t=b();o(0,"tr",6),d("edit",function(){let n=v(t).$implicit,l=T();return x(l.edit(n))}),r()}if(i&2){let t=D.$implicit;h("userId",t)}}function ke(i,D){if(i&1){let t=b();o(0,"relation-form",7),d("done",function(){v(t),T();let n=Y(19);return x(n.close())}),r()}if(i&2){let t=T();h("id",t.editRec())}}function Oe(i,D){i&1&&(o(0,"p"),s(1,"Loading..."),r())}var xt=(()=>{class i{constructor(){this.relationsService=m(y),this.nds=m(U),this.lastList=[],this.relationIds=k(()=>{let t=this.relationsService.list(),e=this.relationsService.listIsLoading();t.length===0&&e?t.concat(this.lastList):this.lastList=t;let n=Array.from({length:10},()=>"");return[...t,...n].splice(0,10)}),this.editRec=H(void 0),this.dlgRef=E.required("dlg"),this.filter=this.relationsService.filter}async edit(t){let e=this.dlgRef().nativeElement;this.editRec.set(t),e.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-crud-stuff"]],viewQuery:function(e,n){e&1&&S(n.dlgRef,Me,5),e&2&&w()},features:[Z([y])],decls:25,vars:1,consts:[["dlg",""],["sortOn","name"],["sortOn","username"],["sortOn","email"],[3,"highLight"],[3,"userId"],[3,"edit","userId"],[3,"done","id"]],template:function(e,n){e&1&&(o(0,"h1"),s(1,"CRUD Stuff"),r(),g(2,"crud-header"),o(3,"table")(4,"thead")(5,"tr")(6,"th"),s(7,"Actions"),r(),g(8,"th"),o(9,"th",1),s(10,"Name"),r(),o(11,"th",2),s(12,"Username"),r(),o(13,"th",3),s(14,"Email"),r()()(),o(15,"tbody",4),X(16,be,1,1,"tr",5,J),r()(),o(18,"dialog",null,0),Q(20,ke,1,1)(21,Oe,2,0),q(22,20,De,null,21),A(0,-1),r(),g(24,"se-notify-dialog")),e&2&&(a(15),h("highLight",n.filter()),a(),G(n.relationIds()))},dependencies:[de,B,se,re,ae],styles:["[_nghost-%COMP%]{display:block;padding:16px}"]})}}return i})();export{xt as CrudStuffComponent};
