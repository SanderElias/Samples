"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[393],{6495:(j,N,h)=>{h.d(N,{U2:()=>_,t8:()=>f});function g(s){return new Promise((o,a)=>{s.oncomplete=s.onsuccess=()=>o(s.result),s.onabort=s.onerror=()=>a(s.error)})}let v;function l(){return v||(v=function C(s,o){const a=function m(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let o;return new Promise(a=>{const c=()=>indexedDB.databases().finally(a);o=setInterval(c,100),c()}).finally(()=>clearInterval(o))}().then(()=>{const c=indexedDB.open(s);return c.onupgradeneeded=()=>c.result.createObjectStore(o),g(c)});return(c,y)=>a.then(n=>y(n.transaction(o,c).objectStore(o)))}("keyval-store","keyval")),v}function _(s,o=l()){return o("readonly",a=>g(a.get(s)))}function f(s,o,a=l()){return a("readwrite",c=>(c.put(o,s),g(c.transaction)))}},393:(j,N,h)=>{h.r(N),h.d(N,{BintreeModule:()=>z});var m=h(1048),x=h(5166),g=h(4553),C=h(6495),v=h(8023);const l=()=>String.fromCharCode(Math.floor(26*Math.random())+97),f=new Map,b=(t,r,e,i)=>{const d={id:Date.now().toString(36)+"-"+l()+l()+l(),parentId:r,value:t,left:e,right:i};return f.set(d.id,d),d},u=t=>f.get(t),p=()=>[...f.values()].find(t=>void 0===t.parentId);function B(t,r=p()){return void 0===r?t:t.value<r.value?void 0===r.left?(r.left=t.id,t.parentId=r.id,t):B(t,u(r.left)):t.value>r.value?void 0===r.right?(r.right=t.id,t.parentId=r.id,t):B(t,u(r.right)):void(t.value===r.value&&(console.warn("thrown away duplicate value"),f.delete(t.id)))}function I(t=p()){const r=u(t.parentId),e=u(t.right);if(void 0===e)return t;e.parentId=null==r?void 0:r.id,void 0!==r&&(r.left===t.id?r.left=e.id:r.right=e.id);const i=u(e.left);return e.left=t.id,t.parentId=e.id,void 0!==i?(t.right=i.id,i.parentId=t.id):t.right=void 0,e}const M=()=>[...f.values()].sort((t,r)=>t.value<r.value?-1:1);function s(t=p()){const r=u(t.parentId),e=u(t.left);if(void 0===e)return t;e.parentId=null==r?void 0:r.id,void 0!==r&&(r.left===t.id?r.left=e.id:r.right=e.id);const i=u(e.right);return e.right=t.id,t.parentId=e.id,void 0!==i?(t.left=i.id,i.parentId=t.id):t.left=void 0,e}function o(t){if(void 0===t)return 0;const r=Math.max(o(u(t.left)),o(u(t.right)));return t.height=r+1,t.height}function a(t){if(void 0===t)return 0;const r=e=>{var i;return(null===(i=u(e))||void 0===i?void 0:i.height)||0};return t.balance=r(t.left)-r(t.right),t.balance}function y(t=p()){if(void 0===t)return;const r=a(t);if(r<-1){const i=u(t.right);i&&a(i)>0&&s(i);const d=I(t);return o(p()),y(d)}if(r>1){const i=u(t.left);i&&i.balance<0&&I(i);const d=s(t);return o(p()),y(d)}const e=i=>{a(i),Math.abs(null==i?void 0:i.balance)>1&&y(i)};e(u(t.left)),e(u(t.right))}var n=h(9724),Z=h(5557),S=h(7969);function k(t,r){if(1&t&&(n.TgZ(0,"span",3),n._uU(1),n.qZA()),2&t){const e=n.oxw().ngIf,i=n.oxw();let d;n.Q6J("title",i.title(e)),n.xp6(1),n.hij(" ",null!==(d=null==e?null:e.value)&&void 0!==d?d:"-"," ")}}function $(t,r){if(1&t&&(n.TgZ(0,"div",4),n._UZ(1,"b-node",5),n.ALo(2,"async"),n._UZ(3,"b-node",6),n.ALo(4,"async"),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("bNode",n.lcZ(2,2,e.left$)),n.xp6(2),n.Q6J("bNode",n.lcZ(4,4,e.right$))}}function D(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"div"),n.YNc(2,k,2,2,"span",1),n.qZA(),n.YNc(3,$,5,6,"div",2),n.BQk()),2&t){const e=r.ngIf;let i;n.xp6(2),n.Q6J("ngIf",null!==(i=null==e?null:e.value)&&void 0!==i?i:void 0),n.xp6(1),n.Q6J("ngIf",(null==e?null:e.left)||(null==e?null:e.right))}}let J=(()=>{class t{constructor(){this.node$=new Z.t,this.left$=this.node$.pipe((0,S.U)(e=>Object.assign(Object.assign({},u(e.left)),{time:Date.now()}))),this.right$=this.node$.pipe((0,S.U)(e=>Object.assign(Object.assign({},u(e.right)),{time:Date.now()}))),this.height=o,this.balance=a}set bNode(e){setTimeout(()=>this.node$.next(Object.assign(Object.assign({},e),{time:Date.now()})),10)}title(e){return`Height: ${e.height} balance: ${a(e)}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["b-node"]],inputs:{bNode:"bNode"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],["class","row",4,"ngIf"],[3,"title"],[1,"row"],[1,"left",3,"bNode"],[1,"right",3,"bNode"]],template:function(e,i){1&e&&(n.YNc(0,D,4,2,"ng-container",0),n.ALo(1,"async")),2&e&&n.Q6J("ngIf",n.lcZ(1,1,i.node$))},directives:[m.O5,t],pipes:[m.Ov],styles:["[_nghost-%COMP%] {\n    display: grid;\n    width: fit-content;\n    grid-template-columns: 1fr;\n    grid-template-rows: 20px 1fr;\n    justify-content: center;\n    align-content: center;\n    gap: 2px;\n    margin: 4px;\n    padding: 2px;\n    border: 1px solid rgba(255, 255, 255, 0.774);\n  }\n\n  div[_ngcontent-%COMP%] {\n    text-align: center;\n  }\n\n  div.row[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: center;\n    align-content: center;\n  }\n\n  div[_ngcontent-%COMP%]:first-child {\n    padding: 9px;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    background-color: rgba(93, 14, 93);\n\n  }\n\n  .left[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 0, 255);\n  }\n\n  .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 128, 0);\n  }"],changeDetection:0}),t})();const R=t=>[...new Set(Array.from({length:t},()=>((t=2e3)=>Math.floor(Math.random()*t))()))];function O(){return(O=(0,g.Z)(function*(){let t;return t||(t=R(100),(0,C.t8)("binTreeSampleData",t)),t})).apply(this,arguments)}const G=[{path:"",component:(()=>{class t{constructor(){this.count=31,this.root$=new v.x,this.nodes=M(),this.dump=()=>{(function P(){console.table([...f.values()].sort((t,r)=>t.value<r.value?-1:1).map(t=>{var r,e;return Object.assign(Object.assign({},t),{leftVal:null===(r=u(t.left))||void 0===r?void 0:r.value,cur:t.value,rightVal:null===(e=u(t.right))||void 0===e?void 0:e.value})}))})(),this.refresh()},this.deb=null}ngOnInit(){this.reset()}reset(){var e=this;return(0,g.Z)(function*(){f.clear();const[i,...d]=yield function F(){return O.apply(this,arguments)}(),T=b(i);d.forEach(H=>B(b(H),T)),o(T),setTimeout(()=>e.root$.next(T),20),e.nodes=M()})()}refresh(){this.deb&&clearTimeout(this.deb),this.deb=setTimeout(()=>{this.root$.next(Object.assign(Object.assign({},p()),{time:Date.now()}))},0),o(p())}rl(e=p()){I(e),this.refresh()}rr(e=p()){s(e),this.refresh()}rb(e=p()){(function c(){let t=100;for(y();;){const r=[...f.values()].find(e=>Math.abs(a(e))>1);if(console.log(f.size,null==r?void 0:r.value,a(r)),void 0===r||!--t)break;y(r)}})(),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-bintree"]],decls:13,vars:3,consts:[[1,"button-bar"],[3,"click"],[3,"bNode"]],template:function(e,i){1&e&&(n.TgZ(0,"h1"),n._uU(1,"Binary tree"),n.qZA(),n.TgZ(2,"div",0)(3,"button",1),n.NdJ("click",function(){return i.rl()}),n._uU(4,"rl"),n.qZA(),n.TgZ(5,"button",1),n.NdJ("click",function(){return i.rr()}),n._uU(6,"rr"),n.qZA(),n.TgZ(7,"button",1),n.NdJ("click",function(){return i.rb()}),n._uU(8,"rb"),n.qZA(),n.TgZ(9,"button",1),n.NdJ("click",function(){return i.dump()}),n._uU(10,"dump"),n.qZA()(),n._UZ(11,"b-node",2),n.ALo(12,"async")),2&e&&(n.xp6(11),n.Q6J("bNode",n.lcZ(12,1,i.root$)))},directives:[J],pipes:[m.Ov],styles:[".button-bar[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(5,1fr);\n    max-width: 100vw;\n  }\n  .row[_ngcontent-%COMP%] {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(10,1fr);\n  }"],changeDetection:0}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[x.Bz.forChild(G)],x.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[m.ez,L]]}),t})()},4553:(j,N,h)=>{function m(g,C,v,l,_,f,b){try{var u=g[f](b),w=u.value}catch(p){return void v(p)}u.done?C(w):Promise.resolve(w).then(l,_)}function x(g){return function(){var C=this,v=arguments;return new Promise(function(l,_){var f=g.apply(C,v);function b(w){m(f,l,_,b,u,"next",w)}function u(w){m(f,l,_,b,u,"throw",w)}b(void 0)})}}h.d(N,{Z:()=>x})}}]);