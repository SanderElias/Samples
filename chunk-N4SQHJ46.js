import{X as f,Z as i,c as y,eb as a,fa as u,pa as c,sc as v,xa as s}from"./chunk-L7DZHDME.js";function h(r){r||(c(h),r=u(s));let e=new y(t=>r.onDestroy(t.next.bind(t)));return t=>t.pipe(f(e))}function g(r,e){let t=!e?.manualCleanup;t&&!e?.injector&&c(g);let l=t?e?.injector?.get(s)??u(s):null,d=m(e?.equal),o;e?.requireSync?o=a({kind:0},{equal:d}):o=a({kind:1,value:e?.initialValue},{equal:d});let b=r.subscribe({next:n=>o.set({kind:1,value:n}),error:n=>{if(e?.rejectErrors)throw n;o.set({kind:2,error:n})}});if(e?.requireSync&&o().kind===0)throw new i(601,!1);return l?.onDestroy(b.unsubscribe.bind(b)),v(()=>{let n=o();switch(n.kind){case 1:return n.value;case 2:throw n.error;case 0:throw new i(601,!1)}},{equal:e?.equal})}function m(r=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&r(e.value,t.value)}export{h as a,g as b};
