"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([["common"],{6495:(L,O,e)=>{e.d(O,{U2:()=>f,t8:()=>i});function _(r){return new Promise((t,s)=>{r.oncomplete=r.onsuccess=()=>t(r.result),r.onabort=r.onerror=()=>s(r.error)})}let u;function n(){return u||(u=function a(r,t){const s=function o(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t;return new Promise(s=>{const l=()=>indexedDB.databases().finally(s);t=setInterval(l,100),l()}).finally(()=>clearInterval(t))}().then(()=>{const l=indexedDB.open(r);return l.onupgradeneeded=()=>l.result.createObjectStore(t),_(l)});return(l,A)=>s.then(I=>A(I.transaction(t,l).objectStore(t)))}("keyval-store","keyval")),u}function f(r,t=n()){return t("readonly",s=>_(s.get(r)))}function i(r,t,s=n()){return s("readwrite",l=>(l.put(t,r),_(l.transaction)))}},4581:(L,O,e)=>{e.d(O,{R:()=>h});var o=e(5955),E=e(818),_=e(5619),a=e(6602),u=e(5975),n=e(2692);const f=["addListener","removeListener"],i=["addEventListener","removeEventListener"],c=["on","off"];function h(v,g,p,r){if((0,u.m)(p)&&(r=p,p=void 0),r)return h(v,g,p).pipe((0,n.Z)(r));const[t,s]=function U(v){return(0,u.m)(v.addEventListener)&&(0,u.m)(v.removeEventListener)}(v)?i.map(l=>A=>v[l](g,A,p)):function P(v){return(0,u.m)(v.addListener)&&(0,u.m)(v.removeListener)}(v)?f.map(m(v,g)):function C(v){return(0,u.m)(v.on)&&(0,u.m)(v.off)}(v)?c.map(m(v,g)):[];if(!t&&(0,a.z)(v))return(0,_.z)(l=>h(l,g,p))((0,o.Xf)(v));if(!t)throw new TypeError("Invalid event target");return new E.y(l=>{const A=(...I)=>l.next(1<I.length?I:I[0]);return t(A),()=>s(A)})}function m(v,g){return p=>r=>v[p](g,r)}},5490:(L,O,e)=>{e.d(O,{F:()=>_});var o=e(2844),E=e(1995);function _(a=0,u=o.z){return a<0&&(a=0),(0,E.H)(a,a,u)}},1995:(L,O,e)=>{e.d(O,{H:()=>u});var o=e(818),E=e(2844),_=e(1830);function u(n=0,f,i=E.P){let c=-1;return null!=f&&((0,_.K)(f)?i=f:c=f),new o.y(h=>{let m=function a(n){return n instanceof Date&&!isNaN(n)}(n)?+n-i.now():n;m<0&&(m=0);let P=0;return i.schedule(function(){h.closed||(h.next(P++),0<=c?this.schedule(void 0,c):h.complete())},m)})}},8982:(L,O,e)=>{e.d(O,{g:()=>C});var o=e(2844),E=e(6811),_=e(5598),a=e(2085),u=e(8499),n=e(408),i=e(7969),h=e(5619);function m(U,v){return v?g=>(0,E.z)(v.pipe((0,_.q)(1),function f(){return(0,a.e)((U,v)=>{U.subscribe((0,u.x)(v,n.Z))})}()),g.pipe(m(U))):(0,h.z)((g,p)=>U(g,p).pipe((0,_.q)(1),function c(U){return(0,i.U)(()=>U)}(g)))}var P=e(1995);function C(U,v=o.z){const g=(0,P.H)(U,v);return m(()=>g)}},2147:(L,O,e)=>{e.d(O,{x:()=>a});var o=e(8330),E=e(2085),_=e(8499);function a(n,f=o.y){return n=null!=n?n:u,(0,E.e)((i,c)=>{let h,m=!0;i.subscribe((0,_.x)(c,P=>{const C=f(P);(m||!n(h,C))&&(m=!1,h=C,c.next(P))}))})}function u(n,f){return n===f}},1233:(L,O,e)=>{e.d(O,{j:()=>_});var o=e(2085),E=e(2728);function _(a,u=1/0,n){return u=(u||0)<1?1/0:u,(0,o.e)((f,i)=>(0,E.p)(f,i,a,u,void 0,!0,n))}},2993:(L,O,e)=>{e.d(O,{j:()=>E});var o=e(7969);function E(..._){const a=_.length;if(0===a)throw new Error("list of properties cannot be empty.");return(0,o.U)(u=>{let n=u;for(let f=0;f<a;f++){const i=null==n?void 0:n[_[f]];if(void 0===i)return;n=i}return n})}},6252:(L,O,e)=>{e.d(O,{u:()=>_});var o=e(2049),E=e(2085);function _(a,u){return(0,E.e)((0,o.U)(a,u,arguments.length>=2,!1,!0))}},2474:(L,O,e)=>{e.d(O,{q:()=>a});var o=e(6252),E=e(2085);const _=(u,n)=>(u.push(n),u);function a(){return(0,E.e)((u,n)=>{(0,o.u)(_,[])(u).subscribe(n)})}},97:(L,O,e)=>{e.d(O,{b:()=>_});var o=e(818),E=e(5975);function _(a){return!!a&&(a instanceof o.y||(0,E.m)(a.lift)&&(0,E.m)(a.subscribe))}},1578:(L,O,e)=>{e.d(O,{m:()=>a});var o=e(5598),E=e(7969),_=e(8168);function a(u){return function n(f,i){return u.pipe((0,o.q)(1),(0,E.U)(c=>{if("string"==typeof f)return Object.assign(Object.assign({},c),{[f]:i});if("object"==typeof f)return Object.assign(Object.assign({},c),f);throw new Error("Property needs to be a string or an object")}),(0,_.b)(c=>u.next(c))).toPromise()}}},4841:(L,O,e)=>{e.d(O,{H:()=>U});var o=e(4553),E=e(8023),_=e(1995),a=e(5619),u=e(1927),n=e(6466),f=e(7969),i=e(9676),c=e(5598),h=e(8168),m=e(9724);const P=e.e("node_modules_chance_chance_js").then(e.t.bind(e,5935,23)).then(p=>new p.Chance);let U=(()=>{class p{constructor(){this.flush$=new E.x,this.updatedUsers$=new E.x,this.allUsers$=this.flush$.pipe((0,a.z)(()=>this.updatedUsers$),(0,u.O)([]),(0,n.d)({bufferSize:1,refCount:!1})),this.admins$=this.allUsers$.pipe((0,f.U)(t=>t.filter(s=>s.isAdmin))),this.users$=this.allUsers$.pipe((0,f.U)(t=>t.filter(s=>!s.isAdmin))),this.flushCache()}addUsers(t){var s=this;return(0,o.Z)(function*(){const l=yield s.allUsers$.pipe((0,i.P)()).toPromise(),A=l.length,I=yield Promise.all(Array.from({length:t}).map(function(){var R=(0,o.Z)(function*(T,j){return Object.assign({id:A+j},yield function v(){return g.apply(this,arguments)}())});return function(T,j){return R.apply(this,arguments)}}()));s.updatedUsers$.next(l.concat(I))})()}saveUser(t){var s=this;return(0,o.Z)(function*(){const l=yield s.allUsers$.pipe((0,c.q)(1)).toPromise(),A=l.findIndex(I=>I.id===t.id);if(A>-1)Object.assign(l[A],t);else{let I;for(;!I||l.findIndex(R=>R.id===I)>-1;)I=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);l.unshift(Object.assign(Object.assign({},t),{id:I}))}s.updatedUsers$.next(l)})()}deleteUser(t){var s=this;return(0,o.Z)(function*(){const l=(yield s.allUsers$.pipe((0,i.P)()).toPromise()).filter(A=>A.id!==t.id);s.updatedUsers$.next(l)})()}flushCache(){var t=this;return(0,o.Z)(function*(){const s=yield P;yield new Promise(l=>setTimeout(l)),t.flush$.next(),(0,_.H)(0,250).pipe((0,h.b)(()=>t.addUsers(s.integer({min:100,max:400}))),(0,c.q)(20)).subscribe()})()}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();function g(){return(g=(0,o.Z)(function*(){const p=yield P;return{userState:p.integer({min:0,max:3}),username:p.name(),isAdmin:p.bool(),isActive:p.bool(),email:p.email()}})).apply(this,arguments)}},4395:(L,O,e)=>{e.d(O,{g:()=>a,f:()=>u});var o=e(9724),E=e(97),_=e(8168);let a=(()=>{class n{constructor(i,c,h){this.templateRef=i,this.viewContainer=c,this.cdr=h,this.context={$implicit:void 0,seLet:void 0},this.assign=this.assign.bind(this)}set seLet(i){this.assign(i)}set seLetObserve(i){this.assign(i)}set seLetOn(i){this.assign(i)}assign(i){this.sub&&this.sub.unsubscribe(),(0,E.b)(i)?this.sub=i.pipe((0,_.b)(()=>this.cdr.markForCheck())).subscribe(c=>{this.context.$implicit=c,this.context.seLet=c}):(this.context.$implicit=i,this.context.seLet=i)}ngOnInit(){this.viewContainer.createEmbeddedView(this.templateRef,this.context)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return n.\u0275fac=function(i){return new(i||n)(o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","seLet",""]],inputs:{seLet:"seLet",seLetObserve:"seLetObserve",seLetOn:"seLetOn"}}),n})(),u=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})()},2702:(L,O,e)=>{e.d(O,{cb:()=>m,C3:()=>P,$b:()=>h,m9:()=>p});var o=e(8023);const E=Symbol("_acc"),_=Symbol("_aci"),i=(Symbol("_avc"),Symbol("_avi"),Symbol("_dc"),Symbol("_oc"),Symbol("_oi")),c=Symbol("_od"),h=(r=class{})=>{var t,s;return s=class extends r{constructor(){super(...arguments),this[t]=new o.x,this.seOnDestroy$=this[c].asObservable()}ngOnDestroy(){super.ngOnDestroy&&super.ngOnDestroy(),this[c].next(),this[c].complete()}},t=c,s},m=(r=class{})=>{var t,s;return s=class extends r{constructor(){super(...arguments),this[t]=new o.x,this.seAfterContentChecked$=this[E].asObservable()}ngAfterContentChecked(){this[E].next(),super.ngAfterContentChecked&&super.ngAfterContentChecked()}ngOnDestroy(){this[E].complete(),super.ngOnDestroy&&super.ngOnDestroy()}},t=E,s},P=(r=class{})=>{var t,s;return s=class extends r{constructor(){super(...arguments),this[t]=new o.x,this.seAfterContentInit$=this[_].asObservable()}ngAfterContentInit(){Promise.resolve().then(()=>{this[_].next(),this[_].complete()}),super.ngAfterContentInit&&super.ngAfterContentInit()}},t=_,s},p=(r=class{})=>{var t,s;return s=class extends r{constructor(){super(...arguments),this[t]=new o.x,this.seOnInit$=this[i].asObservable()}ngOnInit(){Promise.resolve().then(()=>{this[i].next(),this[i].complete()}),super.ngOnInit&&super.ngOnInit()}},t=i,s}},9959:(L,O,e)=>{e.d(O,{Hv:()=>f});var o=e(7969),E=e(97),_=e(4945),a=e(5696);function f(i){const c=Object.values(i).map(h=>(0,E.b)(h)?h:(0,_.of)(h));return(0,a.a)(c).pipe((0,o.U)(h=>Object.keys(i).reduce((m,P,C)=>(m[P]=h[C],m),{})))}},9226:(L,O,e)=>{e.d(O,{qj:()=>K,se:()=>R,ss:()=>T,TK:()=>j,QS:()=>I});var o=e(4762),E=e(6495),_=e(9724),a=e(985),u=e(8168),n=e(6466),f=e(1233),i=e(9018),c=e(7969),h=e(6252),m=e(4970),P=e(5598),C=e(4551),U=e(5619),v=e(6811),g=e(2474),p=e(8831),r=e(4945),t=e(3568),s=e(1528);let l;const A="sample-cache";function I(){return(0,o.mG)(this,void 0,void 0,function*(){if(l)return l;const y=yield(0,E.U2)(A);return l=y?new Map([...y]):new Map,l})}function R(y,b){l.set(y,b),(0,E.t8)(A,l)}function T(y){return l.has(y)}function j(y){return l.get(y)}let K=(()=>{class y{constructor(){this.baseUrl="https://swapi.dev/api/",this.load=d=>(0,o.mG)(this,void 0,void 0,function*(){if(d=B(d),yield I(),!T(d)){const D=yield fetch(d).then(M=>M.json()).catch(M=>{});yield R(d,D)}return j(d)}),this.swapiRoot$=(0,a.D)(this.load(this.baseUrl)).pipe((0,u.b)(d=>this.swapiRoot=d),(0,n.d)(1)),this.swPeople$=(0,a.D)(this.load(`${this.baseUrl}people/`)).pipe((0,f.j)(d=>d.next?this.load(d.next):i.E),(0,c.U)(d=>d.results),(0,h.u)((d,D)=>d.concat(D),[]),(0,c.U)(d=>d.map(D=>Object.assign(Object.assign({},D),{date:W(),id:D.url}))),(0,n.d)(1)),this.findById=d=>this.swPeople$.pipe((0,c.U)(D=>D[d]),(0,m.h)(Boolean),(0,P.q)(1)),this.swFilms$=(0,a.D)(this.load(`${this.baseUrl}films/`)).pipe((0,n.d)(1)),this.findFilmByUrl=d=>this.get(d),this.getRandomPerson=(d=1)=>(0,a.D)(Array.from({length:d})).pipe((0,C.b)(()=>this.swPeople$.pipe((0,c.U)(D=>D[Math.floor(Math.random()*D.length)]),(0,U.z)(D=>(0,v.z)(...D.films.map(M=>this.findFilmByUrl(M))).pipe((0,g.q)(),(0,c.U)(M=>Object.assign(Object.assign({},D),{films:M}))))))),this.findIn=(d,D)=>this.getAllRows(d).pipe((0,c.U)(M=>M.find(x=>(x.name||x.title||"").toLowerCase().includes(D.toLowerCase().trim())))),this.findWithName=d=>this.findIn("people",d),this.loadData().subscribe()}getAllPagedData(d){return(0,a.D)(this.load(`${d}`)).pipe((0,f.j)(D=>D.next?this.load(D.next):i.E))}get(d){const D=Object.values(this.swapiRoot).find(M=>d.toLowerCase().includes(M.toLowerCase()));return D?this.getAllPagedData(D).pipe((0,h.u)((M,x)=>M.concat(x.results),[]),(0,c.U)(M=>M.find(x=>x.url===d))):(0,a.D)(this.load(d))}loadData(){return this.swapiRoot$.pipe((0,u.b)(d=>this.swapiRoot=d),(0,C.b)(d=>Object.values(d).map(D=>this.getAllPagedData(D))),(0,p.u)(),(0,g.q)(),(0,n.d)(1))}enrich(d){const D=M=>{const x=d[M];return Array.isArray(x)&&x.length>0?(0,a.D)(d[M]).pipe((0,C.b)(S=>this.get(S)),(0,g.q)(),(0,c.U)(S=>({[M]:S}))):"string"==typeof x?(this.detectSet(x)?this.get(x):(0,r.of)(x)).pipe((0,c.U)(w=>({[M]:w}))):(0,r.of)(x).pipe((0,c.U)(S=>({[M]:S})))};return this.swapiRoot$.pipe((0,C.b)(M=>Object.keys(d).map(D)),(0,p.u)(),(0,h.u)((M,x)=>Object.assign(Object.assign({},M),x),{}),(0,t.K)(M=>(console.warn(M),(0,r.of)({}))))}getAllRows(d){return this.swapiRoot$.pipe((0,s.w)(()=>this.getAllPagedData(B(this.swapiRoot[d]))),(0,c.U)(D=>D.results),(0,h.u)((D,M)=>D.concat(M),[]),(0,n.d)(1))}detectSet(d){if("string"==typeof d){const D=Object.entries(this.swapiRoot).find(([M,x])=>d.includes(x));return D&&D[0]}}}return y.\u0275fac=function(d){return new(d||y)},y.\u0275prov=_.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function W(){const y=Math.ceil(1e3*Math.random())+1e3,b=Math.floor(12*Math.random()),d=Math.ceil(27*Math.random());return new Date(y,b,d,12,0)}function B(y){return y.split("http:").join("https:")}},4553:(L,O,e)=>{function o(_,a,u,n,f,i,c){try{var h=_[i](c),m=h.value}catch(P){return void u(P)}h.done?a(m):Promise.resolve(m).then(n,f)}function E(_){return function(){var a=this,u=arguments;return new Promise(function(n,f){var i=_.apply(a,u);function c(m){o(i,n,f,c,h,"next",m)}function h(m){o(i,n,f,c,h,"throw",m)}c(void 0)})}}e.d(O,{Z:()=>E})}}]);