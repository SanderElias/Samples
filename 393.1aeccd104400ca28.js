"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[393],{5557:(C,m,c)=>{c.d(m,{t:()=>_});var g=c(8023),w=c(2069);class _ extends g.x{constructor(a=1/0,u=1/0,l=w.l){super(),this._bufferSize=a,this._windowTime=u,this._timestampProvider=l,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=u===1/0,this._bufferSize=Math.max(1,a),this._windowTime=Math.max(1,u)}next(a){const{isStopped:u,_buffer:l,_infiniteTimeWindow:s,_timestampProvider:h,_windowTime:o}=this;u||(l.push(a),!s&&l.push(h.now()+o)),this._trimBuffer(),super.next(a)}_subscribe(a){this._throwIfClosed(),this._trimBuffer();const u=this._innerSubscribe(a),{_infiniteTimeWindow:l,_buffer:s}=this,h=s.slice();for(let o=0;o<h.length&&!a.closed;o+=l?1:2)a.next(h[o]);return this._checkFinalizedStatuses(a),u}_trimBuffer(){const{_bufferSize:a,_timestampProvider:u,_buffer:l,_infiniteTimeWindow:s}=this,h=(s?1:2)*a;if(a<1/0&&h<l.length&&l.splice(0,l.length-h),!s){const o=u.now();let p=0;for(let d=1;d<l.length&&l[d]<=o;d+=2)p=d;p&&l.splice(0,p+1)}}}},2069:(C,m,c)=>{c.d(m,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},393:(C,m,c)=>{c.r(m),c.d(m,{BintreeModule:()=>W});var g=c(1048),w=c(3290),_=c(4553),y=c(6495),a=c(8023);const u=()=>String.fromCharCode(Math.floor(26*Math.random())+97),s=new Map,h=(t,n,e,r)=>{const f={id:Date.now().toString(36)+"-"+u()+u()+u(),parentId:n,value:t,left:e,right:r};return s.set(f.id,f),f},o=t=>s.get(t),d=()=>[...s.values()].find(t=>void 0===t.parentId);function T(t,n=d()){return void 0===n?t:t.value<n.value?void 0===n.left?(n.left=t.id,t.parentId=n.id,t):T(t,o(n.left)):t.value>n.value?void 0===n.right?(n.right=t.id,t.parentId=n.id,t):T(t,o(n.right)):void(t.value===n.value&&(console.warn("thrown away duplicate value"),s.delete(t.id)))}function x(t=d()){const n=o(t.parentId),e=o(t.right);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.left);return e.left=t.id,t.parentId=e.id,void 0!==r?(t.right=r.id,r.parentId=t.id):t.right=void 0,e}const O=()=>[...s.values()].sort((t,n)=>t.value<n.value?-1:1);function N(t=d()){const n=o(t.parentId),e=o(t.left);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.right);return e.right=t.id,t.parentId=e.id,void 0!==r?(t.left=r.id,r.parentId=t.id):t.left=void 0,e}function v(t){if(void 0===t)return 0;const n=Math.max(v(o(t.left)),v(o(t.right)));return t.height=n+1,t.height}function b(t){if(void 0===t)return 0;const n=e=>{var r;return(null===(r=o(e))||void 0===r?void 0:r.height)||0};return t.balance=n(t.left)-n(t.right),t.balance}function B(t=d()){if(void 0===t)return;const n=b(t);if(n<-1){const r=o(t.right);r&&b(r)>0&&N(r);const f=x(t);return v(d()),B(f)}if(n>1){const r=o(t.left);r&&r.balance<0&&x(r);const f=N(t);return v(d()),B(f)}const e=r=>{b(r),Math.abs(null==r?void 0:r.balance)>1&&B(r)};e(o(t.left)),e(o(t.right))}var i=c(9724),S=c(5557),Z=c(7969);function D(t,n){if(1&t&&(i.TgZ(0,"span",3),i._uU(1),i.qZA()),2&t){const e=i.oxw().ngIf,r=i.oxw();let f;i.Q6J("title",r.title(e)),i.xp6(1),i.hij(" ",null!==(f=null==e?null:e.value)&&void 0!==f?f:"-"," ")}}function $(t,n){if(1&t&&(i.TgZ(0,"div",4),i._UZ(1,"b-node",5),i.ALo(2,"async"),i._UZ(3,"b-node",6),i.ALo(4,"async"),i.qZA()),2&t){const e=i.oxw(2);i.xp6(1),i.Q6J("bNode",i.lcZ(2,2,e.left$)),i.xp6(2),i.Q6J("bNode",i.lcZ(4,4,e.right$))}}function J(t,n){if(1&t&&(i.ynx(0),i.TgZ(1,"div"),i.YNc(2,D,2,2,"span",1),i.qZA(),i.YNc(3,$,5,6,"div",2),i.BQk()),2&t){const e=n.ngIf;let r;i.xp6(2),i.Q6J("ngIf",null!==(r=null==e?null:e.value)&&void 0!==r?r:void 0),i.xp6(1),i.Q6J("ngIf",(null==e?null:e.left)||(null==e?null:e.right))}}let U=(()=>{class t{constructor(){this.node$=new S.t,this.left$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.left)),{time:Date.now()}))),this.right$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.right)),{time:Date.now()}))),this.height=v,this.balance=b}set bNode(e){setTimeout(()=>this.node$.next(Object.assign(Object.assign({},e),{time:Date.now()})),10)}title(e){return`Height: ${e.height} balance: ${b(e)}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["b-node"]],inputs:{bNode:"bNode"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],["class","row",4,"ngIf"],[3,"title"],[1,"row"],[1,"left",3,"bNode"],[1,"right",3,"bNode"]],template:function(e,r){1&e&&(i.YNc(0,J,4,2,"ng-container",0),i.ALo(1,"async")),2&e&&i.Q6J("ngIf",i.lcZ(1,1,r.node$))},directives:[g.O5,t],pipes:[g.Ov],styles:["[_nghost-%COMP%] {\n    display: grid;\n    width: fit-content;\n    grid-template-columns: 1fr;\n    grid-template-rows: 20px 1fr;\n    justify-content: center;\n    align-content: center;\n    gap: 2px;\n    margin: 4px;\n    padding: 2px;\n    border: 1px solid rgba(255, 255, 255, 0.774);\n  }\n\n  div[_ngcontent-%COMP%] {\n    text-align: center;\n  }\n\n  div.row[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: center;\n    align-content: center;\n  }\n\n  div[_ngcontent-%COMP%]:first-child {\n    padding: 9px;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    background-color: rgba(93, 14, 93);\n\n  }\n\n  .left[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 0, 255);\n  }\n\n  .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 128, 0);\n  }"],changeDetection:0}),t})();const z=t=>[...new Set(Array.from({length:t},()=>((t=2e3)=>Math.floor(Math.random()*t))()))];function I(){return(I=(0,_.Z)(function*(){let t;return t||(t=z(100),(0,y.t8)("binTreeSampleData",t)),t})).apply(this,arguments)}const E=[{path:"",component:(()=>{class t{constructor(){this.count=31,this.root$=new a.x,this.nodes=O(),this.dump=()=>{(function j(){console.table([...s.values()].sort((t,n)=>t.value<n.value?-1:1).map(t=>{var n,e;return Object.assign(Object.assign({},t),{leftVal:null===(n=o(t.left))||void 0===n?void 0:n.value,cur:t.value,rightVal:null===(e=o(t.right))||void 0===e?void 0:e.value})}))})(),this.refresh()},this.deb=null}ngOnInit(){this.reset()}reset(){var e=this;return(0,_.Z)(function*(){s.clear();const[r,...f]=yield function Q(){return I.apply(this,arguments)}(),M=h(r);f.forEach(F=>T(h(F),M)),v(M),setTimeout(()=>e.root$.next(M),20),e.nodes=O()})()}refresh(){this.deb&&clearTimeout(this.deb),this.deb=setTimeout(()=>{this.root$.next(Object.assign(Object.assign({},d()),{time:Date.now()}))},0),v(d())}rl(e=d()){x(e),this.refresh()}rr(e=d()){N(e),this.refresh()}rb(e=d()){(function A(){let t=100;for(B();;){const n=[...s.values()].find(e=>Math.abs(b(e))>1);if(console.log(s.size,null==n?void 0:n.value,b(n)),void 0===n||!--t)break;B(n)}})(),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-bintree"]],decls:13,vars:3,consts:[[1,"button-bar"],[3,"click"],[3,"bNode"]],template:function(e,r){1&e&&(i.TgZ(0,"h1"),i._uU(1,"Binary tree"),i.qZA(),i.TgZ(2,"div",0)(3,"button",1),i.NdJ("click",function(){return r.rl()}),i._uU(4,"rl"),i.qZA(),i.TgZ(5,"button",1),i.NdJ("click",function(){return r.rr()}),i._uU(6,"rr"),i.qZA(),i.TgZ(7,"button",1),i.NdJ("click",function(){return r.rb()}),i._uU(8,"rb"),i.qZA(),i.TgZ(9,"button",1),i.NdJ("click",function(){return r.dump()}),i._uU(10,"dump"),i.qZA()(),i._UZ(11,"b-node",2),i.ALo(12,"async")),2&e&&(i.xp6(11),i.Q6J("bNode",i.lcZ(12,1,r.root$)))},directives:[U],pipes:[g.Ov],styles:[".button-bar[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(5,1fr);\n    max-width: 100vw;\n  }\n  .row[_ngcontent-%COMP%] {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(10,1fr);\n  }"],changeDetection:0}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[w.Bz.forChild(E)],w.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[g.ez,L]]}),t})()},4553:(C,m,c)=>{function g(_,y,a,u,l,s,h){try{var o=_[s](h),p=o.value}catch(d){return void a(d)}o.done?y(p):Promise.resolve(p).then(u,l)}function w(_){return function(){var y=this,a=arguments;return new Promise(function(u,l){var s=_.apply(y,a);function h(p){g(s,u,l,h,o,"next",p)}function o(p){g(s,u,l,h,o,"throw",p)}h(void 0)})}}c.d(m,{Z:()=>w})}}]);