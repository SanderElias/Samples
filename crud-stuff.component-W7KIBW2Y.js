import{a as se,c as S}from"./chunk-6H4XIARE.js";import"./chunk-AJROCCCR.js";import{e as re}from"./chunk-MGEOVUXS.js";import"./chunk-Q7HKI3MB.js";import{b as oe}from"./chunk-B64JRXJ4.js";import"./chunk-OZD4UVZE.js";import"./chunk-QF5K4MHH.js";import{$c as U,Bb as X,Bc as ee,Ca as R,Hb as P,Jb as L,Kb as G,Kc as F,Mb as Y,Mc as te,Nb as Z,Ob as f,Pb as s,Qb as a,Rb as M,Rc as ne,Sb as g,Sc as p,Tb as u,Tc as k,Ub as K,Va as A,Xa as r,Yb as I,Zc as ie,ac as m,bc as N,cc as h,dc as _,ea as d,ec as C,ja as E,jc as b,ka as w,kb as c,kc as D,la as V,lc as W,oa as Q,pc as o,qb as $,qc as y,rc as H,sb as j,wa as T,zb as J}from"./chunk-JMJSAENN.js";import{c as q}from"./chunk-DAQOROHW.js";async function ae(){let v=await import("./dist-BOVLBJIO.js");return oe(v.faker)}function _e(i,v){i&1&&(V(),g(0,"svg",0)(1,"style"),o(2," .spinner_EUy1 { animation: spinner_grm3 1.2s infinite; } .spinner_f6oS { animation-delay: 0.1s; } .spinner_g3nX { animation-delay: 0.2s; } .spinner_nvEs { animation-delay: 0.3s; } .spinner_MaNM { animation-delay: 0.4s; } .spinner_4nle { animation-delay: 0.5s; } .spinner_ZETM { animation-delay: 0.6s; } .spinner_HXuO { animation-delay: 0.7s; } .spinner_YaQo { animation-delay: 0.8s; } .spinner_GOx1 { animation-delay: 0.9s; } .spinner_4vv9 { animation-delay: 1s; } .spinner_NTs9 { animation-delay: 1.1s; } .spinner_auJJ { transform-origin: center; animation: spinner_T3O6 6s linear infinite; } @keyframes spinner_grm3 { 0%, 50% { animation-timing-function: cubic-bezier(0.27, 0.42, 0.37, 0.99); r: 1px; } 25% { animation-timing-function: cubic-bezier(0.53, 0, 0.61, 0.73); r: 2px; } } @keyframes spinner_T3O6 { 0% { transform: rotate(360deg); } 100% { transform: rotate(0deg); } } "),u(),g(3,"g",1),K(4,"circle",2)(5,"circle",3)(6,"circle",4)(7,"circle",5)(8,"circle",6)(9,"circle",7)(10,"circle",8)(11,"circle",9)(12,"circle",10)(13,"circle",11)(14,"circle",12)(15,"circle",13),u()())}var le=(()=>{class i{constructor(){this.show=p(!0)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-spinner"]],inputs:{show:[1,"show"]},decls:1,vars:1,consts:[["width","32","height","32","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],[1,"spinner_auJJ"],["cx","12","cy","3","r","1",1,"spinner_EUy1"],["cx","16.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_f6oS"],["cx","7.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_NTs9"],["cx","19.79","cy","7.50","r","1",1,"spinner_EUy1","spinner_g3nX"],["cx","4.21","cy","7.50","r","1",1,"spinner_EUy1","spinner_4vv9"],["cx","21.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_nvEs"],["cx","3.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_GOx1"],["cx","19.79","cy","16.50","r","1",1,"spinner_EUy1","spinner_MaNM"],["cx","4.21","cy","16.50","r","1",1,"spinner_EUy1","spinner_YaQo"],["cx","16.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_4nle"],["cx","7.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_HXuO"],["cx","12","cy","21","r","1",1,"spinner_EUy1","spinner_ZETM"]],template:function(e,n){e&1&&P(0,_e,16,0,":svg:svg",0),e&2&&L(n.show()?0:-1)},styles:["[_nghost-%COMP%]{display:inline-block;width:32px;height:32px;margin-inline-start:.3rem}svg[_ngcontent-%COMP%]{fill:#fff}"]})}}return i})();var ce=(()=>{class i{constructor(){this.relationsService=d(S),this.filter=this.relationsService.filter}async addRelation(){try{let t=await ae();await this.relationsService.create(t)}catch(t){console.error(t)}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["crud-header"]],decls:6,vars:2,consts:[[3,"click"],["for","search"],["id","search","type","search","placeholder","Search...",3,"input","value"],[3,"show"]],template:function(e,n){e&1&&(s(0,"button",0),m("click",function(){return n.addRelation()}),o(1,"Add relation"),a(),s(2,"label",1),o(3," Search: "),s(4,"input",2),m("input",function(x){return n.filter.set(x.target.value)}),a(),M(5,"se-spinner",3),a()),e&2&&(r(4),f("value",n.filter()),r(),f("show",n.relationsService.listIsLoading()))},dependencies:[le],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-block-end:.75rem}label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.2rem}"]})}}return i})();var Ce=["highLight",""],ye=["*"],B=(()=>{class i{constructor(){this.highLight=p()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["tbody","highLight",""]],inputs:{highLight:[1,"highLight"]},attrs:Ce,ngContentSelectors:ye,decls:1,vars:0,template:function(e,n){e&1&&(_(),C(0))},encapsulation:2,changeDetection:0})}}return i})();var ve=["dlg"],xe=["*"],de=(()=>{class i{constructor(){this.lightDismiss=p(!0),this.nds=d(se),this.dlg=k.required("dlg"),this._=U(()=>{let t=this.dlg().nativeElement;this.nds.shown()?t.showModal():t.close()})}onClick(t){if(!this.lightDismiss())return;t.target.tagName.toLowerCase()==="dialog"&&this.nds.close()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-notify-dialog"]],viewQuery:function(e,n){e&1&&b(n.dlg,ve,5),e&2&&D()},hostBindings:function(e,n){e&1&&m("click",function(x){return n.onClick(x)})},inputs:{lightDismiss:[1,"lightDismiss"]},ngContentSelectors:xe,decls:12,vars:3,consts:[["dlg",""],[3,"click"]],template:function(e,n){if(e&1){let l=I();_(),g(0,"dialog",null,0)(2,"div")(3,"header")(4,"h3"),o(5),u()(),g(6,"section"),o(7),u(),C(8),g(9,"footer")(10,"button",1),N("click",function(){return E(l),w(n.nds.close())}),o(11),u()()()()}e&2&&(r(5),y(n.nds.title()),r(2),H(" ",n.nds.message()," "),r(4),y(n.nds.dismissButtonText()))},styles:["[_nghost-%COMP%]{display:block}dialog[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-inline:2rem;padding-block:1rem}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{margin-block:.75rem}dialog[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;inline-size:100%;align-content:center;justify-content:center}"]})}}return i})();var Se=["sortOn",""],Ee=["*"];function we(i,v){if(i&1&&o(0),i&2){let t=h();H(" ",t.order()==="asc"?"\u2193":"\u2191"," ")}}var me=(()=>{class i{constructor(){this.relationsService=d(S),this.sort=this.relationsService.sort,this.order=this.relationsService.order,this.sortOn=p.required(),this.doSort=()=>{let t=this.sortOn();this.relationsService.sort()===t?this.relationsService.order.update(n=>n==="asc"?"desc":"asc"):(this.relationsService.sort.set(t),this.relationsService.order.set("asc"))}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["th","sortOn",""]],hostBindings:function(e,n){e&1&&m("click",function(){return n.doSort()})},inputs:{sortOn:[1,"sortOn"]},attrs:Se,ngContentSelectors:Ee,decls:2,vars:1,template:function(e,n){e&1&&(_(),C(0),P(1,we,1,1)),e&2&&(r(),L(n.sort()===n.sortOn()?1:-1))},styles:["[_nghost-%COMP%]{display:table-cell}"]})}}return i})();var Me=["dialog"],be=["*"];function De(i,v){if(i&1){let t=I();C(0),g(1,"footer")(2,"button",1),N("click",function(){E(t);let n=h();return w(n.close(!1))}),o(3),u(),g(4,"button",1),N("click",function(){E(t);let n=h();return w(n.close(!0))}),o(5),u()()}if(i&2){let t=h();r(3),y(t.cancelText()),r(2),y(t.confirmText())}}var pe=(()=>{class i{constructor(){this.confirmText=p("yes"),this.cancelText=p("no"),this.lightDismiss=p(!1,{transform:ie}),this.dlg=k.required("dialog"),this.elm=d(R),this.parent=this.elm.nativeElement.parentElement,this.parentBox=T({top:0,left:0,width:0,height:0,zIndex:1},{equal:re}),this.hidden=T(!0),this._=U(()=>{let t=this.elm.nativeElement,e=this.parentBox();t.style.top=`${e.top}px`,t.style.left=`${e.left}px`,t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.zIndex=`${e.zIndex}`}),this._1=j({earlyRead:()=>{let t=this.parent.getBoundingClientRect(),e=this.parent.computedStyleMap().get("z-index")?.value;this.parentBox.set({top:t.top,left:t.left,width:t.width,height:t.height,zIndex:e==="auto"?1:Number(e)+1})}}),this.close=t=>{let e=this.dlg().nativeElement;t&&this.parent.dispatchEvent(this.originalEvent),this.hidden.set(!0),e.close()}}captureClick(t){let e=t.target;if(t.preventDefault(),t.stopPropagation(),e!==this.elm.nativeElement)return;let n=this.dlg().nativeElement;this.originalEvent=t,this.lightDismiss()&&n.addEventListener("click",l=>{t.preventDefault(),l.target===n&&(n.close(),this.hidden.set(!0))}),this.hidden.set(!1),n.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["confirm-it"]],viewQuery:function(e,n){e&1&&b(n.dlg,Me,5),e&2&&D()},hostBindings:function(e,n){e&1&&m("click",function(x){return n.captureClick(x)})},inputs:{confirmText:[1,"confirmText"],cancelText:[1,"cancelText"],lightDismiss:[1,"lightDismiss"]},ngContentSelectors:be,decls:3,vars:1,consts:[["dialog",""],["type","button",3,"click"]],template:function(e,n){e&1&&(_(),g(0,"dialog",null,0),P(2,De,6,2),u()),e&2&&(r(2),L(n.hidden()?-1:2))},styles:["[_nghost-%COMP%]{display:block;position:fixed;background-color:#6ae26a00}[_nghost-%COMP%]   :where(dialog[_ngcontent-%COMP%]){padding-block:1rem;padding-inline:2rem}[_nghost-%COMP%]   :where(dialog[_ngcontent-%COMP%])   footer[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-block-start:1rem;gap:1rem;padding:.5rem}[_nghost-%COMP%]   :where(dialog[_ngcontent-%COMP%]::backdrop){background-color:#08080880;backdrop-filter:blur(3px)}"]})}}return i})();var ke=["org"],Oe=["*"],ge=(()=>{class i{constructor(){if(this.tbody=d(B,{optional:!0,skipSelf:!0}),this.elm=d(R).nativeElement,this.fakeElm=d(Q).createElement("span"),this.originalContent=k.required("org",{read:R}),this.highLight=()=>{let t=this.originalContent().nativeElement,e=this.fakeElm;this.highlightIsDone(t,e)||(t.hidden=!1,e.innerHTML="")},this.highlightIsDone=(t,e)=>{let n=t.innerHTML;if(!n||n.trim()===""||n.trim()==="--")return!1;let l=this.tbody?.highLight();if(!l)return!1;let x=new RegExp(l,"gi");if(!x.test(n))return!1;let z=n.replace(x,he=>`<mark>${he}</mark>`);return z!==e.innerHTML&&(e.innerHTML=z,t.hidden=!0),!0},!this.tbody)throw new Error('[HighLightTDComponent] could not find the required parent `<tbody [highLight]="someSignal<string>"`');this.elm.appendChild(this.fakeElm),j({read:this.highLight})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["td",3,"ignoreHl",""]],viewQuery:function(e,n){e&1&&b(n.originalContent,ke,5,R),e&2&&D()},ngContentSelectors:Oe,decls:3,vars:0,consts:[["org",""]],template:function(e,n){e&1&&(_(),g(0,"span",null,0),C(2),u())},encapsulation:2,changeDetection:0})}}return i})();var ue=i=>{let e=i,{id:v}=e,t=q(e,["id"]);return Object.keys(t).length===0};var Te=["userId",""],fe=(()=>{class i{constructor(){this.relationService=d(S),this.userId=p.required(),this.edit=ne(),this.strangeId=T(void 0,{equal:()=>!1}),this.relRef=this.relationService.read(this.userId),this.unStable=F(()=>{let t=this.relRef().isLoading(),e=this.relationService.listIsLoading();return t||e||ue(this.relRef().value())}),this.rel=F(()=>this.relRef().value())}deleteRelation(t){this.relationService.delete(t).catch(e=>{console.error(e)})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["tr","userId",""]],inputs:{userId:[1,"userId"]},outputs:{edit:"edit"},attrs:Te,decls:17,vars:7,consts:[["ignoreHl",""],[3,"click","disabled"],["lightDismiss",""],["loading","eager","alt","User Avatar","width","42","height","42",3,"src"]],template:function(e,n){e&1&&(s(0,"td",0)(1,"button",1),m("click",function(){return n.deleteRelation(n.rel())}),o(2," \u{1F5D1}\uFE0F "),s(3,"confirm-it",2)(4,"h3"),o(5,"Sure?"),a(),o(6),a()(),s(7,"button",1),m("click",function(){return n.edit.emit(n.rel().id)}),o(8,"\u270F\uFE0F"),a()(),s(9,"td",0),M(10,"img",3),a(),s(11,"td"),o(12),a(),s(13,"td"),o(14),a(),s(15,"td"),o(16),a()),e&2&&(r(),f("disabled",n.unStable()),r(5),H(" Are you sure you want to delete ",n.rel().name," "),r(),f("disabled",n.unStable()),r(3),f("src",n.rel().avatar??"https://avatars.githubusercontent.com/u/96109922",A),r(2),y(n.rel().name??"--"),r(2),y(n.rel().username??"--"),r(2),y(n.rel().email??"--"))},dependencies:[pe,ge],styles:["[_nghost-%COMP%]{display:table-row}[_nghost-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background-color:var(--surface-2)}td[_ngcontent-%COMP%]{--_width: calc((100vw - 12rem) / 3);inline-size:var(--_width);max-inline-size:var(--_width);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}td[_ngcontent-%COMP%]:has(img){justify-content:center;align-items:center;inline-size:3.5rem;max-inline-size:3.5rem}td[_ngcontent-%COMP%]:has(img)   img[_ngcontent-%COMP%]{aspect-ratio:1;inline-size:42px;border-radius:50%;object-fit:cover;object-position:center}td[_ngcontent-%COMP%]:has(button){display:flex;inline-size:7rem;max-inline-size:7rem;justify-content:center;align-items:center;gap:8px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]{border-radius:50%;aspect-ratio:1;padding-inline:9px;padding-block:4px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]:disabled{opacity:.5;margin-inline:var(--size-0)}"]})}}return i})();var Ie=["dlg"],Re=()=>[import("./relation-form.component-AHQPW3EO.js").then(i=>i.RelationForm)];function Pe(i,v){if(i&1){let t=I();s(0,"tr",6),m("edit",function(){let n=E(t).$implicit,l=h();return w(l.edit(n))}),a()}if(i&2){let t=v.$implicit;f("userId",t)}}function Le(i,v){if(i&1){let t=I();s(0,"relation-form",7),m("done",function(){E(t),h();let n=W(19);return w(n.close())}),a()}if(i&2){let t=h();f("id",t.editRec())}}function He(i,v){i&1&&(s(0,"p"),o(1,"Loading..."),a())}var It=(()=>{class i{constructor(){this.relationsService=d(S),this.relationIds=te({source:()=>this.relationsService.list(),computation:(t,e)=>{let n=Array.from({length:10},()=>""),l=this.relationsService.listIsLoading();return t.length===0&&l&&t.concat(e?.value||[]),[...t,...n].splice(0,10)}}),this.editRec=T(void 0),this.dlgRef=k.required("dlg"),this.filter=this.relationsService.filter.asReadonly()}async edit(t){let e=this.dlgRef().nativeElement;this.editRec.set(t),e.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=c({type:i,selectors:[["se-crud-stuff"]],viewQuery:function(e,n){e&1&&b(n.dlgRef,Ie,5),e&2&&D()},features:[ee([S])],decls:25,vars:1,consts:[["dlg",""],["sortOn","name"],["sortOn","username"],["sortOn","email"],[3,"highLight"],[3,"userId"],[3,"edit","userId"],[3,"done","id"]],template:function(e,n){e&1&&(s(0,"h1"),o(1,"CRUD - Signals Best practices"),a(),M(2,"crud-header"),s(3,"table")(4,"thead")(5,"tr")(6,"th"),o(7,"Actions"),a(),M(8,"th"),s(9,"th",1),o(10,"Name"),a(),s(11,"th",2),o(12,"Username"),a(),s(13,"th",3),o(14,"Email"),a()()(),s(15,"tbody",4),Y(16,Pe,1,1,"tr",5,G),a()(),s(18,"dialog",null,0),$(20,Le,1,1)(21,He,2,0),J(22,20,Re,null,21),X(0,-1),a(),M(24,"se-notify-dialog")),e&2&&(r(15),f("highLight",n.filter()),r(),Z(n.relationIds()))},dependencies:[fe,B,de,ce,me],styles:["[_nghost-%COMP%]{display:block;padding:16px}"]})}}return i})();export{It as CrudStuffComponent};
