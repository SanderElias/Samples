import{a as ne,d as x}from"./chunk-5PZOTPLK.js";import{e as te}from"./chunk-WD5D2YLI.js";import"./chunk-AK2Z2F4Z.js";import{b as ee}from"./chunk-ZW47RLDE.js";import"./chunk-OZD4UVZE.js";import"./chunk-BJIBN36K.js";import{$b as G,Ab as T,Ac as Z,Cb as I,Db as $,Fb as J,Fc as K,Gb as X,Gc as p,Hb as f,Hc as b,Ib as o,Jb as r,Kb as h,Nc as W,Ob as k,Oc as B,Ra as V,Rb as c,Sb as u,Ta as a,Tb as g,Ub as _,Zb as E,_b as M,da as m,dc as s,ec as C,fb as l,fc as R,ia as S,ja as w,ka as z,kb as Q,na as N,ob as L,pc as Y,ra as H,vb as q,xb as A,ya as O,yc as P}from"./chunk-5QDTCKGK.js";import{c as F}from"./chunk-DAQOROHW.js";async function ie(){let y=await import("./dist-XJHSZ5FI.js");return ee(y.faker)}function fe(i,y){i&1&&(z(),o(0,"svg",0)(1,"style"),s(2," .spinner_EUy1 { animation: spinner_grm3 1.2s infinite; } .spinner_f6oS { animation-delay: 0.1s; } .spinner_g3nX { animation-delay: 0.2s; } .spinner_nvEs { animation-delay: 0.3s; } .spinner_MaNM { animation-delay: 0.4s; } .spinner_4nle { animation-delay: 0.5s; } .spinner_ZETM { animation-delay: 0.6s; } .spinner_HXuO { animation-delay: 0.7s; } .spinner_YaQo { animation-delay: 0.8s; } .spinner_GOx1 { animation-delay: 0.9s; } .spinner_4vv9 { animation-delay: 1s; } .spinner_NTs9 { animation-delay: 1.1s; } .spinner_auJJ { transform-origin: center; animation: spinner_T3O6 6s linear infinite; } @keyframes spinner_grm3 { 0%, 50% { animation-timing-function: cubic-bezier(0.27, 0.42, 0.37, 0.99); r: 1px; } 25% { animation-timing-function: cubic-bezier(0.53, 0, 0.61, 0.73); r: 2px; } } @keyframes spinner_T3O6 { 0% { transform: rotate(360deg); } 100% { transform: rotate(0deg); } } "),r(),o(3,"g",1),h(4,"circle",2)(5,"circle",3)(6,"circle",4)(7,"circle",5)(8,"circle",6)(9,"circle",7)(10,"circle",8)(11,"circle",9)(12,"circle",10)(13,"circle",11)(14,"circle",12)(15,"circle",13),r()())}var oe=(()=>{class i{constructor(){this.show=p(!0)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["se-spinner"]],inputs:{show:[1,"show"]},decls:1,vars:1,consts:[["width","32","height","32","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],[1,"spinner_auJJ"],["cx","12","cy","3","r","1",1,"spinner_EUy1"],["cx","16.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_f6oS"],["cx","7.50","cy","4.21","r","1",1,"spinner_EUy1","spinner_NTs9"],["cx","19.79","cy","7.50","r","1",1,"spinner_EUy1","spinner_g3nX"],["cx","4.21","cy","7.50","r","1",1,"spinner_EUy1","spinner_4vv9"],["cx","21.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_nvEs"],["cx","3.00","cy","12.00","r","1",1,"spinner_EUy1","spinner_GOx1"],["cx","19.79","cy","16.50","r","1",1,"spinner_EUy1","spinner_MaNM"],["cx","4.21","cy","16.50","r","1",1,"spinner_EUy1","spinner_YaQo"],["cx","16.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_4nle"],["cx","7.50","cy","19.79","r","1",1,"spinner_EUy1","spinner_HXuO"],["cx","12","cy","21","r","1",1,"spinner_EUy1","spinner_ZETM"]],template:function(e,n){e&1&&T(0,fe,16,0,":svg:svg",0),e&2&&I(n.show()?0:-1)},styles:["[_nghost-%COMP%]{display:inline-block;width:32px;height:32px;margin-inline-start:.3rem}svg[_ngcontent-%COMP%]{fill:#fff}"]})}}return i})();var re=(()=>{class i{constructor(){this.relationsService=m(x),this.filter=this.relationsService.filter}async addRelation(){try{let t=await ie();await this.relationsService.create(t)}catch(t){console.error(t)}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["crud-header"]],decls:6,vars:2,consts:[[3,"click"],["for","search"],["id","search","type","search","placeholder","Search...",3,"input","value"],[3,"show"]],template:function(e,n){e&1&&(o(0,"button",0),c("click",function(){return n.addRelation()}),s(1,"Add relation"),r(),o(2,"label",1),s(3," Search: "),o(4,"input",2),c("input",function(v){return n.filter.set(v.target.value)}),r(),h(5,"se-spinner",3),r()),e&2&&(a(4),f("value",n.filter()),a(),f("show",n.relationsService.listIsLoading()))},dependencies:[oe],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-block-end:.75rem}label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.2rem}"]})}}return i})();var he=["highLight",""],ue=["*"],j=(()=>{class i{constructor(){this.highLight=p()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["tbody","highLight",""]],inputs:{highLight:[1,"highLight"]},attrs:he,ngContentSelectors:ue,decls:1,vars:0,template:function(e,n){e&1&&(g(),_(0))},encapsulation:2,changeDetection:0})}}return i})();var ge=["dlg"],_e=["*"],se=(()=>{class i{constructor(){this.lightDismiss=p(!0),this.nds=m(ne),this.dlg=b.required("dlg"),this._=B(()=>{let t=this.dlg().nativeElement;this.nds.shown()?t.showModal():t.close()})}onClick(t){if(!this.lightDismiss())return;t.target.tagName.toLowerCase()==="dialog"&&this.nds.close()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["se-notify-dialog"]],viewQuery:function(e,n){e&1&&E(n.dlg,ge,5),e&2&&M()},hostBindings:function(e,n){e&1&&c("click",function(v){return n.onClick(v)})},inputs:{lightDismiss:[1,"lightDismiss"]},ngContentSelectors:_e,decls:12,vars:3,consts:[["dlg",""],[3,"click"]],template:function(e,n){if(e&1){let d=k();g(),o(0,"dialog",null,0)(2,"div")(3,"header")(4,"h3"),s(5),r()(),o(6,"section"),s(7),r(),_(8),o(9,"footer")(10,"button",1),c("click",function(){return S(d),w(n.nds.close())}),s(11),r()()()()}e&2&&(a(5),C(n.nds.title()),a(2),R(" ",n.nds.message()," "),a(4),C(n.nds.dismissButtonText()))},styles:["[_nghost-%COMP%]{display:block}dialog[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-inline:2rem;padding-block:1rem}dialog[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{margin-block:.75rem}dialog[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;inline-size:100%;align-content:center;justify-content:center}"]})}}return i})();var Ce=["sortOn",""],ye=["*"];function ve(i,y){if(i&1&&s(0),i&2){let t=u();R(" ",t.order()==="asc"?"\u2193":"\u2191"," ")}}var ae=(()=>{class i{constructor(){this.relationsService=m(x),this.sort=this.relationsService.sort,this.order=this.relationsService.order,this.sortOn=p.required(),this.doSort=()=>{let t=this.sortOn();this.relationsService.sort()===t?this.relationsService.order.update(n=>n==="asc"?"desc":"asc"):(this.relationsService.sort.set(t),this.relationsService.order.set("asc"))}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["th","sortOn",""]],hostBindings:function(e,n){e&1&&c("click",function(){return n.doSort()})},inputs:{sortOn:[1,"sortOn"]},attrs:Ce,ngContentSelectors:ye,decls:2,vars:1,template:function(e,n){e&1&&(g(),_(0),T(1,ve,1,1)),e&2&&(a(),I(n.sort()===n.sortOn()?1:-1))},styles:["[_nghost-%COMP%]{display:table-cell}"]})}}return i})();var xe=["dialog"],Se=["*"];function we(i,y){if(i&1){let t=k();_(0),o(1,"footer")(2,"button",1),c("click",function(){S(t);let n=u();return w(n.close(!1))}),s(3),r(),o(4,"button",1),c("click",function(){S(t);let n=u();return w(n.close(!0))}),s(5),r()()}if(i&2){let t=u();a(3),C(t.cancelText()),a(2),C(t.confirmText())}}var le=(()=>{class i{constructor(){this.confirmText=p("yes"),this.cancelText=p("no"),this.lightDismiss=p(!1,{transform:W}),this.dlg=b.required("dialog"),this.elm=m(O),this.parent=this.elm.nativeElement.parentElement,this.parentBox=H({top:0,left:0,width:0,height:0,zIndex:1},{equal:te}),this.styleOverlay=P(()=>`top: ${this.parentBox().top}px;
       left: ${this.parentBox().left}px;
       width: ${this.parentBox().width}px;
       height: ${this.parentBox().height}px;
       z-index: ${this.parentBox().zIndex};`),this.hidden=H(!0),this._1=B(()=>{let t=this.elm.nativeElement,e=this.styleOverlay();t.style=e}),this._=L({read:()=>{let t=this.parent.getBoundingClientRect(),e=this.parent.computedStyleMap().get("z-index")?.value;this.parentBox.set({top:t.top,left:t.left,width:t.width,height:t.height,zIndex:e==="auto"?1:Number(e)+1})}}),this.close=t=>{let e=this.dlg().nativeElement;t&&this.parent.dispatchEvent(this.originalEvent),this.hidden.set(!0),e.close()}}captureClick(t){let e=t.target;if(t.preventDefault(),t.stopPropagation(),e!==this.elm.nativeElement)return;let n=this.dlg().nativeElement;this.originalEvent=t,this.lightDismiss()&&n.addEventListener("click",d=>{t.preventDefault(),d.target===n&&(n.close(),this.hidden.set(!0))}),this.hidden.set(!1),n.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["confirm-it"]],viewQuery:function(e,n){e&1&&E(n.dlg,xe,5),e&2&&M()},hostBindings:function(e,n){e&1&&c("click",function(v){return n.captureClick(v)})},inputs:{confirmText:[1,"confirmText"],cancelText:[1,"cancelText"],lightDismiss:[1,"lightDismiss"]},ngContentSelectors:Se,decls:3,vars:1,consts:[["dialog",""],["type","button",3,"click"]],template:function(e,n){e&1&&(g(),o(0,"dialog",null,0),T(2,we,6,2),r()),e&2&&(a(2),I(n.hidden()?-1:2))},styles:["[_nghost-%COMP%]{display:block;position:fixed;background-color:#6ae26a00}dialog[_ngcontent-%COMP%]{padding-block:1rem;padding-inline:2rem}dialog[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-block-start:1rem;gap:1rem;padding:.5rem}dialog[_ngcontent-%COMP%]::backdrop{background-color:#08080880;backdrop-filter:blur(3px)}"]})}}return i})();var Ee=["org"],Me=["*"],ce=(()=>{class i{constructor(){if(this.tbody=m(j,{optional:!0,skipSelf:!0}),this.elm=m(O).nativeElement,this.fakeElm=m(N).createElement("span"),this.originalContent=b.required("org",{read:O}),this.highLight=()=>{let t=this.originalContent().nativeElement,e=this.fakeElm;this.highlightIsDone(t,e)||(t.hidden=!1,e.innerHTML="")},this.highlightIsDone=(t,e)=>{let n=t.innerHTML;if(!n||n.trim()===""||n.trim()==="--")return!1;let d=this.tbody?.highLight();if(!d)return!1;let v=new RegExp(d,"gi");if(!v.test(n))return!1;let U=n.replace(v,pe=>`<mark>${pe}</mark>`);return U!==e.innerHTML&&(e.innerHTML=U,t.hidden=!0),!0},!this.tbody)throw new Error('[HighLightTDComponent] could not find the required parent `<tbody [highLight]="someSignal<string>"`');this.elm.appendChild(this.fakeElm),L({read:this.highLight})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["td",3,"ignoreHl",""]],viewQuery:function(e,n){e&1&&E(n.originalContent,Ee,5,O),e&2&&M()},ngContentSelectors:Me,decls:3,vars:0,consts:[["org",""]],template:function(e,n){e&1&&(g(),o(0,"span",null,0),_(2),r())},encapsulation:2,changeDetection:0})}}return i})();var de=i=>{let e=i,{id:y}=e,t=F(e,["id"]);return Object.keys(t).length===0};var be=["userId",""],me=(()=>{class i{constructor(){this.relationService=m(x),this.userId=p.required(),this.edit=K(),this.relRef=this.relationService.read(this.userId),this.unStable=P(()=>{let t=this.relRef().isLoading(),e=this.relationService.listIsLoading();return t||e||de(this.relRef().value())}),this.rel=P(()=>this.relRef().value())}deleteRelation(t){this.relationService.delete(t).catch(e=>{console.error(e)})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["tr","userId",""]],inputs:{userId:[1,"userId"]},outputs:{edit:"edit"},attrs:be,decls:17,vars:7,consts:[["ignoreHl",""],[3,"click","disabled"],["lightDismiss",""],["loading","eager","alt","User Avatar","width","42","height","42",3,"src"]],template:function(e,n){e&1&&(o(0,"td",0)(1,"button",1),c("click",function(){return n.deleteRelation(n.rel())}),s(2," \u{1F5D1}\uFE0F "),o(3,"confirm-it",2)(4,"h3"),s(5,"Sure?"),r(),s(6),r()(),o(7,"button",1),c("click",function(){return n.edit.emit(n.rel().id)}),s(8,"\u270F\uFE0F"),r()(),o(9,"td",0),h(10,"img",3),r(),o(11,"td"),s(12),r(),o(13,"td"),s(14),r(),o(15,"td"),s(16),r()),e&2&&(a(),f("disabled",n.unStable()),a(5),R(" Are you sure you want to delete ",n.rel().name," "),a(),f("disabled",n.unStable()),a(3),f("src",n.rel().avatar??"https://avatars.githubusercontent.com/u/96109922",V),a(2),C(n.rel().name??"--"),a(2),C(n.rel().username??"--"),a(2),C(n.rel().email??"--"))},dependencies:[le,ce],styles:["[_nghost-%COMP%]{display:table-row}[_nghost-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background-color:var(--surface-2)}td[_ngcontent-%COMP%]{--_width: calc((100vw - 12rem) / 3);inline-size:var(--_width);max-inline-size:var(--_width);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}td[_ngcontent-%COMP%]:has(img){justify-content:center;align-items:center;inline-size:3.5rem;max-inline-size:3.5rem}td[_ngcontent-%COMP%]:has(img)   img[_ngcontent-%COMP%]{aspect-ratio:1;inline-size:42px;border-radius:50%;object-fit:cover;object-position:center}td[_ngcontent-%COMP%]:has(button){display:flex;inline-size:7rem;max-inline-size:7rem;justify-content:center;align-items:center;gap:8px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]{border-radius:50%;aspect-ratio:1;padding-inline:9px;padding-block:4px}td[_ngcontent-%COMP%]:has(button)   button[_ngcontent-%COMP%]:disabled{opacity:.5;margin-inline:var(--size-0)}"]})}}return i})();var De=["dlg"],ke=()=>[import("./relation-form.component-XX6BKKAP.js").then(i=>i.RelationForm)];function Oe(i,y){if(i&1){let t=k();o(0,"tr",6),c("edit",function(){let n=S(t).$implicit,d=u();return w(d.edit(n))}),r()}if(i&2){let t=y.$implicit;f("userId",t)}}function Te(i,y){if(i&1){let t=k();o(0,"relation-form",7),c("done",function(){S(t),u();let n=G(19);return w(n.close())}),r()}if(i&2){let t=u();f("id",t.editRec())}}function Ie(i,y){i&1&&(o(0,"p"),s(1,"Loading..."),r())}var Dt=(()=>{class i{constructor(){this.relationsService=m(x),this.relationIds=Z({source:()=>this.relationsService.list(),computation:(t,e)=>{let n=Array.from({length:10},()=>""),d=this.relationsService.listIsLoading();return t.length===0&&d&&t.concat(e?.value||[]),[...t,...n].splice(0,10)}}),this.editRec=H(void 0),this.dlgRef=b.required("dlg"),this.filter=this.relationsService.filter.asReadonly()}async edit(t){let e=this.dlgRef().nativeElement;this.editRec.set(t),e.showModal()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=l({type:i,selectors:[["se-crud-stuff"]],viewQuery:function(e,n){e&1&&E(n.dlgRef,De,5),e&2&&M()},features:[Y([x])],decls:25,vars:1,consts:[["dlg",""],["sortOn","name"],["sortOn","username"],["sortOn","email"],[3,"highLight"],[3,"userId"],[3,"edit","userId"],[3,"done","id"]],template:function(e,n){e&1&&(o(0,"h1"),s(1,"CRUD - Signals Best practices"),r(),h(2,"crud-header"),o(3,"table")(4,"thead")(5,"tr")(6,"th"),s(7,"Actions"),r(),h(8,"th"),o(9,"th",1),s(10,"Name"),r(),o(11,"th",2),s(12,"Username"),r(),o(13,"th",3),s(14,"Email"),r()()(),o(15,"tbody",4),J(16,Oe,1,1,"tr",5,$),r()(),o(18,"dialog",null,0),Q(20,Te,1,1)(21,Ie,2,0),q(22,20,ke,null,21),A(0,-1),r(),h(24,"se-notify-dialog")),e&2&&(a(15),f("highLight",n.filter()),a(),X(n.relationIds()))},dependencies:[me,j,se,re,ae],styles:["[_nghost-%COMP%]{display:block;padding:16px}"]})}}return i})();export{Dt as CrudStuffComponent};
