"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[393],{5557:(I,b,a)=>{a.d(b,{t:()=>B});var g=a(8023),_=a(2069);class B extends g.x{constructor(d=1/0,f=1/0,u=_.l){super(),this._bufferSize=d,this._windowTime=f,this._timestampProvider=u,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=f===1/0,this._bufferSize=Math.max(1,d),this._windowTime=Math.max(1,f)}next(d){const{isStopped:f,_buffer:u,_infiniteTimeWindow:l,_timestampProvider:h,_windowTime:o}=this;f||(u.push(d),!l&&u.push(h.now()+o)),this._trimBuffer(),super.next(d)}_subscribe(d){this._throwIfClosed(),this._trimBuffer();const f=this._innerSubscribe(d),{_infiniteTimeWindow:u,_buffer:l}=this,h=l.slice();for(let o=0;o<h.length&&!d.closed;o+=u?1:2)d.next(h[o]);return this._checkFinalizedStatuses(d),f}_trimBuffer(){const{_bufferSize:d,_timestampProvider:f,_buffer:u,_infiniteTimeWindow:l}=this,h=(l?1:2)*d;if(d<1/0&&h<u.length&&u.splice(0,u.length-h),!l){const o=f.now();let y=0;for(let c=1;c<u.length&&u[c]<=o;c+=2)y=c;y&&u.splice(0,y+1)}}}},2069:(I,b,a)=>{a.d(b,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},393:(I,b,a)=>{a.r(b),a.d(b,{BintreeModule:()=>W});var g=a(1048),_=a(3290),B=a(4553),M=a(6495),d=a(8023);const f=()=>String.fromCharCode(Math.floor(26*Math.random())+97),l=new Map,h=(t,n,e,r)=>{const s={id:Date.now().toString(36)+"-"+f()+f()+f(),parentId:n,value:t,left:e,right:r};return l.set(s.id,s),s},o=t=>l.get(t),c=()=>[...l.values()].find(t=>void 0===t.parentId);function w(t,n=c()){return void 0===n?t:t.value<n.value?void 0===n.left?(n.left=t.id,t.parentId=n.id,t):w(t,o(n.left)):t.value>n.value?void 0===n.right?(n.right=t.id,t.parentId=n.id,t):w(t,o(n.right)):void(t.value===n.value&&(console.warn("thrown away duplicate value"),l.delete(t.id)))}function C(t=c()){const n=o(t.parentId),e=o(t.right);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.left);return e.left=t.id,t.parentId=e.id,void 0!==r?(t.right=r.id,r.parentId=t.id):t.right=void 0,e}const O=()=>[...l.values()].sort((t,n)=>t.value<n.value?-1:1);function T(t=c()){const n=o(t.parentId),e=o(t.left);if(void 0===e)return t;e.parentId=null==n?void 0:n.id,void 0!==n&&(n.left===t.id?n.left=e.id:n.right=e.id);const r=o(e.right);return e.right=t.id,t.parentId=e.id,void 0!==r?(t.left=r.id,r.parentId=t.id):t.left=void 0,e}function p(t){if(void 0===t)return 0;const n=Math.max(p(o(t.left)),p(o(t.right)));return t.height=n+1,t.height}function m(t){if(void 0===t)return 0;const n=e=>{var r;return(null===(r=o(e))||void 0===r?void 0:r.height)||0};return t.balance=n(t.left)-n(t.right),t.balance}function v(t=c()){if(void 0===t)return;const n=m(t);if(n<-1){const r=o(t.right);r&&m(r)>0&&T(r);const s=C(t);return p(c()),v(s)}if(n>1){const r=o(t.left);r&&r.balance<0&&C(r);const s=T(t);return p(c()),v(s)}const e=r=>{m(r),Math.abs(null==r?void 0:r.balance)>1&&v(r)};e(o(t.left)),e(o(t.right))}var i=a(9724),S=a(5557),Z=a(7969);function D(t,n){if(1&t&&(i.TgZ(0,"span",3),i._uU(1),i.qZA()),2&t){const e=i.oxw().ngIf,r=i.oxw();let s;i.Q6J("title",r.title(e)),i.xp6(1),i.hij(" ",null!==(s=null==e?null:e.value)&&void 0!==s?s:"-"," ")}}function $(t,n){if(1&t&&(i.TgZ(0,"div",4),i._UZ(1,"b-node",5),i.ALo(2,"async"),i._UZ(3,"b-node",6),i.ALo(4,"async"),i.qZA()),2&t){const e=i.oxw(2);i.xp6(1),i.Q6J("bNode",i.lcZ(2,2,e.left$)),i.xp6(2),i.Q6J("bNode",i.lcZ(4,4,e.right$))}}function J(t,n){if(1&t&&(i.ynx(0),i.TgZ(1,"div"),i.YNc(2,D,2,2,"span",1),i.qZA(),i.YNc(3,$,5,6,"div",2),i.BQk()),2&t){const e=n.ngIf;let r;i.xp6(2),i.Q6J("ngIf",null!==(r=null==e?null:e.value)&&void 0!==r?r:void 0),i.xp6(1),i.Q6J("ngIf",(null==e?null:e.left)||(null==e?null:e.right))}}let U=(()=>{class t{constructor(){this.node$=new S.t,this.left$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.left)),{time:Date.now()}))),this.right$=this.node$.pipe((0,Z.U)(e=>Object.assign(Object.assign({},o(e.right)),{time:Date.now()}))),this.height=p,this.balance=m}set bNode(e){setTimeout(()=>this.node$.next(Object.assign(Object.assign({},e),{time:Date.now()})),10)}title(e){return`Height: ${e.height} balance: ${m(e)}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["b-node"]],inputs:{bNode:"bNode"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],["class","row",4,"ngIf"],[3,"title"],[1,"row"],[1,"left",3,"bNode"],[1,"right",3,"bNode"]],template:function(e,r){1&e&&(i.YNc(0,J,4,2,"ng-container",0),i.ALo(1,"async")),2&e&&i.Q6J("ngIf",i.lcZ(1,1,r.node$))},directives:[g.O5,t],pipes:[g.Ov],styles:["[_nghost-%COMP%] {\n    display: grid;\n    width: fit-content;\n    grid-template-columns: 1fr;\n    grid-template-rows: 20px 1fr;\n    justify-content: center;\n    align-content: center;\n    gap: 2px;\n    margin: 4px;\n    padding: 2px;\n    border: 1px solid rgba(255, 255, 255, 0.774);\n  }\n\n  div[_ngcontent-%COMP%] {\n    text-align: center;\n  }\n\n  div.row[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: center;\n    align-content: center;\n  }\n\n  div[_ngcontent-%COMP%]:first-child {\n    padding: 9px;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    background-color: rgba(93, 14, 93);\n\n  }\n\n  .left[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 0, 255);\n  }\n\n  .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child {\n    background-color: rgba(0, 128, 0);\n  }"],changeDetection:0}),t})();const z=t=>[...new Set(Array.from({length:t},()=>((t=2e3)=>Math.floor(Math.random()*t))()))];function N(){return(N=(0,B.Z)(function*(){let t;return t||(t=z(100),(0,M.t8)("binTreeSampleData",t)),t})).apply(this,arguments)}const E=[{path:"",component:(()=>{class t{constructor(){this.count=31,this.root$=new d.x,this.nodes=O(),this.dump=()=>{(function P(){console.table([...l.values()].sort((t,n)=>t.value<n.value?-1:1).map(t=>{var n,e;return Object.assign(Object.assign({},t),{leftVal:null===(n=o(t.left))||void 0===n?void 0:n.value,cur:t.value,rightVal:null===(e=o(t.right))||void 0===e?void 0:e.value})}))})(),this.refresh()},this.deb=null}ngOnInit(){this.reset()}reset(){var e=this;return(0,B.Z)(function*(){l.clear();const[r,...s]=yield function Q(){return N.apply(this,arguments)}(),x=h(r);s.forEach(F=>w(h(F),x)),p(x),setTimeout(()=>e.root$.next(x),20),e.nodes=O()})()}refresh(){this.deb&&clearTimeout(this.deb),this.deb=setTimeout(()=>{this.root$.next(Object.assign(Object.assign({},c()),{time:Date.now()}))},0),p(c())}rl(e=c()){C(e),this.refresh()}rr(e=c()){T(e),this.refresh()}rb(e=c()){(function A(){let t=100;for(v();;){const n=[...l.values()].find(e=>Math.abs(m(e))>1);if(console.log(l.size,null==n?void 0:n.value,m(n)),void 0===n||!--t)break;v(n)}})(),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-bintree"]],decls:13,vars:3,consts:[[1,"button-bar"],[3,"click"],[3,"bNode"]],template:function(e,r){1&e&&(i.TgZ(0,"h1"),i._uU(1,"Binary tree"),i.qZA(),i.TgZ(2,"div",0)(3,"button",1),i.NdJ("click",function(){return r.rl()}),i._uU(4,"rl"),i.qZA(),i.TgZ(5,"button",1),i.NdJ("click",function(){return r.rr()}),i._uU(6,"rr"),i.qZA(),i.TgZ(7,"button",1),i.NdJ("click",function(){return r.rb()}),i._uU(8,"rb"),i.qZA(),i.TgZ(9,"button",1),i.NdJ("click",function(){return r.dump()}),i._uU(10,"dump"),i.qZA()(),i._UZ(11,"b-node",2),i.ALo(12,"async")),2&e&&(i.xp6(11),i.Q6J("bNode",i.lcZ(12,1,r.root$)))},directives:[U],pipes:[g.Ov],styles:[".button-bar[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(5,1fr);\n    max-width: 100vw;\n  }\n  .row[_ngcontent-%COMP%] {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(10,1fr);\n  }"],changeDetection:0}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[_.Bz.forChild(E)],_.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[g.ez,L]]}),t})()}}]);