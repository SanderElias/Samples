import{g as tt,h as et,l as j}from"./chunk-P3TXNOF4.js";import{m as X,n as Y,q as Z}from"./chunk-I27LS666.js";import{$a as Q,C as H,Gb as B,Hb as q,Kb as z,Nb as G,Ob as K,Qb as U,Ra as N,S as x,Va as w,W as T,Xa as O,Y as d,bb as V,ca as h,cb as m,db as p,eb as F,f as k,fb as J,gb as P,i as D,ib as A,ja as g,ka as v,mb as $,nb as I,p as f,q as L,qa as S,ra as _,sb as l,tb as W,x as R}from"./chunk-CXFJOMNY.js";import{a as b,b as M}from"./chunk-G5KKTNWD.js";var c=class{constructor(){}ngOnInit(){}},y=c;(()=>{c.\u0275fac=function(t){return new(t||c)}})(),(()=>{c.\u0275cmp=g({type:c,selectors:[["app-local-state"]],decls:1,vars:0,template:function(t,o){t&1&&F(0,"router-outlet")},dependencies:[et],encapsulation:2})})();var nt=["b"];function rt(a,e){if(a&1){let t=A();J(0),m(1,"button",1,2),$("click",function(){S(t);let i=I();return _(i.updateCounterWith(-1))}),l(3,"-1"),p(),m(4,"span"),l(5),p(),m(6,"button",1,2),$("click",function(){S(t);let i=I();return _(i.updateCounterWith(1))}),l(8,"+1"),p(),P()}if(a&2){let t=e.ngIf;w(5),W(t.count)}}var s=class{constructor(e){this.route=e,this.localState$=new k({count:0}),this.id$=this.route.params.pipe(x("id"),f(t=>+t)),this.clicks$=this.localState$.pipe(x("buttons"),H(t=>t instanceof z),f(t=>t.toArray().map(o=>o.nativeElement)),d(t=>t.forEach(o=>console.log(o))),T(t=>R(t,"click")),d(t=>console.log({cl:t}))).subscribe(console.log),this.vm$=L({id:this.id$,state:this.localState$}).pipe(f(t=>({id:t.id,count:t.state.count||0})),d(console.log))}ngOnInit(){}updateCounterWith(e){this.localState$.next(M(b({},this.localState$.value),{count:this.localState$.value.count+e}))}},u=s;(()=>{s.\u0275fac=function(t){return new(t||s)(O(tt))}})(),(()=>{s.\u0275cmp=g({type:s,selectors:[["app-ls-home"]],viewQuery:function(t,o){if(t&1&&K(nt,5,N),t&2){let i;G(i=U())&&(o.buttons=i)}},decls:4,vars:3,consts:[[4,"ngIf"],[3,"click"],["b",""]],template:function(t,o){t&1&&(m(0,"h2"),l(1," test some state"),p(),Q(2,rt,9,1,"ng-container",0),B(3,"async")),t&2&&(w(2),V("ngIf",q(3,1,o.vm$)))},dependencies:[X,Y],encapsulation:2})})();D([ct("localState$")],u.prototype,"buttons",void 0);var vt=Symbol("subjectProp");function ct(a){return(e,t)=>{Object.defineProperty(e,t,{set:function(o){let i=this[a];o&&i.next(M(b({},i.value),{[t]:o}))},get:function(){throw new Error(`Don't read the "${t}" directly, instead take it from the "${a}" behaviourSubject`)},configurable:!1,enumerable:!0})}}var at=[{path:"",component:y,children:[{path:":id",component:u},{path:"",redirectTo:"./1",pathMatch:"full"}]}],n=class{},C=n;(()=>{n.\u0275fac=function(t){return new(t||n)}})(),(()=>{n.\u0275mod=v({type:n})})(),(()=>{n.\u0275inj=h({imports:[j.forChild(at),j]})})();var r=class{},ot=r;(()=>{r.\u0275fac=function(t){return new(t||r)}})(),(()=>{r.\u0275mod=v({type:r})})(),(()=>{r.\u0275inj=h({imports:[Z,C]})})();export{ot as LocalStateModule};
