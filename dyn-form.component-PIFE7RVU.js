import{a as R}from"./chunk-N4FKHJ4B.js";import{b as H,d as G,e as z,g as J,j as K,k as U,y as X}from"./chunk-UHOYGB22.js";import{i as Q,m as q}from"./chunk-IBCCEPDQ.js";import{$ as x,$b as A,Ab as j,Bb as m,C,Cb as d,Hb as O,Lb as h,Pb as P,Qb as T,Rb as V,V as w,Vb as p,W as b,Y as v,Yb as I,Za as l,_b as L,ac as N,cc as E,ec as W,fa as c,fc as B,g as y,ha as F,ob as f,p as g,q as r,r as _,ra as M,rb as D,sa as $,wb as u,yb as S,zb as k}from"./chunk-L7DZHDME.js";import"./chunk-KAT7YFEL.js";var Z=(()=>{class t{constructor(){this.http=c(R),this.addresses$=this.http.get("assets/addresses.csv",{responseType:"text"}).pipe(r(e=>e.split("\r").map(n=>n.split(","))),r(([e,...n])=>n.map((i,o)=>i.reduce((s,ee,te)=>(s[Y(e[te])]=Y(ee),s),{id:o}))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Y(t){return t?.replace(/^"(.*)"$/,"$1")}var ie=["myForm"];function oe(t,a){t&1&&(m(0,"p"),p(1,"Do not change"),d())}function re(t,a){if(t&1){let e=O();m(0,"label"),p(1),m(2,"div")(3,"input",4),N("ngModelChange",function(i){let o=M(e).$implicit,s=h();return A(s.person[o.name],i)||(s.person[o.name]=i),$(i)}),d(),f(4,oe,2,0,"p"),d()()}if(t&2){let e=a.$implicit,n=h();l(),I(" ",e.name," ",e.type," "),l(2),D("name",e.name)("type",e.type),L("ngModel",n.person[e.name]),l(),u(e.name==="id"?4:-1)}}function ae(t,a){t&1&&(m(0,"dialog")(1,"form",1,0),k(3,re,5,6,"label",null,S),m(5,"div",2)(6,"button",3),p(7,"Submit"),d()()()()),t&2&&(l(3),j(a.fields))}var se=t=>{let a=(t.constructor.name||"unknown").toLowerCase();return t==null?"hidden":a==="string"?"text":a},ve=(()=>{class t{constructor(){this.adr=c(Z),this.person$=new y({}),this.fieldData$=this.person$.pipe(r(e=>Object.entries(e).map(([n,i])=>({name:n,value:i,type:se(i)}))),r(e=>e.filter(n=>n.type!=="Array"))),this.addresses$=this.adr.addresses$,this.vm$=_({person:this.person$,fields:this.fieldData$,addresses:this.addresses$}).pipe(r(({person:e,fields:n,addresses:i})=>({person:e,fields:n,addresses:i,names:Object.keys(i[0])})))}ngAfterViewInit(){this.formList.changes.pipe(w(void 0),r(()=>this.formList.first),C(e=>e!==void 0),b(e=>e.valueChanges),v(e=>console.log("form value changed",e))).subscribe(),this.adr.addresses$}async openWith(e){if(e){let n=document.querySelector("dialog"),o=(await g(this.addresses$)).find(s=>s.id===e);this.person$.next(o),n.showModal()}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=F({type:t,selectors:[["app-dyn-form"]],viewQuery:function(n,i){if(n&1&&P(ie,5),n&2){let o;T(o=V())&&(i.formList=o)}},standalone:!0,features:[E],decls:4,vars:3,consts:[["myForm","ngForm"],["method","dialog"],[1,"labelRow"],["type","submit"],[3,"ngModelChange","name","type","ngModel"]],template:function(n,i){if(n&1&&(m(0,"h1"),p(1,"Dynamic form sample"),d(),f(2,ae,8,0,"dialog"),W(3,"async")),n&2){let o;l(2),u((o=B(3,1,i.vm$))?2:-1,o)}},dependencies:[q,Q,X,U,H,G,z,K,J],styles:["dialog[_ngcontent-%COMP%]::backdrop{background:#1e142373}.tableHolder[_ngcontent-%COMP%]{height:80vh;overflow:auto;width:100rem;border-collapse:collapse}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#2a2929}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{display:grid;grid-template-columns:7rem 1fr;align-items:center;gap:.4rem}input[_ngcontent-%COMP%]{margin-bottom:5px;width:20rem}"]})}}return t})();export{ve as DynFormComponent};
