import{a as Q}from"./chunk-MUPYOVCP.js";import{b as q,d as R,e as H,g as G,j as z,k as J,y as K}from"./chunk-SUJWUA6F.js";import{g as B}from"./chunk-Q36CS5UM.js";import"./chunk-BJIBN36K.js";import{$b as P,Ab as D,C,Fb as f,Hb as u,Jb as S,Kb as k,Lb as j,Mb as m,Nb as l,Sb as O,U as w,V as b,Wb as h,X as v,Za as d,_ as x,ac as T,bc as V,da as c,fc as p,g as y,ic as I,ja as F,ka as M,kc as L,lb as $,lc as A,mc as N,p as g,pc as E,q as r,qc as W,r as _}from"./chunk-WBYBMP4K.js";import"./chunk-DAQOROHW.js";var X=(()=>{class t{constructor(){this.http=c(Q),this.addresses$=this.http.get("assets/addresses.csv",{responseType:"text"}).pipe(r(e=>e.split("\r").map(n=>n.split(","))),r(([e,...n])=>n.map((i,o)=>i.reduce((s,Y,Z)=>(s[U(e[Z])]=U(Y),s),{id:o}))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function U(t){return t?.replace(/^"(.*)"$/,"$1")}var te=["myForm"];function ne(t,a){t&1&&(m(0,"p"),p(1,"Do not change"),l())}function ie(t,a){if(t&1){let e=O();m(0,"label"),p(1),m(2,"div")(3,"input",4),N("ngModelChange",function(i){let o=F(e).$implicit,s=h();return A(s.person[o.name],i)||(s.person[o.name]=i),M(i)}),l(),f(4,ne,2,0,"p"),l()()}if(t&2){let e=a.$implicit,n=h();d(),I(" ",e.name," ",e.type," "),d(2),D("name",e.name)("type",e.type),L("ngModel",n.person[e.name]),d(),u(e.name==="id"?4:-1)}}function oe(t,a){t&1&&(m(0,"dialog")(1,"form",1,0),k(3,ie,5,6,"label",null,S),m(5,"div",2)(6,"button",3),p(7,"Submit"),l()()()()),t&2&&(d(3),j(a.fields))}var re=t=>{let a=(t.constructor.name||"unknown").toLowerCase();return t==null?"hidden":a==="string"?"text":a},Ce=(()=>{class t{constructor(){this.adr=c(X),this.person$=new y({}),this.fieldData$=this.person$.pipe(r(e=>Object.entries(e).map(([n,i])=>({name:n,value:i,type:re(i)}))),r(e=>e.filter(n=>n.type!=="Array"))),this.addresses$=this.adr.addresses$,this.vm$=_({person:this.person$,fields:this.fieldData$,addresses:this.addresses$}).pipe(r(({person:e,fields:n,addresses:i})=>({person:e,fields:n,addresses:i,names:Object.keys(i[0])})))}ngAfterViewInit(){this.formList.changes.pipe(w(void 0),r(()=>this.formList.first),C(e=>e!==void 0),b(e=>e.valueChanges),v(e=>console.log("form value changed",e))).subscribe(),this.adr.addresses$}async openWith(e){if(e){let n=document.querySelector("dialog"),o=(await g(this.addresses$)).find(s=>s.id===e);this.person$.next(o),n.showModal()}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=$({type:t,selectors:[["app-dyn-form"]],viewQuery:function(n,i){if(n&1&&P(te,5),n&2){let o;T(o=V())&&(i.formList=o)}},decls:4,vars:3,consts:[["myForm","ngForm"],["method","dialog"],[1,"labelRow"],["type","submit"],[3,"ngModelChange","name","type","ngModel"]],template:function(n,i){if(n&1&&(m(0,"h1"),p(1,"Dynamic form sample"),l(),f(2,oe,8,0,"dialog"),E(3,"async")),n&2){let o;d(2),u((o=W(3,1,i.vm$))?2:-1,o)}},dependencies:[B,K,J,q,R,H,z,G],styles:["dialog[_ngcontent-%COMP%]::backdrop{background:#1e142373}.tableHolder[_ngcontent-%COMP%]{height:80vh;overflow:auto;width:100rem;border-collapse:collapse}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#2a2929}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{display:grid;grid-template-columns:7rem 1fr;align-items:center;gap:.4rem}input[_ngcontent-%COMP%]{margin-bottom:5px;width:20rem}"]})}}return t})();export{Ce as DynFormComponent};
