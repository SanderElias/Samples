import{d as A}from"./chunk-VJ74ORQV.js";import"./chunk-34YSCUTL.js";import"./chunk-COT5DIUW.js";import{Ga as x,Ib as Z,Sa as C,Ta as O,V as j,Xa as E,Za as m,_a as u,_b as k,fc as z,g as S,gb as I,ha as y,hb as l,hc as L,ib as p,jb as M,o as D,oa as V,qb as b,wb as d,xb as _,z as T}from"./chunk-IWWGYS2Z.js";import"./chunk-G5KKTNWD.js";var g={schedule(e,t){let n=setTimeout(e,t);return()=>clearTimeout(n)},scheduleBeforeRender(e){if(typeof window>"u")return g.schedule(e,0);if(typeof window.requestAnimationFrame>"u")return g.schedule(e,16);let t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}};function q(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function B(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}function N(e){return typeof e=="function"}var v;function U(e,t){if(!v){let n=Element.prototype;v=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return e.nodeType===Node.ELEMENT_NODE?v.call(e,t):!1}function W(e,t){return e===t||e!==e&&t!==t}function Y(e){let t={};return e.forEach(({propName:n,templateName:i})=>{t[q(i)]=n}),t}function $(e,t){return t.get(C).resolveComponentFactory(e).inputs}function G(e,t){let n=e.childNodes,i=t.map(()=>[]),s=-1;t.some((r,a)=>r==="*"?(s=a,!0):!1);for(let r=0,a=n.length;r<a;++r){let c=n[r],o=J(c,t,s);o!==-1&&i[o].push(c)}return i}function J(e,t,n){let i=n;return B(e)&&t.some((s,r)=>s!=="*"&&U(e,s)?(i=r,!0):!1),i}var K=10,R=class{constructor(t,n){this.componentFactory=n.get(C).resolveComponentFactory(t)}create(t){return new w(this.componentFactory,t)}},w=class{constructor(t,n){this.componentFactory=t,this.injector=n,this.eventEmitters=new S(1),this.events=this.eventEmitters.pipe(j(i=>T(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(k),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=g.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},K))})}getInputValue(t){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,n){this.runInZone(()=>{if(this.componentRef===null){this.initialInputValues.set(t,n);return}W(n,this.getInputValue(t))&&!(n===void 0&&this.unchangedInputs.has(t))||(this.recordInputChange(t,n),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=n,this.scheduleDetectChanges())})}initializeComponent(t){let n=m.create({providers:[],parent:this.injector}),i=G(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,t),this.viewChangeDetectorRef=this.componentRef.injector.get(L),this.implementsOnChanges=N(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(z).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t))}),this.initialInputValues.clear()}initializeOutputs(t){let n=this.componentFactory.outputs.map(({propName:i,templateName:s})=>t.instance[i].pipe(D(a=>({name:s,value:a}))));this.eventEmitters.next(n)}callNgOnChanges(t){if(!this.implementsOnChanges||this.inputChanges===null)return;let n=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(n)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=g.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,n){if(!this.implementsOnChanges)return;this.inputChanges===null&&(this.inputChanges={});let i=this.inputChanges[t];if(i){i.currentValue=n;return}let s=this.unchangedInputs.has(t),r=s?void 0:this.getInputValue(t);this.inputChanges[t]=new V(r,n,s)}detectChanges(){this.componentRef!==null&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}},F=class extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}};function P(e,t){let n=$(e,t.injector),i=t.strategyFactory||new R(e,t.injector),s=Y(n),a=class extends F{get ngElementStrategy(){if(!this._ngElementStrategy){let o=this._ngElementStrategy=i.create(this.injector||t.injector);n.forEach(({propName:h})=>{if(!this.hasOwnProperty(h))return;let f=this[h];delete this[h],o.setInputValue(h,f)})}return this._ngElementStrategy}constructor(o){super(),this.injector=o}attributeChangedCallback(o,h,f,tt){let H=s[o];this.ngElementStrategy.setInputValue(H,f)}connectedCallback(){let o=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),o=!0),this.ngElementStrategy.connect(this),o||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(o=>{let h=new CustomEvent(o.name,{detail:o.value});this.dispatchEvent(h)})}},r=a;return(()=>{a.observedAttributes=Object.keys(s)})(),n.forEach(({propName:c})=>{Object.defineProperty(r.prototype,c,{get(){return this.ngElementStrategy.getInputValue(c)},set(o){this.ngElementStrategy.setInputValue(c,o)},configurable:!0,enumerable:!0})}),r}var Q=(()=>{let t=class{constructor(i){this.parent=i,this.property=""}get content(){if(this.parent&&this.property&&this.parent[this.property])return this.parent[this.property]}},e=t;return(()=>{t.\u0275fac=function(s){return new(s||t)(u(X))}})(),(()=>{t.\u0275cmp=y({type:t,selectors:[["dyn-data"]],inputs:{property:"property"},decls:1,vars:1,template:function(s,r){s&1&&d(0),s&2&&_(r.content)},styles:["[_nghost-%COMP%]{display:inline-block;border:1px solid green;padding:5px 2px}"]})})(),e})(),X=(()=>{let t=class{constructor(i,s,r){this.elmRef=i,this.sanitizer=r,this.elm=this.elmRef.nativeElement,this.name="Angular",this.html=`
  <h1>Some random HTML</h1>
  <p>Well, <dyn-data property='name'></dyn-data> is awesome</p>
  <p>
  To do it this way is really dangerous, as it will expose to all kind of security issues.
  (see the functioning alert in the sample code!!)
  But the person that asked the question, needed a way to run script tags, and this is the easiest way.
  With this sample comes a severe warning, that this is really dangerous.
  </p>
  <button onclick="alert('hi')">hi</button>
  `;let a=P(Q,{injector:s});customElements.define("dyn-data",a)}ngOnInit(){this.update(this.html)}update(i){let s=this.elm.querySelector("#target");s.innerHTML=i}},e=t;return(()=>{t.\u0275fac=function(s){return new(s||t)(u(O),u(m),u(A))}})(),(()=>{t.\u0275cmp=y({type:t,selectors:[["app-dynamichtml"]],standalone:!0,features:[Z],decls:7,vars:2,consts:[["type","text",3,"value","input"],[3,"value","input"],["id","target"]],template:function(s,r){s&1&&(l(0,"h1"),d(1,"Dynamic HTML sample"),p(),l(2,"input",0),b("input",function(c){return r.name=c.target.value}),p(),l(3,"textarea",1),b("input",function(c){return r.update(c.target.value)}),p(),l(4,"button"),d(5,"Update"),p(),M(6,"div",2)),s&2&&(E(2),I("value",r.name),E(1),I("value",r.html))},styles:["textarea[_ngcontent-%COMP%]{display:block;height:6rem;width:30rem;padding:0}"]})})(),e})();export{X as DynamicHtmlComponent};
