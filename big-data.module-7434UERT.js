import{a as K}from"./chunk-OEYBYFXG.js";import{b as Q}from"./chunk-F3HDX2QW.js";import{l as P}from"./chunk-P3TXNOF4.js";import{l as Y,m as q,n as G,q as H}from"./chunk-I27LS666.js";import{$a as $,Gb as A,Hb as R,J as N,M as S,Va as c,W as F,Xa as O,Y as T,bb as C,ca as x,cb as r,db as s,eb as j,f as V,ib as U,ja as L,ka as v,mb as p,nb as d,p as h,q as E,qa as l,r as B,ra as m,sb as a,tb as M,vb as J,z as I}from"./chunk-CXFJOMNY.js";import{a as D,b as k}from"./chunk-G5KKTNWD.js";function Z(_,o){if(_&1&&(r(0,"tr")(1,"td"),a(2),s(),r(3,"td"),a(4),s(),r(5,"td"),a(6),s()()),_&2){let t=o.$implicit;c(2),M(t.id),c(2),M(t.username),c(2),M(t.email)}}function z(_,o){if(_&1){let t=U();r(0,"section"),a(1),j(2,"br"),r(3,"label"),a(4,"Search "),r(5,"input",1),p("input",function(n){l(t);let i=d();return m(i.setProp("search",n))}),s()(),r(6,"div",2)(7,"button",3),p("click",function(n){l(t);let i=d();return m(i.setProp("sort",n))}),a(8,"none"),s(),r(9,"button",4),p("click",function(n){l(t);let i=d();return m(i.setProp("sort",n))}),a(10,"username"),s(),r(11,"button",5),p("click",function(n){l(t);let i=d();return m(i.setProp("sort",n))}),a(12,"email"),s(),r(13,"button",6),p("click",function(n){l(t);let i=d();return m(i.setProp("sort",n))}),a(14,"id"),s()(),r(15,"div",7)(16,"input",8),p("input",function(n){l(t);let i=d();return m(i.setProp("position",n))}),s(),r(17,"table")(18,"tbody"),$(19,Z,7,3,"tr",9),s()()()()}if(_&2){let t=o.ngIf;c(1),J(" Available users:",t.users.length," (Loading done:",t.done,"%)"),c(15),C("max",t.users.length/t.state.pageSize),c(3),C("ngForOf",t.page)}}var g=class{constructor(o){this.user=o,this.state$=new V({pageSize:20,position:0,search:"",sort:""}),this.users$=this.state$.pipe(h(t=>t.sort),S(),F(t=>this.user.allUsers$.pipe(h(e=>t===""?e:e.sort((n,i)=>n[t]<i[t]?-1:1))))),this.doneLoadingPer$=I(100).pipe(N(1e3),T(()=>this.user.addUsers(500)),h(t=>Math.ceil(t/1e3*100))),this.curPage$=this.state$.pipe(S(),B(t=>this.users$.pipe(h(e=>this.findFirst(e,t))))),this.vm$=E({users:this.users$,state:this.state$,page:this.curPage$,done:this.doneLoadingPer$})}findFirst(o,{position:t,pageSize:e,search:n}){if(!n)return o.slice(t*e,t*e+e);let i=0,b=[];for(;i<o.length&&b.length<e;)o[i].username.toLowerCase().includes(n.toLowerCase())&&b.push(o[i]),i+=1;return b}setProp(o,t){let e=t.target,n=this.state$.value,i=typeof n[o]=="number";this.state$.next(k(D({},n),{[o]:i?e.valueAsNumber:e.value}))}},w=g;(()=>{g.\u0275fac=function(t){return new(t||g)(O(K))}})(),(()=>{g.\u0275cmp=L({type:g,selectors:[["app-big-data"]],decls:4,vars:3,consts:[[4,"ngIf"],[3,"input"],["id","buttons"],["value","",3,"click"],["value","username",3,"click"],["value","email",3,"click"],["value","id",3,"click"],["id","scroll"],["type","range",3,"max","input"],[4,"ngFor","ngForOf"]],template:function(t,e){t&1&&(r(0,"h1"),a(1,"Big data and performance demo"),s(),$(2,z,20,4,"section",0),A(3,"async")),t&2&&(c(2),C("ngIf",R(3,1,e.vm$)))},dependencies:[Y,q,G],styles:[`#scroll[_ngcontent-%COMP%] {
        display: grid;
        grid-template-columns: 40px 1fr;
      }
      #buttons[_ngcontent-%COMP%] {
        display: grid;
        grid-template-columns: repeat(auto-fit, 154px);
      }
      #scroll[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {
        transform: translateY(-100%) rotate(90deg); 
        transform-origin: left bottom;
        width: 20rem; 
        height: 40px; 
      }`]})})();var et=[{path:"",component:w}],u=class{},y=u;(()=>{u.\u0275fac=function(t){return new(t||u)}})(),(()=>{u.\u0275mod=v({type:u})})(),(()=>{u.\u0275inj=x({imports:[P.forChild(et),P]})})();var f=class{},X=f;(()=>{f.\u0275fac=function(t){return new(t||f)}})(),(()=>{f.\u0275mod=v({type:f})})(),(()=>{f.\u0275inj=x({imports:[H,y,Q]})})();export{X as BigDataModule};
