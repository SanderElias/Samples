import{b as w,c as D,d as C}from"./chunk-NAPVWLHX.js";import{e as q}from"./chunk-GW4DIXBX.js";import"./chunk-XD26RAP7.js";import"./chunk-O3LUJ5SK.js";import"./chunk-OZD4UVZE.js";import"./chunk-BJIBN36K.js";import{Cc as v,Dc as x,Ec as _,Mb as i,Nb as n,Ob as a,Sb as b,Vb as g,cc as S,da as f,dc as E,fc as o,ja as c,ka as p,lb as h,xc as y,yc as d}from"./chunk-OGHAFDIF.js";import{a as u}from"./chunk-I4MTPUBM.js";var R=["form"],U=(()=>{class m{constructor(){this.id=x.required(),this.done=v(),this.form=_("form"),this.rs=f(C),this.relation=this.rs.read(this.id),this.flatData=d({source:()=>this.relation()?.value(),computation:l=>w(l??{})}),this.fields=d({source:this.flatData,computation:l=>Object.keys(l)}),this._=y(()=>{let l=this.flatData(),e=this.form()?.nativeElement;if(!(!l||!e))for(let[r,t]of Object.entries(l))e[r]&&(e[r].value=t)})}async submit(l){l.preventDefault();let e=l.target;if(!e)return;let r=u({},this.flatData());for(let t of this.fields())if(e[t]){let s=typeof r[t];s==="string"&&(r[t]=e[t].value),s==="number"&&(r[t]=Number(e[t].value)),s==="boolean"&&(r[t]=e[t].checked)}if(q(this.flatData(),r))this.done.emit();else{let t=D(r);console.log("newData",t),await this.rs.update(t)?this.done.emit():console.error("Error updating the user")}}static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275cmp=h({type:m,selectors:[["relation-form"]],viewQuery:function(e,r){e&1&&S(r.form,R,5),e&2&&E()},inputs:{id:[1,"id"]},outputs:{done:"done"},decls:37,vars:0,consts:[["form",""],[3,"submit"],["for","name"],["id","name","name","name","required",""],["for","username"],["id","username","name","username","required",""],["for","email"],["id","email","name","email","required",""],["for","street"],["id","street","name","address.street","required",""],["for","suite"],["id","suite","name","address.suite"],["for","city"],["id","city","name","address.city","required",""],["for","zipcode"],["id","zipcode","name","address.zipcode","required",""],["for","lat"],["id","lat","name","address.geo.lat","required",""],["for","lng"],["id","lng","name","address.geo.lng","required",""]],template:function(e,r){if(e&1){let t=b();i(0,"form",1,0),g("submit",function(O){return c(t),p(r.submit(O))}),i(2,"label",2),o(3,"Name"),n(),a(4,"input",3),i(5,"label",4),o(6,"Username"),n(),a(7,"input",5),i(8,"label",6),o(9,"Email"),n(),a(10,"input",7),i(11,"fieldset")(12,"legend"),o(13,"Address"),n(),i(14,"label",8),o(15,"Street"),n(),a(16,"input",9),i(17,"label",10),o(18,"Suite"),n(),a(19,"input",11),i(20,"label",12),o(21,"City"),n(),a(22,"input",13),i(23,"label",14),o(24,"Zipcode"),n(),a(25,"input",15),i(26,"fieldset")(27,"legend"),o(28,"Geo"),n(),i(29,"label",16),o(30,"Latitude"),n(),a(31,"input",17),i(32,"label",18),o(33,"Longitude"),n(),a(34,"input",19),n()(),i(35,"button"),o(36,"Submit"),n()()}},styles:["form[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]{display:flex;flex-direction:column}input[_ngcontent-%COMP%]{margin-bottom:1rem}input[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}}return m})();export{U as RelationForm};
