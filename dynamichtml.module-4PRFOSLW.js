import{c as Y,l as j}from"./chunk-XR5XNKCS.js";import{q as W}from"./chunk-MQTFCSRU.js";import{$b as J,A as N,Ja as A,Qa as w,Ra as H,Va as F,W as L,Wa as E,Xa as m,bb as S,ca as y,cb as d,db as f,eb as P,g as k,gc as B,ic as U,ja as M,ka as C,mb as D,oa as _,p as z,sb as v,tb as q}from"./chunk-MQSRH5NO.js";import"./chunk-G5KKTNWD.js";var I={schedule(n,e){let t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return I.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return I.schedule(n,16);let e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};function X(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function ee(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}function te(n){return typeof n=="function"}var T;function ne(n,e){if(!T){let t=Element.prototype;T=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE?T.call(n,e):!1}function ie(n,e){return n===e||n!==n&&e!==e}function se(n){let e={};return n.forEach(({propName:t,templateName:i})=>{e[X(i)]=t}),e}function oe(n,e){return e.get(w).resolveComponentFactory(n).inputs}function re(n,e){let t=n.childNodes,i=e.map(()=>[]),s=-1;e.some((o,c)=>o==="*"?(s=c,!0):!1);for(let o=0,c=t.length;o<c;++o){let r=t[o],a=ce(r,e,s);a!==-1&&i[a].push(r)}return i}function ce(n,e,t){let i=t;return ee(n)&&e.some((s,o)=>s!=="*"&&ne(n,s)?(i=o,!0):!1),i}var ae=10,x=class{constructor(e,t){this.componentFactory=t.get(w).resolveComponentFactory(e)}create(e){return new V(this.componentFactory,e)}},V=class{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new k(1),this.events=this.eventEmitters.pipe(L(i=>N(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(J),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=I.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},ae))})}getInputValue(e){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{if(this.componentRef===null){this.initialInputValues.set(e,t);return}ie(t,this.getInputValue(e))&&!(t===void 0&&this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges())})}initializeComponent(e){let t=E.create({providers:[],parent:this.injector}),i=re(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(U),this.implementsOnChanges=te(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(B).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){let t=this.componentFactory.outputs.map(({propName:i,templateName:s})=>e.instance[i].pipe(z(c=>({name:s,value:c}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||this.inputChanges===null)return;let t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=I.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;this.inputChanges===null&&(this.inputChanges={});let i=this.inputChanges[e];if(i){i.currentValue=t;return}let s=this.unchangedInputs.has(e),o=s?void 0:this.getInputValue(e);this.inputChanges[e]=new _(o,t,s)}detectChanges(){this.componentRef!==null&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}};var O=class extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}};function $(n,e){let t=oe(n,e.injector),i=e.strategyFactory||new x(n,e.injector),s=se(t);class o extends O{constructor(r){super(),this.injector=r}get ngElementStrategy(){if(!this._ngElementStrategy){let r=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:a})=>{if(!this.hasOwnProperty(a))return;let R=this[a];delete this[a],r.setInputValue(a,R)})}return this._ngElementStrategy}attributeChangedCallback(r,a,R,le){let Q=s[r];this.ngElementStrategy.setInputValue(Q,R)}connectedCallback(){let r=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),r=!0),this.ngElementStrategy.connect(this),r||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(r=>{let a=new CustomEvent(r.name,{detail:r.value});this.dispatchEvent(a)})}}return o.observedAttributes=Object.keys(s),t.forEach(({propName:c})=>{Object.defineProperty(o.prototype,c,{get(){return this.ngElementStrategy.getInputValue(c)},set(r){this.ngElementStrategy.setInputValue(c,r)},configurable:!0,enumerable:!0})}),o}var l=class{constructor(e){this.parent=e,this.property=""}get content(){if(this.parent&&this.property&&this.parent[this.property])return this.parent[this.property]}},Z=l;(()=>{l.\u0275fac=function(t){return new(t||l)(m(g))}})(),(()=>{l.\u0275cmp=M({type:l,selectors:[["dyn-data"]],inputs:{property:"property"},decls:1,vars:1,template:function(t,i){t&1&&v(0),t&2&&q(i.content)},styles:["[_nghost-%COMP%]{display:inline-block;border:1px solid green;padding:5px 2px}"]})})();var p=class{constructor(e,t,i){this.elmRef=e,this.sanitizer=i,this.elm=this.elmRef.nativeElement,this.name="Angular",this.html=`
  <h1>Some random HTML</h1>
  <p>Well, <dyn-data property='name'></dyn-data> is awesome</p>
  <p>
  To do it this way is really dangerous, as it will expose to all kind of security issues.
  (see the functioning alert in the sample code!!)
  But the person that asked the question, needed a way to run script tags, and this is the easiest way.
  With this sample comes a severe warning, that this is really dangerous.
  </p>
  <button onclick="alert('hi')">hi</button>
  `;let s=$(Z,{injector:t});customElements.define("dyn-data",s)}ngOnInit(){this.update(this.html)}update(e){let t=this.elm.querySelector("#target");t.innerHTML=e}},g=p;(()=>{p.\u0275fac=function(t){return new(t||p)(m(H),m(E),m(Y))}})(),(()=>{p.\u0275cmp=M({type:p,selectors:[["app-dynamichtml"]],decls:7,vars:2,consts:[["type","text",3,"value","input"],[3,"value","input"],["id","target"]],template:function(t,i){t&1&&(d(0,"h1"),v(1,"Dynamic HTML sample"),f(),d(2,"input",0),D("input",function(o){return i.name=o.target.value}),f(),d(3,"textarea",1),D("input",function(o){return i.update(o.target.value)}),f(),d(4,"button"),v(5,"Update"),f(),P(6,"div",2)),t&2&&(F(2),S("value",i.name),F(1),S("value",i.html))},styles:["textarea[_ngcontent-%COMP%]{display:block;height:6rem;width:30rem;padding:0}"]})})();var he=[{path:"",component:g}],u=class{},b=u;(()=>{u.\u0275fac=function(t){return new(t||u)}})(),(()=>{u.\u0275mod=C({type:u})})(),(()=>{u.\u0275inj=y({imports:[j.forChild(he),j]})})();var h=class{constructor(){}},K=h;(()=>{h.\u0275fac=function(t){return new(t||h)}})(),(()=>{h.\u0275mod=C({type:h})})(),(()=>{h.\u0275inj=y({imports:[W,b]})})();export{K as DynamichtmlModule};
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license Angular v15.0.3
 * (c) 2010-2022 Google LLC. https://angular.io/
 * License: MIT
 */
