import{d as v,h as D}from"./chunk-BHC7RI4T.js";import"./chunk-FT3LB7SV.js";import{$b as r,Rc as i,Sc as x,_a as c,_b as o,aa as f,fa as p,p as M,qa as b,sb as w,wa as u,xc as a,zc as l}from"./chunk-AAKWIQ7G.js";import"./chunk-C6Q5SG76.js";var h=({serverCall:n,actionType:d,actionSignal:e})=>{if(e().running)throw new Error("Another action is already running");return e.set({running:!0,actionType:d}),M(n).then(t=>{let s={success:!0,data:t};return e.set({running:!1,actionType:d,lastResult:s}),s}).catch(t=>{let s={success:!1,error:t};return e.set({running:!1,actionType:d,lastResult:s}),s})},m=n=>d=>(d.success&&n(d.data),d);var y=1e3,E=60*y,g=60*E,N=24*g,U=(()=>{class n{constructor(){this.des=p(b),this.downFrom=1*g,this.startTime=Date.now(),this.now=u(Date.now()),this.trueDuration=i(()=>+this.now()-+this.startTime-(this.downFrom||0)),this.duration=i(()=>Math.abs(this.trueDuration())),this.days=i(()=>Math.floor(this.duration()/N)),this.hours=i(()=>Math.floor(this.duration()%N/g)),this.minutes=i(()=>Math.floor(this.duration()%g/E)),this.seconds=i(()=>Math.floor(this.duration()%E/y)),this.milliseconds=i(()=>this.duration()%y),this.int=setInterval(()=>{let e=Date.now();this.now.set(e);let t=this.duration(),s=this.downFrom;console.log({durarion:t,now:e,down:s})},500),this._=this.des.onDestroy(()=>{clearInterval(this.int)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=w({type:n,selectors:[["se-timer"]],decls:15,vars:5,template:function(t,s){t&1&&(o(0,"h1"),a(1,"Timer Component"),r(),o(2,"p"),a(3,"Elapsed Time:"),r(),o(4,"ul")(5,"li"),a(6),r(),o(7,"li"),a(8),r(),o(9,"li"),a(10),r(),o(11,"li"),a(12),r(),o(13,"li"),a(14),r()()),t&2&&(c(6),l("",s.days()," days"),c(2),l("",s.hours()," hours"),c(2),l("",s.minutes()," minutes"),c(2),l("",s.seconds()," seconds"),c(2),l("",s.milliseconds()," milliseconds"))},styles:["[_nghost-%COMP%]{display:block}"]})}}return n})(),$=(()=>{class n{constructor(){this.#t=p(v),this.#e=e=>`https://api.example.com/users/${e}`,this.#s=u(u(void 0).asReadonly()),this.#n=x(()=>this.#s()()),this.#i=i(()=>{let e=this.#n();return e?this.#e(e):void 0}),this.userResource=D(this.#i),this.action=u({running:!1})}#t;#e;#s;#n;#i;link(e){return this.#s.set(e),this}create(e){return h({actionSignal:this.action,serverCall:this.#t.post(this.#e(e.id),e),actionType:"create"}).then(m(t=>{this.#n.set(t.id),this.userResource.value.set(t)}))}read(e){this.#n.set(e)}update(e){if(this.userResource.value().id!==e.id)throw new Error("Do you really want to get fired? Updating user id does not match the linked user id.");return h({serverCall:this.#t.put(this.#e(e.id),e),actionType:"update",actionSignal:this.action}).then(m(t=>this.userResource.value.set(t)))}delete(e){return h({serverCall:this.#t.delete(this.#e(e)),actionType:"delete",actionSignal:this.action}).then(m(()=>{this.#n.set(void 0),this.userResource.value.set(void 0)}))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})(),A=(()=>{class n{constructor(){this.#t=p(v),this.#e=e=>`https://api.example.com/users/${e}`,this.usersResource=D(()=>"https://api.example.com/users?orderBy=name"),this.action=u({running:!1})}#t;#e;create(e){return h({actionSignal:this.action,serverCall:this.#t.post(this.#e(e.id),e),actionType:"create"}).then(m(t=>{let s=t;this.usersResource.value.update(R=>[...R||[],s])}))}update(e){return h({serverCall:this.#t.put(this.#e(e.id),e),actionType:"update",actionSignal:this.action})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})();export{U as TimerComponent,$ as UserService,A as usersList};
