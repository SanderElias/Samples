"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[58],{2844:(C,m,r)=>{r.d(m,{P:()=>x,z:()=>S});var g=r(4813);class v extends g.w0{constructor(t,s){super()}schedule(t,s=0){return this}}const h={setInterval(a,t,...s){const{delegate:i}=h;return(null==i?void 0:i.setInterval)?i.setInterval(a,t,...s):setInterval(a,t,...s)},clearInterval(a){const{delegate:t}=h;return((null==t?void 0:t.clearInterval)||clearInterval)(a)},delegate:void 0};var A=r(8308),P=r(2069);class u{constructor(t,s=u.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,i){return new this.schedulerActionCtor(this,t).schedule(i,s)}}u.now=P.l.now;const S=new class y extends u{constructor(t,s=u.now){super(t,s),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,i){for(;t=s.shift();)t.unsubscribe();throw i}}}(class F extends v{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){if(this.closed)return this;this.state=t;const i=this.id,e=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(e,i,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(e,this.id,s),this}requestAsyncId(t,s,i=0){return h.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,s,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return s;h.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,s);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let e,i=!1;try{this.work(t)}catch(T){i=!0,e=T||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:i}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(i,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}}),x=S},9397:(C,m,r)=>{r.r(m),r.d(m,{TumblrModule:()=>L});var g=r(1048),v=r(5166),h=r(4121),A=r(9018),F=r(985),P=r(4581),u=r(4970),y=r(1528),S=r(3568),x=r(2993),a=r(7969),t=r(6466),s=r(3151),i=r(2147),e=r(9724),T=r(9725);function I(n,d){if(1&n){const o=e.EpF();e.TgZ(0,"article",3),e.NdJ("click",function(){const f=e.CHM(o).index;return e.oxw().switch(f)}),e._UZ(1,"img",4),e.qZA()}if(2&n){const o=d.$implicit,c=d.index,l=e.oxw();e.ekj("large",1===l.largePositions[c])("super",2===l.largePositions[c]),e.xp6(1),e.Q6J("src",null==o.images[0]?null:o.images[0].link,e.LSH)}}let D=(()=>{class n{constructor(o,c){this.http=o,this.ref=c,this.largePositions=Array.from({length:250},()=>Math.random()<.2?1:0),this.searchKey$=new h.X("kitten"),this.results$=this.searchKey$.pipe((0,u.h)(l=>!!l),(0,y.w)(l=>this.http.get(`https://api.imgur.com/3/gallery/t/${l}`,{headers:{Authorization:"Client-ID e972ca06cc4b961"}}).pipe((0,S.K)(f=>A.E))),(0,x.j)("data","items"),(0,u.h)(l=>!!l),(0,a.U)(l=>l.filter(f=>[p.ImageJPEG,p.ImagePNG].includes(f.images&&f.images[0].type))),(0,t.d)(1))}setSearch(o){console.log(o)}switch(o){this.largePositions[o]+=1,this.largePositions[o]>2&&(this.largePositions[o]=0)}ngOnInit(){const o=this.ref.nativeElement;if(o){const c=o.getElementsByTagName("input")[0];(0,F.D)(r.e(480).then(r.t.bind(r,1480,23))).pipe((0,a.U)(({wrapGrid:l})=>l(o.querySelector("#grid"))),(0,y.w)(()=>(0,P.R)(c,"input")),(0,a.U)(l=>l.target.value),(0,s.b)(400),(0,i.x)(),(0,u.h)(l=>l.length>0)).subscribe(this.searchKey$)}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(T.eN),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tumblr"]],decls:6,vars:6,consts:[["type","search",3,"value"],["id","grid"],[3,"large","super","click",4,"ngFor","ngForOf"],[3,"click"],["loading","lazy",3,"src"]],template:function(o,c){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",0),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,I,2,5,"article",2),e.ALo(5,"async"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("value",e.lcZ(2,2,c.searchKey$)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(5,4,c.results$)))},directives:[g.sg],pipes:[g.Ov],styles:["root[_ngcontent-%COMP%] {\n    --image-nth: 3;\n  }\n  [_nghost-%COMP%] {\n    display: block;\n    height: 100%;\n  }\n  #grid[_ngcontent-%COMP%] {\n    display: grid;\n    height: 87vh;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    grid-auto-rows: 150px;\n    grid-auto-flow: dense;\n    overflow-x: auto;\n    gap: 4px;\n  }\n\n  .large[_ngcontent-%COMP%] {\n    grid-column: span 2;\n    grid-row: span 2;\n  }\n  .super[_ngcontent-%COMP%] {\n    grid-column: span 4;\n    grid-row: span 4;\n  }\n\n  img[_ngcontent-%COMP%] {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }"]}),n})();var p=(()=>{return(n=p||(p={})).ImageGIF="image/gif",n.ImageJPEG="image/jpeg",n.ImagePNG="image/png",n.VideoMp4="video/mp4",p;var n})();const b=[{path:"",component:D}];let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(b)],v.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,O]]}),n})()}}]);