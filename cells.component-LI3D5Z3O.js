import{m as f}from"./chunk-IBCCEPDQ.js";import{$b as x,Ab as _,Ba as m,Bb as z,Cb as M,Fa as p,Hb as k,Kb as w,_b as B,ac as b,cc as u,eb as d,fa as c,ha as h,hb as y,pc as $,ra as C,sa as v,sc as g,uc as I,xb as D,zb as S}from"./chunk-L7DZHDME.js";import"./chunk-KAT7YFEL.js";var P=(t,l)=>Math.round(Math.random()*(l-t))+t,T=(()=>{class t{constructor(){this.cellData=y.required(),this.elm=c(p).nativeElement,this.zone=c(m),this.aliveColor=`oklch(${P(55,95)}% 75% 173`,this.deadColor=`oklch(${P(10,55)}% 50% 280`,this.id=g(()=>this.cellData().id),this.alive=g(()=>this.cellData().alive),this.setBg=()=>this.zone.runOutsideAngular(()=>this.elm.style.setProperty("--cellBg",this.alive()?this.aliveColor:this.deadColor)),this.dummy=I(()=>this.setBg())}ngOnInit(){this.setBg()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["se-cell"]],inputs:{cellData:[1,"cellData"]},outputs:{cellData:"cellDataChange"},standalone:!0,features:[u],decls:0,vars:0,template:function(e,s){},dependencies:[f],styles:["[_nghost-%COMP%]{display:flex;width:var(--cellSize);aspect-ratio:1;align-items:center;justify-content:center;background-color:var(--cellBg);border-radius:.25rem;padding:0rem;overflow:none;text-overflow:ellipsis}"]})}}return t})();function O(t,l){if(t&1){let i=k();z(0,"se-cell",1),b("cellDataChange",function(s){let a=C(i).$implicit;return x(a,s),v(s)}),M()}if(t&2){let i=l.$implicit;B("cellData",i)}}var A=(t,l)=>Math.round(Math.random()*(l-t))+t,Q=(()=>{class t{constructor(){this.elm=c(p).nativeElement,this.zone=c(m),this.cdr=c($),this.isAlive=d(!1),this.gridSize=d(100),this.cells=d(Array.from({length:200},(i,e)=>d({id:e,alive:Math.random()<.06}))),this.growList=async()=>{let i=this.gridSize()*this.gridSize();for(;this.cells().length<i;){let e=this.cells().length,s=250,a=e+s>i?i-e:s,r=[];for(let o=0;o<a;o+=1)r.push(d({id:e+o,alive:Math.random()<.06}));this.cells.update(o=>o.concat(r)),await new Promise(o=>setTimeout(o,5))}console.log(`Done, created ${i} in a ${this.gridSize()} x ${this.gridSize()} grid.`)},this.repopulate=()=>this.cells().forEach(i=>i.update(({id:e})=>({id:e,alive:Math.random()<.06}))),this.calcGrid=()=>{if(typeof window>"u")return;let e=window.getComputedStyle(this.elm).getPropertyValue("grid-template-columns").split(" ").length;this.gridSize.set(e)},this.aliveColor=`oklch(${A(55,95)}% 75% 173`,this.deadColor=`oklch(${A(10,55)}% 50% 280`,this.cycle=async()=>{let i=this.cells(),e=this.gridSize();for(let s of i){let{id:a,alive:r}=s(),o=R(a,e).reduce((n,E)=>n+=i[E]?.().alive?1:0,0);if(r&&!(o===2||o===3)){s.set({id:a,alive:!1});continue}!r&&o===3&&s.set({id:a,alive:!0})}this.isAlive()&&await new Promise(s=>setTimeout(()=>this.cycle(),100))},this.onClick=i=>{this.zone.runOutsideAngular(()=>{this.started?(clearInterval(this.started),this.repopulate(),this.started=void 0):this.started=setInterval(this.cycle,100)})}}async ngOnInit(){this.calcGrid(),await this.growList(),this.isAlive.set(!0),this.cycle()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["se-cells"]],hostBindings:function(e,s){e&1&&w("click",function(){return s.onClick()})},standalone:!0,features:[u],decls:2,vars:0,consts:[[3,"cellData"],[3,"cellDataChange","cellData"]],template:function(e,s){e&1&&S(0,O,1,1,"se-cell",0,D),e&2&&_(s.cells())},dependencies:[f,T],styles:['@property --cellBg{syntax: "<color>"; inherits: true; initial-value: black;}@property --cellSize{syntax: "<length> | <percentage>"; inherits: true; initial-value: 1.25rem;}[_nghost-%COMP%]{--cellBg: oklch(.5 .5 150);--cellSize: 15px;display:grid;height:95vh;aspect-ratio:1;grid-template-columns:repeat(auto-fit,var(--cellSize));grid-template-rows:repeat(auto-fit,var(--cellSize));gap:.15rem}'],changeDetection:0})}}return t})();function R(t,l){let i=n=>n<l?n-l+l*l:n-l,e=n=>n+l>l*l-1?n+l-l*l:n+l,s=n=>n%l===0?n+l-1:n-1,a=n=>n+1%l===0?n-l+1:n+1,r=i(t),o=e(t);return[s(r),r,a(r),s(t),a(t),s(o),o,a(o)]}export{Q as CellsComponent};
