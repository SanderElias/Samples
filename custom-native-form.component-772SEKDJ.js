import{Aa as h,Ac as V,Fb as E,Hb as P,Ib as O,Ic as A,Jb as D,Kb as o,Lb as s,Mb as m,Qb as v,Qc as I,Tb as f,Ub as w,Vb as S,Wb as F,fa as g,fc as l,hb as c,ka as u,la as p,lb as M,qc as k,ta as b,ya as y}from"./chunk-2IJT2MYE.js";import"./chunk-DAQOROHW.js";var N=["name","","value",""],j=["*"],q=(()=>{class n{constructor(){this.elm=g(h).nativeElement,this.digits=A(4),typeof customElements<"u"&&(customElements.get("digit-input")||customElements.define("digit-input",L))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["digit-input","name","","value",""]],inputs:{digits:[1,"digits"]},attrs:N,ngContentSelectors:j,decls:1,vars:0,template:function(t,i){t&1&&(S(),F(0))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2.7rem;aspect-ratio:3/4;text-align:center;font-size:1.5rem;border-radius:.5rem;border:1px solid #ccc;box-shadow:0 0 5px #0000001a;transition:all .3s ease}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 5px #007bff80}"]})}}return n})(),L=(()=>{class n extends HTMLElement{static{this.observedAttributes=["value"]}static{this.formAssociated=!0}#n="digit-input";#e=document.createElement("form");#s=4;set digits(e){+e!==this.#s&&(this.#s=+e,this.render())}get digits(){return this.#s}#t;#i="";#o="";constructor(){super(),this.#t=this.attachInternals()}get value(){return this.#i}set value(e){this.#i=e}get form(){return this.#t.form}get type(){return this.#n}get validity(){return this.checkValidity()}get validationMessage(){return this.#t.validationMessage}get willValidate(){return this.#t.willValidate}checkValidity(){return Array.from(this.#e.querySelectorAll("input")).map(t=>t.value).some(t=>t<"0"||t>"9")?(this.#t.setValidity({badInput:!0},"Please enter only numbers"),!1):(this.#t.setValidity({}),!0)}connectedCallback(){let e=this.#e;this.onfocus=t=>{let i=Array.from(e.querySelectorAll("input"));for(let r of i){let a=r.value;if(a<"0"||a>"9"){r.focus();break}}},this.tabIndex=0,this.appendChild(e),e.addEventListener("change",t=>{t.preventDefault();let i=Array.from(e.querySelectorAll("input")).map(r=>r.value);this.#i=i.join(""),this.#t.setFormValue(this.#i),this.checkValidity()&&this.#t.states.add("user-valid"),this.#t.states.add("interacted"),console.log("change",this.#i)}),this.render()}attributeChangedCallback(e,t,i){if(e==="value"){let r=this.#e.querySelectorAll("input"),a=Array.from(r);a.length===0&&setTimeout(()=>this.attributeChangedCallback(e,t,i),5);let d=i.split("");a.forEach((x,z)=>{x&&(x.value=d[z]??"")}),this.checkValidity()}e==="digits"&&(this.digits=i)}render(){this.#e.innerHTML="";let e=this.#s;for(let t=0;t<e;t++){let i=document.createElement("input");i.type="text",i.name=`${this.#o}-${t}`,i.maxLength=1,i.autocomplete="off",i.inputMode="numeric",this.#e.appendChild(i)}}}return n})();function $(n,C){if(n&1){let e=v();o(0,"input",1),f("change",function(){u(e);let i=w();return p(i.update())}),s()}if(n&2){let e=C.$implicit;D("value",k(e))}}var H=(()=>{class n extends HTMLElement{constructor(){super(...arguments),this.internals=this?.attachInternals?.()}static{this.observedAttributes=["value"]}static{this.formAssociated=!0}}return n})(),_=(()=>{class n extends H{constructor(){super(...arguments),this.#n=b(4),this.digits=4,this.#e=b(""),this.name="",this.elm=g(h,{optional:!0})?.nativeElement,this.values=V(()=>{let e=this.#n(),t=this.#e();return t.length>e&&(console.warn(`value is longer than digits, truncated to first ${e} digits`),t=t.slice(0,e)),t.length<e&&(console.warn(`value is shorter than digits, padded to ${e} digits`),t=t.padStart(e,"0")),t.split("")}),this.tabIndex=0,this.onfocus=e=>{},this._=I(()=>{console.log(this.name)})}#n;#e;get value(){return this.#e()}set value(e){console.log("set value",e),this.#e.set(e)}update(){let e=this.elm?.querySelectorAll("input")||[],t="";for(let i of Array.from(e))t+=i.value;this.internals.setFormValue(t),this.#e.set(t)}attributeChangedCallback(e,t,i){e==="value"&&this.#e.set(i),e==="name"&&(this.name=i)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(n)))(i||n)}})()}static{this.\u0275cmp=c({type:n,selectors:[["se-digits"]],features:[M],decls:2,vars:0,consts:[["type","text","maxlength","1","inputmode","numeric",3,"value"],["type","text","maxlength","1","inputmode","numeric",3,"change","value"]],template:function(t,i){t&1&&P(0,$,1,2,"input",0,E),t&2&&O(i.values())},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;gap:.5rem}input[_ngcontent-%COMP%]{width:2.7rem;aspect-ratio:3/4;text-align:center;font-size:1.5rem;border-radius:.5rem;border:1px solid #ccc;box-shadow:0 0 5px #0000001a;transition:all .3s ease}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 5px #007bff80}"]})}}return n})();typeof customElements<"u"&&(customElements.get("se-digits")||customElements.define("se-digits",_));var X=(()=>{class n{submit(e){e.preventDefault();let t=e.target,i=new FormData(t);for(let[r,a]of i.entries())console.log(r,a);console.log("Form submitted:",i)}invalidate(e){let i=e?.target?.closest("div");i?.state.add("user-invalid","true"),console.log("div",i)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["se-custom-native-form"]],decls:27,vars:0,consts:[["div",""],[3,"submit"],["for","name"],["type","text","id","name","name","name","required","","value","sander"],["for","email"],["type","email","id","email","name","email","required","","value","sander@email.com"],["for","code"],["name","code","value","0123","digits","7"],["for","code1"],["name","code1","value","012","digits","3"],["type","submit","value","Submit"],[3,"click"]],template:function(t,i){if(t&1){let r=v();o(0,"h1"),l(1,"custom-native-form sample!"),s(),o(2,"form",1),f("submit",function(d){return u(r),p(i.submit(d))}),o(3,"label",2)(4,"span"),l(5,"Name:"),s(),m(6,"input",3),s(),o(7,"label",4)(8,"span"),l(9,"Email:"),s(),m(10,"input",5),s(),o(11,"label",6)(12,"span"),l(13,"Code:"),s(),m(14,"digit-input",7),s(),o(15,"label",8)(16,"span"),l(17,"Code-1:"),s(),m(18,"se-digits",9),s(),o(19,"label"),m(20,"span")(21,"input",10),s()(),o(22,"div",null,0),l(24," data-thingie "),o(25,"button",11),f("click",function(d){return u(r),p(i.invalidate(d))}),l(26,"invalidate"),s()()}},dependencies:[q,_],styles:['[_nghost-%COMP%]{display:block;padding:var(--size-2)}h1[_ngcontent-%COMP%]{max-inline-size:unset}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]{max-inline-size:25rem;display:flex;flex-direction:column;gap:1rem}label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]:has(:user-invalid), label[_ngcontent-%COMP%]:has(:invalid):has(:state(interacted)){border:2px solid red}:is(label[_ngcontent-%COMP%]:has(:user-invalid), label[_ngcontent-%COMP%]:has(:invalid):has(:state(interacted))) > span[_ngcontent-%COMP%]:after{display:inline-block;content:"*";color:red}',"div[_ngcontent-%COMP%]{padding:var(--size2);color:green;width:10rem;margin:1rem;padding:.5rem;border:1px solid green}div[_ngcontent-%COMP%]:user-invalid{color:red;border:1px solid red}"]})}}return n})();export{X as CustomNativeFormComponent};
