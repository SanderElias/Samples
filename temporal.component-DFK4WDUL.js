import{a as E,g as I}from"./chunk-PHEVWZNH.js";import"./chunk-JVGY4RID.js";import"./chunk-L6IEBM7H.js";import"./chunk-MKJTVZO7.js";import"./chunk-TP3JKZKH.js";import{Aa as _,Mb as f,Nb as T,Rc as m,Sc as u,Tb as c,Ub as d,Vb as g,Wb as y,Xb as o,Yb as i,Zb as S,_a as l,hd as w,ic as b,sb as C,wa as p,xc as a,yc as h,zc as v}from"./chunk-52KW3IT7.js";import"./chunk-C6Q5SG76.js";function x(t,s){if(t&1&&(o(0,"option",1),a(1),i()),t&2){let e=s.$implicit;y("value",e),l(),v(" ",e," ")}}function D(t,s){if(t&1&&(o(0,"option",1),a(1),i()),t&2){let e=s.$implicit;y("value",e),l(),v(" ",e," ")}}function F(t,s){if(t&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),a(6),i()()),t&2){let e=s.$implicit;l(2),h(e.region),l(2),h(e.city),l(2),h(e.time())}}var B=(()=>{class t{constructor(){this.temporal=M(),this.now=p(this.temporal().Now,{equal:()=>!1}),this.timeZones=N(),this.browserTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone.split("/"),this.table=p([{region:this.browserTimeZone[0],city:this.browserTimeZone[1],time:m(()=>this.now().plainTimeISO(this.browserTimeZone.join("/")))}]),this.regions=Object.keys(this.timeZones),this.region=u(()=>this.browserTimeZone[0]),this.cities=m(()=>this.timeZones[this.region()].map(({city:e})=>e)),this.city=u({source:this.region,computation:(e,n)=>{let r=_(this.cities);if(e!==n?.source){if(e===this.browserTimeZone[0])return this.browserTimeZone[1];if(r.length>0)return r[0]}return n?.value||r[0]||""}}),this.model=u(()=>({region:this.region(),city:this.city()})),this.form=E(this.model),this._=w(e=>{let n=setInterval(()=>{this.now.set(this.temporal().Now)},1e3);e(()=>clearInterval(n)),console.log(Intl.getCanonicalLocales("NL-NL"))}),this.add=()=>{let e=this.form.region().value(),n=this.form.city().value();this.table.update(r=>[...r,{region:e,city:n,time:m(()=>this.now().plainTimeISO(`${e}/${n}`)),date:m(()=>this.now().plainDateISO(`${e}/${n}`))}])}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["se-temporal"]],decls:31,vars:4,consts:[[3,"change","formField"],[3,"value"],["list","cities",3,"formField"],["id","cities"],["type","button",3,"click"]],template:function(n,r){n&1&&(o(0,"H1"),a(1,"Playing with Temporal"),i(),o(2,"form")(3,"label")(4,"span"),a(5,"Region"),i(),o(6,"select",0),b("change",function(){return r.region.set(r.form.region().value())}),d(7,x,2,2,"option",1,c),i(),f(),i(),o(9,"label")(10,"span"),a(11,"City"),i(),S(12,"input",2),f(),o(13,"datalist",3),d(14,D,2,2,"option",1,c),i()(),o(16,"label")(17,"button",4),b("click",function(){return r.add()}),a(18,"Add"),i()()(),o(19,"table")(20,"thead")(21,"tr")(22,"th"),a(23,"Region"),i(),o(24,"th"),a(25,"City"),i(),o(26,"th"),a(27,"Current Time"),i()()(),o(28,"tbody"),d(29,F,7,3,"tr",null,c),i()()),n&2&&(l(6),T(r.form.region,"formField"),l(),g(r.regions),l(5),T(r.form.city,"formField"),l(2),g(r.cities()),l(15),g(r.table()))},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"]})}}return t})();function M(){let t=p({});return typeof globalThis.Temporal<"u"?t.set(globalThis.Temporal):(console.log("Loading Temporal polyfill..."),import("./temporal-polyfill-37CRL62Q.js").then(s=>{t.set(s.Temporal),globalThis.Temporal=s.Temporal})),t}var N=()=>{let t=Intl.supportedValuesOf("timeZone").map(e=>{let n=e.split("/");return{timeZone:e,region:n[0],city:n[1]}}),s=Map.groupBy(t,e=>e.region).entries();return Object.fromEntries(s)};export{B as TemporalComponent};
