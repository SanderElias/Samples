"use strict";(self.webpackChunksamples=self.webpackChunksamples||[]).push([[398],{2993:(C,p,c)=>{c.d(p,{j:()=>l});var u=c(7969);function l(...t){const m=t.length;if(0===m)throw new Error("list of properties cannot be empty.");return(0,u.U)(h=>{let s=h;for(let r=0;r<m;r++){const f=null==s?void 0:s[t[r]];if(void 0===f)return;s=f}return s})}},5398:(C,p,c)=>{c.r(p),c.d(p,{LocalStateModule:()=>T});var u=c(1048),l=c(5166),t=c(9724);let m=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-local-state"]],decls:1,vars:0,template:function(o,a){1&o&&t._UZ(0,"router-outlet")},directives:[l.lC],encapsulation:2}),n})();var h=c(4762),s=c(4121),r=c(4581),f=c(5696),S=c(2993),v=c(7969),b=c(4970),g=c(8168),L=c(1528);const y=["b"];function j(n,e){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"button",1,2),t.NdJ("click",function(){return t.CHM(o),t.oxw().updateCounterWith(-1)}),t._uU(3,"-1"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"button",1,2),t.NdJ("click",function(){return t.CHM(o),t.oxw().updateCounterWith(1)}),t._uU(8,"+1"),t.qZA(),t.BQk()}if(2&n){const o=e.ngIf;t.xp6(5),t.Oqu(o.count)}}class i{constructor(e){this.route=e,this.localState$=new s.X({count:0}),this.id$=this.route.params.pipe((0,S.j)("id"),(0,v.U)(o=>+o)),this.clicks$=this.localState$.pipe((0,S.j)("buttons"),(0,b.h)(o=>o instanceof t.n_E),(0,v.U)(o=>o.toArray().map(a=>a.nativeElement)),(0,g.b)(o=>o.forEach(a=>console.log(a))),(0,L.w)(o=>(0,r.R)(o,"click")),(0,g.b)(o=>console.log({cl:o}))).subscribe(console.log),this.vm$=(0,f.a)({id:this.id$,state:this.localState$}).pipe((0,v.U)(o=>({id:o.id,count:o.state.count||0})),(0,g.b)(console.log))}ngOnInit(){}updateCounterWith(e){this.localState$.next(Object.assign(Object.assign({},this.localState$.value),{count:this.localState$.value.count+e}))}}i.\u0275fac=function(e){return new(e||i)(t.Y36(l.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ls-home"]],viewQuery:function(e,o){if(1&e&&t.Gf(y,5,t.SBq),2&e){let a;t.iGM(a=t.CRH())&&(o.buttons=a)}},decls:4,vars:3,consts:[[4,"ngIf"],[3,"click"],["b",""]],template:function(e,o){1&e&&(t.TgZ(0,"h2"),t._uU(1," test some state"),t.qZA(),t.YNc(2,j,9,1,"ng-container",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.vm$)))},directives:[u.O5],pipes:[u.Ov],encapsulation:2}),(0,h.gn)([function M(n){return(e,o)=>{Object.defineProperty(e,o,{set:function(a){const d=this[n];a&&d.next(Object.assign(Object.assign({},d.value),{[o]:a}))},get:function(){throw new Error(`Don't read the "${o}" directly, instead take it from the "${n}" behaviourSubject`)},configurable:!1,enumerable:!0})}}("localState$")],i.prototype,"buttons",void 0),Symbol("subjectProp");const $=[{path:"",component:m,children:[{path:":id",component:i},{path:"",redirectTo:"./1",pathMatch:"full"}]}];let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild($)],l.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,O]]}),n})()}}]);